var N0=Object.defineProperty,x0=Object.defineProperties;var M0=Object.getOwnPropertyDescriptors;var iv=Object.getOwnPropertySymbols,P0=Object.getPrototypeOf,k0=Object.prototype.hasOwnProperty,O0=Object.prototype.propertyIsEnumerable,L0=Reflect.get;var sv=(t,e,n)=>e in t?N0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,k=(t,e)=>{for(var n in e||={})k0.call(e,n)&&sv(t,n,e[n]);if(iv)for(var n of iv(e))O0.call(e,n)&&sv(t,n,e[n]);return t},Ee=(t,e)=>x0(t,M0(e));var nr=(t,e,n)=>L0(P0(t),n,e);var D=(t,e,n)=>new Promise((r,i)=>{var s=u=>{try{c(n.next(u))}catch(l){i(l)}},o=u=>{try{c(n.throw(u))}catch(l){i(l)}},c=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);c((n=n.apply(t,e)).next())});var $d=null;var Bd=1,ov=Symbol("SIGNAL");function oe(t){let e=$d;return $d=t,e}function av(){return $d}var Hd={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function F0(t){if(!(Kd(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Bd)){if(!t.producerMustRecompute(t)&&!zd(t)){t.dirty=!1,t.lastCleanEpoch=Bd;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Bd}}function qd(t){return t&&(t.nextProducerIndex=0),oe(t)}function cv(t,e){if(oe(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Kd(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Wd(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function zd(t){Qd(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(F0(n),r!==n.version))return!0}return!1}function Gd(t){if(Qd(t),Kd(t))for(let e=0;e<t.producerNode.length;e++)Wd(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Wd(t,e){if(V0(t),t.liveConsumerNode.length===1&&U0(t))for(let r=0;r<t.producerNode.length;r++)Wd(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Qd(i),i.producerIndexOfThis[r]=e}}function Kd(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Qd(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function V0(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function U0(t){return t.producerNode!==void 0}function j0(){throw new Error}var B0=j0;function uv(t){B0=t}function H(t){return typeof t=="function"}function Oi(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var wc=Oi(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Br(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Re=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(H(r))try{r()}catch(s){e=s instanceof wc?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{lv(s)}catch(o){e=e??[],o instanceof wc?e=[...e,...o.errors]:e.push(o)}}if(e)throw new wc(e)}}add(e){var n;if(e&&e!==this)if(this.closed)lv(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Br(n,e)}remove(e){let{_finalizers:n}=this;n&&Br(n,e),e instanceof t&&e._removeParent(this)}};Re.EMPTY=(()=>{let t=new Re;return t.closed=!0,t})();var Yd=Re.EMPTY;function Ic(t){return t instanceof Re||t&&"closed"in t&&H(t.remove)&&H(t.add)&&H(t.unsubscribe)}function lv(t){H(t)?t():t.unsubscribe()}var qt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Li={setTimeout(t,e,...n){let{delegate:r}=Li;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Li;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Ec(t){Li.setTimeout(()=>{let{onUnhandledError:e}=qt;if(e)e(t);else throw t})}function bo(){}var dv=Jd("C",void 0,void 0);function hv(t){return Jd("E",void 0,t)}function fv(t){return Jd("N",t,void 0)}function Jd(t,e,n){return{kind:t,value:e,error:n}}var $r=null;function Fi(t){if(qt.useDeprecatedSynchronousErrorHandling){let e=!$r;if(e&&($r={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=$r;if($r=null,n)throw r}}else t()}function pv(t){qt.useDeprecatedSynchronousErrorHandling&&$r&&($r.errorThrown=!0,$r.error=t)}var Hr=class extends Re{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ic(e)&&e.add(this)):this.destination=q0}static create(e,n,r){return new Vi(e,n,r)}next(e){this.isStopped?Xd(fv(e),this):this._next(e)}error(e){this.isStopped?Xd(hv(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Xd(dv,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},$0=Function.prototype.bind;function Zd(t,e){return $0.call(t,e)}var eh=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Cc(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Cc(r)}else Cc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Cc(n)}}},Vi=class extends Hr{constructor(e,n,r){super();let i;if(H(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&qt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Zd(e.next,s),error:e.error&&Zd(e.error,s),complete:e.complete&&Zd(e.complete,s)}):i=e}this.destination=new eh(i)}};function Cc(t){qt.useDeprecatedSynchronousErrorHandling?pv(t):Ec(t)}function H0(t){throw t}function Xd(t,e){let{onStoppedNotification:n}=qt;n&&Li.setTimeout(()=>n(t,e))}var q0={closed:!0,next:bo,error:H0,complete:bo};var Ui=typeof Symbol=="function"&&Symbol.observable||"@@observable";function It(t){return t}function th(...t){return nh(t)}function nh(t){return t.length===0?It:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ue=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=G0(n)?n:new Vi(n,r,i);return Fi(()=>{let{operator:o,source:c}=this;s.add(o?o.call(s,c):c?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=gv(r),new r((i,s)=>{let o=new Vi({next:c=>{try{n(c)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Ui](){return this}pipe(...n){return nh(n)(this)}toPromise(n){return n=gv(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function gv(t){var e;return(e=t??qt.Promise)!==null&&e!==void 0?e:Promise}function z0(t){return t&&H(t.next)&&H(t.error)&&H(t.complete)}function G0(t){return t&&t instanceof Hr||z0(t)&&Ic(t)}function rh(t){return H(t?.lift)}function ee(t){return e=>{if(rh(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function te(t,e,n,r,i){return new ih(t,e,n,r,i)}var ih=class extends Hr{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(c){try{n(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ji(){return ee((t,e)=>{let n=null;t._refCount++;let r=te(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Bi=class extends ue{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,rh(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Re;let n=this.getSubject();e.add(this.source.subscribe(te(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Re.EMPTY)}return e}refCount(){return ji()(this)}};var mv=Oi(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ne=(()=>{class t extends ue{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Tc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new mv}next(n){Fi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Fi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Fi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Yd:(this.currentObservers=null,s.push(n),new Re(()=>{this.currentObservers=null,Br(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new ue;return n.source=this,n}}return t.create=(e,n)=>new Tc(e,n),t})(),Tc=class extends Ne{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Yd}};var Ge=class extends Ne{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var sh={now(){return(sh.delegate||Date).now()},delegate:void 0};var bc=class extends Re{constructor(e,n){super()}schedule(e,n=0){return this}};var Do={setInterval(t,e,...n){let{delegate:r}=Do;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Do;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var $i=class extends bc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Do.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Do.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Br(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Hi=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Hi.now=sh.now;var qi=class extends Hi{constructor(e,n=Hi.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var oh=new qi($i);var Dc=class extends $i{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Sc=class extends qi{};var ah=new Sc(Dc);var Et=new ue(t=>t.complete());function yv(t){return t&&H(t.schedule)}function _v(t){return t[t.length-1]}function vv(t){return H(_v(t))?t.pop():void 0}function rr(t){return yv(_v(t))?t.pop():void 0}function Ac(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Iv(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function c(f){try{l(r.next(f))}catch(p){o(p)}}function u(f){try{l(r.throw(f))}catch(p){o(p)}}function l(f){f.done?s(f.value):i(f.value).then(c,u)}l((r=r.apply(t,e||[])).next())})}function wv(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function qr(t){return this instanceof qr?(this.v=t,this):new qr(t)}function Ev(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},c("next"),c("throw"),c("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(I){return function(A){return Promise.resolve(A).then(I,p)}}function c(I,A){r[I]&&(i[I]=function(R){return new Promise(function(P,Y){s.push([I,R,P,Y])>1||u(I,R)})},A&&(i[I]=A(i[I])))}function u(I,A){try{l(r[I](A))}catch(R){y(s[0][3],R)}}function l(I){I.value instanceof qr?Promise.resolve(I.value.v).then(f,p):y(s[0][2],I)}function f(I){u("next",I)}function p(I){u("throw",I)}function y(I,A){I(A),s.shift(),s.length&&u(s[0][0],s[0][1])}}function Cv(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof wv=="function"?wv(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(c,u){o=t[s](o),i(c,u,o.done,o.value)})}}function i(s,o,c,u){Promise.resolve(u).then(function(l){s({value:l,done:c})},o)}}var Rc=t=>t&&typeof t.length=="number"&&typeof t!="function";function Nc(t){return H(t?.then)}function xc(t){return H(t[Ui])}function Mc(t){return Symbol.asyncIterator&&H(t?.[Symbol.asyncIterator])}function Pc(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function W0(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var kc=W0();function Oc(t){return H(t?.[kc])}function Lc(t){return Ev(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield qr(n.read());if(i)return yield qr(void 0);yield yield qr(r)}}finally{n.releaseLock()}})}function Fc(t){return H(t?.getReader)}function Ue(t){if(t instanceof ue)return t;if(t!=null){if(xc(t))return K0(t);if(Rc(t))return Q0(t);if(Nc(t))return Y0(t);if(Mc(t))return Tv(t);if(Oc(t))return J0(t);if(Fc(t))return Z0(t)}throw Pc(t)}function K0(t){return new ue(e=>{let n=t[Ui]();if(H(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Q0(t){return new ue(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function Y0(t){return new ue(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Ec)})}function J0(t){return new ue(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Tv(t){return new ue(e=>{X0(t,e).catch(n=>e.error(n))})}function Z0(t){return Tv(Lc(t))}function X0(t,e){var n,r,i,s;return Iv(this,void 0,void 0,function*(){try{for(n=Cv(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function dt(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function ir(t,e=0){return ee((n,r)=>{n.subscribe(te(r,i=>dt(r,t,()=>r.next(i),e),()=>dt(r,t,()=>r.complete(),e),i=>dt(r,t,()=>r.error(i),e)))})}function sr(t,e=0){return ee((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function bv(t,e){return Ue(t).pipe(sr(e),ir(e))}function Dv(t,e){return Ue(t).pipe(sr(e),ir(e))}function Sv(t,e){return new ue(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Av(t,e){return new ue(n=>{let r;return dt(n,e,()=>{r=t[kc](),dt(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>H(r?.return)&&r.return()})}function Vc(t,e){if(!t)throw new Error("Iterable cannot be null");return new ue(n=>{dt(n,e,()=>{let r=t[Symbol.asyncIterator]();dt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Rv(t,e){return Vc(Lc(t),e)}function Nv(t,e){if(t!=null){if(xc(t))return bv(t,e);if(Rc(t))return Sv(t,e);if(Nc(t))return Dv(t,e);if(Mc(t))return Vc(t,e);if(Oc(t))return Av(t,e);if(Fc(t))return Rv(t,e)}throw Pc(t)}function Oe(t,e){return e?Nv(t,e):Ue(t)}function q(...t){let e=rr(t);return Oe(t,e)}function zi(t,e){let n=H(t)?t:()=>t,r=i=>i.error(n());return new ue(e?i=>e.schedule(r,0,i):r)}function ch(t){return!!t&&(t instanceof ue||H(t.lift)&&H(t.subscribe))}var Mn=Oi(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function J(t,e){return ee((n,r)=>{let i=0;n.subscribe(te(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:eA}=Array;function tA(t,e){return eA(e)?t(...e):t(e)}function xv(t){return J(e=>tA(t,e))}var{isArray:nA}=Array,{getPrototypeOf:rA,prototype:iA,keys:sA}=Object;function Mv(t){if(t.length===1){let e=t[0];if(nA(e))return{args:e,keys:null};if(oA(e)){let n=sA(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function oA(t){return t&&typeof t=="object"&&rA(t)===iA}function Pv(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Uc(...t){let e=rr(t),n=vv(t),{args:r,keys:i}=Mv(t);if(r.length===0)return Oe([],e);let s=new ue(aA(r,e,i?o=>Pv(i,o):It));return n?s.pipe(xv(n)):s}function aA(t,e,n=It){return r=>{kv(e,()=>{let{length:i}=t,s=new Array(i),o=i,c=i;for(let u=0;u<i;u++)kv(e,()=>{let l=Oe(t[u],e),f=!1;l.subscribe(te(r,p=>{s[u]=p,f||(f=!0,c--),c||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function kv(t,e,n){t?dt(n,t,e):e()}function Ov(t,e,n,r,i,s,o,c){let u=[],l=0,f=0,p=!1,y=()=>{p&&!u.length&&!l&&e.complete()},I=R=>l<r?A(R):u.push(R),A=R=>{s&&e.next(R),l++;let P=!1;Ue(n(R,f++)).subscribe(te(e,Y=>{i?.(Y),s?I(Y):e.next(Y)},()=>{P=!0},void 0,()=>{if(P)try{for(l--;u.length&&l<r;){let Y=u.shift();o?dt(e,o,()=>A(Y)):A(Y)}y()}catch(Y){e.error(Y)}}))};return t.subscribe(te(e,I,()=>{p=!0,y()})),()=>{c?.()}}function Le(t,e,n=1/0){return H(e)?Le((r,i)=>J((s,o)=>e(r,s,i,o))(Ue(t(r,i))),n):(typeof e=="number"&&(n=e),ee((r,i)=>Ov(r,i,t,n)))}function uh(t=1/0){return Le(It,t)}function Lv(){return uh(1)}function Gi(...t){return Lv()(Oe(t,rr(t)))}function jc(t){return new ue(e=>{Ue(t()).subscribe(e)})}function zt(t,e){return ee((n,r)=>{let i=0;n.subscribe(te(r,s=>t.call(e,s,i++)&&r.next(s)))})}function or(t){return ee((e,n)=>{let r=null,i=!1,s;r=e.subscribe(te(n,void 0,void 0,o=>{s=Ue(t(o,or(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function Fv(t,e,n,r,i){return(s,o)=>{let c=n,u=e,l=0;s.subscribe(te(o,f=>{let p=l++;u=c?t(u,f,p):(c=!0,f),r&&o.next(u)},i&&(()=>{c&&o.next(u),o.complete()})))}}function Wi(t,e){return H(e)?Le(t,e,1):Le(t,1)}function ar(t){return ee((e,n)=>{let r=!1;e.subscribe(te(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Pn(t){return t<=0?()=>Et:ee((e,n)=>{let r=0;e.subscribe(te(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function lh(t){return J(()=>t)}function Bc(t=cA){return ee((e,n)=>{let r=!1;e.subscribe(te(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function cA(){return new Mn}function So(t){return ee((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function on(t,e){let n=arguments.length>=2;return r=>r.pipe(t?zt((i,s)=>t(i,s,r)):It,Pn(1),n?ar(e):Bc(()=>new Mn))}function Ki(t){return t<=0?()=>Et:ee((e,n)=>{let r=[];e.subscribe(te(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function dh(t,e){let n=arguments.length>=2;return r=>r.pipe(t?zt((i,s)=>t(i,s,r)):It,Ki(1),n?ar(e):Bc(()=>new Mn))}function hh(t,e){return ee(Fv(t,e,arguments.length>=2,!0))}function fh(...t){let e=rr(t);return ee((n,r)=>{(e?Gi(t,n,e):Gi(t,n)).subscribe(r)})}function Gt(t,e){return ee((n,r)=>{let i=null,s=0,o=!1,c=()=>o&&!i&&r.complete();n.subscribe(te(r,u=>{i?.unsubscribe();let l=0,f=s++;Ue(t(u,f)).subscribe(i=te(r,p=>r.next(e?e(u,p,f,l++):p),()=>{i=null,c()}))},()=>{o=!0,c()}))})}function ph(t){return ee((e,n)=>{Ue(t).subscribe(te(n,()=>n.complete(),bo)),!n.closed&&e.subscribe(n)})}function Fe(t,e,n){let r=H(t)||e||n?{next:t,error:e,complete:n}:t;return r?ee((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let c=!0;i.subscribe(te(s,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),s.next(u)},()=>{var u;c=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var l;c=!1,(l=r.error)===null||l===void 0||l.call(r,u),s.error(u)},()=>{var u,l;c&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):It}var _w="https://g.co/ng/security#xss",F=class extends Error{constructor(e,n){super(Ef(e,n)),this.code=e}};function Ef(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function yu(t){return{toString:t}.toString()}var $c="__parameters__";function uA(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function vw(t,e,n){return yu(()=>{let r=uA(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return c.annotation=o,c;function c(u,l,f){let p=u.hasOwnProperty($c)?u[$c]:Object.defineProperty(u,$c,{value:[]})[$c];for(;p.length<=f;)p.push(null);return(p[f]=p[f]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Ro=globalThis;function ge(t){for(let e in t)if(t[e]===ge)return e;throw Error("Could not find renamed property on target object.")}function lA(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function at(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(at).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Sh(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var dA=ge({__forward_ref__:ge});function ww(t){return t.__forward_ref__=ww,t.toString=function(){return at(this())},t}function xt(t){return Iw(t)?t():t}function Iw(t){return typeof t=="function"&&t.hasOwnProperty(dA)&&t.__forward_ref__===ww}function O(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function _u(t){return Vv(t,Cw)||Vv(t,Tw)}function Ew(t){return _u(t)!==null}function Vv(t,e){return t.hasOwnProperty(e)?t[e]:null}function hA(t){let e=t&&(t[Cw]||t[Tw]);return e||null}function Uv(t){return t&&(t.hasOwnProperty(jv)||t.hasOwnProperty(fA))?t[jv]:null}var Cw=ge({\u0275prov:ge}),jv=ge({\u0275inj:ge}),Tw=ge({ngInjectableDef:ge}),fA=ge({ngInjectorDef:ge}),V=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=O({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function bw(t){return t&&!!t.\u0275providers}var pA=ge({\u0275cmp:ge}),gA=ge({\u0275dir:ge}),mA=ge({\u0275pipe:ge}),yA=ge({\u0275mod:ge}),Zc=ge({\u0275fac:ge}),Ao=ge({__NG_ELEMENT_ID__:ge}),Bv=ge({__NG_ENV_ID__:ge});function es(t){return typeof t=="string"?t:t==null?"":String(t)}function _A(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():es(t)}function vA(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new F(-200,t)}function Cf(t,e){throw new F(-201,!1)}var Q=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Q||{}),Ah;function Dw(){return Ah}function ht(t){let e=Ah;return Ah=t,e}function Sw(t,e,n){let r=_u(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&Q.Optional)return null;if(e!==void 0)return e;Cf(t,"Injector")}var wA={},No=wA,Rh="__NG_DI_FLAG__",Xc="ngTempTokenPath",IA="ngTokenPath",EA=/\n/gm,CA="\u0275",$v="__source",Zi;function TA(){return Zi}function cr(t){let e=Zi;return Zi=t,e}function bA(t,e=Q.Default){if(Zi===void 0)throw new F(-203,!1);return Zi===null?Sw(t,void 0,e):Zi.get(t,e&Q.Optional?null:void 0,e)}function j(t,e=Q.Default){return(Dw()||bA)(xt(t),e)}function M(t,e=Q.Default){return j(t,vu(e))}function vu(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Nh(t){let e=[];for(let n=0;n<t.length;n++){let r=xt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new F(900,!1);let i,s=Q.Default;for(let o=0;o<r.length;o++){let c=r[o],u=DA(c);typeof u=="number"?u===-1?i=c.token:s|=u:i=c}e.push(j(i,s))}else e.push(j(r))}return e}function Aw(t,e){return t[Rh]=e,t.prototype[Rh]=e,t}function DA(t){return t[Rh]}function SA(t,e,n,r){let i=t[Xc];throw e[$v]&&i.unshift(e[$v]),t.message=AA(`
`+t.message,i,n,r),t[IA]=i,t[Xc]=null,t}function AA(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==CA?t.slice(2):t;let i=at(e);if(Array.isArray(e))i=e.map(at).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let c=e[o];s.push(o+":"+(typeof c=="string"?JSON.stringify(c):at(c)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(EA,`
  `)}`}var Me=Aw(vw("Optional"),8);var Rw=Aw(vw("SkipSelf"),4);function Wr(t,e){let n=t.hasOwnProperty(Zc);return n?t[Zc]:null}function RA(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}function NA(t){return t.flat(Number.POSITIVE_INFINITY)}function Tf(t,e){t.forEach(n=>Array.isArray(n)?Tf(n,e):e(n))}function Nw(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function eu(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function xA(t,e){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function MA(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function wu(t,e,n){let r=Bo(t,e);return r>=0?t[r|1]=n:(r=~r,MA(t,r,e,n)),r}function gh(t,e){let n=Bo(t,e);if(n>=0)return t[n|1]}function Bo(t,e){return PA(t,e,1)}function PA(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var ts={},un=[],ns=new V(""),xw=new V("",-1),Mw=new V(""),tu=class{get(e,n=No){if(n===No){let r=new Error(`NullInjectorError: No provider for ${at(e)}!`);throw r.name="NullInjectorError",r}return n}},Pw=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Pw||{}),ln=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(ln||{}),rs=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(rs||{});function kA(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function xh(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],c=n[r++];t.setAttribute(e,o,c,s)}else{let s=i,o=n[++r];OA(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function kw(t){return t===3||t===4||t===6}function OA(t){return t.charCodeAt(0)===64}function xo(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Hv(t,n,i,null,e[++r]):Hv(t,n,i,null,null))}}return t}function Hv(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let c=t[s++];if(typeof c=="number"){if(c===e){o=-1;break}else if(c>e){o=s-1;break}}}for(;s<t.length;){let c=t[s];if(typeof c=="number")break;if(c===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var Ow="ng-template";function LA(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&kA(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(bf(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function bf(t){return t.type===4&&t.value!==Ow}function FA(t,e,n){let r=t.type===4&&!n?Ow:t.value;return e===r}function VA(t,e,n){let r=4,i=t.attrs,s=i!==null?BA(i):0,o=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!o&&!Wt(r)&&!Wt(u))return!1;if(o&&Wt(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!FA(t,u,n)||u===""&&e.length===1){if(Wt(r))return!1;o=!0}}else if(r&8){if(i===null||!LA(t,i,u,n)){if(Wt(r))return!1;o=!0}}else{let l=e[++c],f=UA(u,i,bf(t),n);if(f===-1){if(Wt(r))return!1;o=!0;continue}if(l!==""){let p;if(f>s?p="":p=i[f+1].toLowerCase(),r&2&&l!==p){if(Wt(r))return!1;o=!0}}}}return Wt(r)||o}function Wt(t){return(t&1)===0}function UA(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return $A(e,t)}function Lw(t,e,n=!1){for(let r=0;r<e.length;r++)if(VA(t,e[r],n))return!0;return!1}function jA(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if(!(n&1))return e[n+1]}return null}function BA(t){for(let e=0;e<t.length;e++){let n=t[e];if(kw(n))return e}return t.length}function $A(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function HA(t,e){e:for(let n=0;n<e.length;n++){let r=e[n];if(t.length===r.length){for(let i=0;i<t.length;i++)if(t[i]!==r[i])continue e;return!0}}return!1}function qv(t,e){return t?":not("+e.trim()+")":e}function qA(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let c=t[++n];i+="["+o+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Wt(o)&&(e+=qv(s,i),i=""),r=o,s=s||!Wt(r);n++}return i!==""&&(e+=qv(s,i)),e}function zA(t){return t.map(qA).join(",")}function GA(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Wt(i))break;i=s}r++}return{attrs:e,classes:n}}function Pe(t){return yu(()=>{let e=Bw(t),n=Ee(k({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Pw.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||ln.Emulated,styles:t.styles||un,_:null,schemas:t.schemas||null,tView:null,id:""});$w(n);let r=t.dependencies;return n.directiveDefs=Gv(r,!1),n.pipeDefs=Gv(r,!0),n.id=QA(n),n})}function WA(t){return Kr(t)||Fw(t)}function KA(t){return t!==null}function zv(t,e){if(t==null)return ts;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,c=rs.None;Array.isArray(i)?(c=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=c!==rs.None?[r,c]:r,e[s]=o):n[s]=r}return n}function ni(t){return yu(()=>{let e=Bw(t);return $w(e),e})}function $o(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function Kr(t){return t[pA]||null}function Fw(t){return t[gA]||null}function Vw(t){return t[mA]||null}function Uw(t){let e=Kr(t)||Fw(t)||Vw(t);return e!==null?e.standalone:!1}function jw(t,e){let n=t[yA]||null;if(!n&&e===!0)throw new Error(`Type ${at(t)} does not have '\u0275mod' property.`);return n}function Bw(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||ts,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||un,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:zv(t.inputs,e),outputs:zv(t.outputs),debugInfo:null}}function $w(t){t.features?.forEach(e=>e(t))}function Gv(t,e){if(!t)return null;let n=e?Vw:WA;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(KA)}function QA(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Ot(t){return{\u0275providers:t}}function YA(...t){return{\u0275providers:Hw(!0,t),\u0275fromNgModule:!0}}function Hw(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return Tf(e,o=>{let c=o;Mh(c,s,[],r)&&(i||=[],i.push(c))}),i!==void 0&&qw(i,s),n}function qw(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Df(i,s=>{e(s,r)})}}function Mh(t,e,n,r){if(t=xt(t),!t)return!1;let i=null,s=Uv(t),o=!s&&Kr(t);if(!s&&!o){let u=t.ngModule;if(s=Uv(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=t}let c=r.has(i);if(o){if(c)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of u)Mh(l,e,n,r)}}else if(s){if(s.imports!=null&&!c){r.add(i);let l;try{Tf(s.imports,f=>{Mh(f,e,n,r)&&(l||=[],l.push(f))})}finally{}l!==void 0&&qw(l,e)}if(!c){let l=Wr(i)||(()=>new i);e({provide:i,useFactory:l,deps:un},i),e({provide:Mw,useValue:i,multi:!0},i),e({provide:ns,useValue:()=>j(i),multi:!0},i)}let u=s.providers;if(u!=null&&!c){let l=t;Df(u,f=>{e(f,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Df(t,e){for(let n of t)bw(n)&&(n=n.\u0275providers),Array.isArray(n)?Df(n,e):e(n)}var JA=ge({provide:String,useValue:ge});function zw(t){return t!==null&&typeof t=="object"&&JA in t}function ZA(t){return!!(t&&t.useExisting)}function XA(t){return!!(t&&t.useFactory)}function Ph(t){return typeof t=="function"}var Iu=new V(""),Gc={},eR={},mh;function Sf(){return mh===void 0&&(mh=new tu),mh}var Pt=class{},Mo=class extends Pt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Oh(e,o=>this.processProvider(o)),this.records.set(xw,Qi(void 0,this)),i.has("environment")&&this.records.set(Pt,Qi(void 0,this));let s=this.records.get(Iu);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Mw,un,Q.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=oe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),oe(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=cr(this),r=ht(void 0),i;try{return e()}finally{cr(n),ht(r)}}get(e,n=No,r=Q.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Bv))return e[Bv](this);r=vu(r);let i,s=cr(this),o=ht(void 0);try{if(!(r&Q.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=oR(e)&&_u(e);l&&this.injectableDefInScope(l)?u=Qi(kh(e),Gc):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let c=r&Q.Self?Sf():this.parent;return n=r&Q.Optional&&n===No?null:n,c.get(e,n)}catch(c){if(c.name==="NullInjectorError"){if((c[Xc]=c[Xc]||[]).unshift(at(e)),s)throw c;return SA(c,e,"R3InjectorError",this.source)}else throw c}finally{ht(o),cr(s)}}resolveInjectorInitializers(){let e=oe(null),n=cr(this),r=ht(void 0),i;try{let s=this.get(ns,un,Q.Self);for(let o of s)o()}finally{cr(n),ht(r),oe(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(at(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new F(205,!1)}processProvider(e){e=xt(e);let n=Ph(e)?e:xt(e&&e.provide),r=nR(e);if(!Ph(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Qi(void 0,Gc,!0),i.factory=()=>Nh(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=oe(null);try{return n.value===Gc&&(n.value=eR,n.value=n.factory()),typeof n.value=="object"&&n.value&&sR(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{oe(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=xt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function kh(t){let e=_u(t),n=e!==null?e.factory:Wr(t);if(n!==null)return n;if(t instanceof V)throw new F(204,!1);if(t instanceof Function)return tR(t);throw new F(204,!1)}function tR(t){if(t.length>0)throw new F(204,!1);let n=hA(t);return n!==null?()=>n.factory(t):()=>new t}function nR(t){if(zw(t))return Qi(void 0,t.useValue);{let e=rR(t);return Qi(e,Gc)}}function rR(t,e,n){let r;if(Ph(t)){let i=xt(t);return Wr(i)||kh(i)}else if(zw(t))r=()=>xt(t.useValue);else if(XA(t))r=()=>t.useFactory(...Nh(t.deps||[]));else if(ZA(t))r=()=>j(xt(t.useExisting));else{let i=xt(t&&(t.useClass||t.provide));if(iR(t))r=()=>new i(...Nh(t.deps));else return Wr(i)||kh(i)}return r}function Qi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function iR(t){return!!t.deps}function sR(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function oR(t){return typeof t=="function"||typeof t=="object"&&t instanceof V}function Oh(t,e){for(let n of t)Array.isArray(n)?Oh(n,e):n&&bw(n)?Oh(n.\u0275providers,e):e(n)}function Ln(t,e){t instanceof Mo&&t.assertNotDestroyed();let n,r=cr(t),i=ht(void 0);try{return e()}finally{cr(r),ht(i)}}function aR(){return Dw()!==void 0||TA()!=null}function cR(t){return typeof t=="function"}var Fn=0,W=1,U=2,et=3,Qt=4,pt=5,Po=6,nu=7,Yt=8,is=9,dn=10,xe=11,ko=12,Wv=13,hs=14,kt=15,Qr=16,Yi=17,kn=18,Eu=19,Gw=20,ur=21,yh=22,Mt=23,ft=25,Ww=1;var Yr=7,ru=8,ss=9,Ct=10,iu=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(iu||{});function lr(t){return Array.isArray(t)&&typeof t[Ww]=="object"}function Vn(t){return Array.isArray(t)&&t[Ww]===!0}function Af(t){return(t.flags&4)!==0}function Cu(t){return t.componentOffset>-1}function Tu(t){return(t.flags&1)===1}function Jr(t){return!!t.template}function Lh(t){return(t[U]&512)!==0}var Fh=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Kw(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function fs(){return Qw}function Qw(t){return t.type.prototype.ngOnChanges&&(t.setInput=lR),uR}fs.ngInherit=!0;function uR(){let t=Jw(this),e=t?.current;if(e){let n=t.previous;if(n===ts)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function lR(t,e,n,r,i){let s=this.declaredInputs[r],o=Jw(t)||dR(t,{previous:ts,current:null}),c=o.current||(o.current={}),u=o.previous,l=u[s];c[s]=new Fh(l&&l.currentValue,n,u===ts),Kw(t,e,i,n)}var Yw="__ngSimpleChanges__";function Jw(t){return t[Yw]||null}function dR(t,e){return t[Yw]=e}var Kv=null;var an=function(t,e,n){Kv?.(t,e,n)},hR="svg",fR="math";function hn(t){for(;Array.isArray(t);)t=t[Fn];return t}function Zw(t,e){return hn(e[t])}function Lt(t,e){return hn(e[t.index])}function Xw(t,e){return t.data[e]}function eI(t,e){return t[e]}function gr(t,e){let n=e[t];return lr(n)?n:n[Fn]}function pR(t){return(t[U]&4)===4}function Rf(t){return(t[U]&128)===128}function gR(t){return Vn(t[et])}function os(t,e){return e==null?null:t[e]}function tI(t){t[Yi]=0}function nI(t){t[U]&1024||(t[U]|=1024,Rf(t)&&bu(t))}function mR(t,e){for(;t>0;)e=e[hs],t--;return e}function Oo(t){return!!(t[U]&9216||t[Mt]?.dirty)}function Vh(t){t[dn].changeDetectionScheduler?.notify(7),t[U]&64&&(t[U]|=1024),Oo(t)&&bu(t)}function bu(t){t[dn].changeDetectionScheduler?.notify(0);let e=Zr(t);for(;e!==null&&!(e[U]&8192||(e[U]|=8192,!Rf(e)));)e=Zr(e)}function rI(t,e){if((t[U]&256)===256)throw new F(911,!1);t[ur]===null&&(t[ur]=[]),t[ur].push(e)}function yR(t,e){if(t[ur]===null)return;let n=t[ur].indexOf(e);n!==-1&&t[ur].splice(n,1)}function Zr(t){let e=t[et];return Vn(e)?e[et]:e}var K={lFrame:fI(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var iI=!1;function _R(){return K.lFrame.elementDepthCount}function vR(){K.lFrame.elementDepthCount++}function wR(){K.lFrame.elementDepthCount--}function sI(){return K.bindingsEnabled}function oI(){return K.skipHydrationRootTNode!==null}function IR(t){return K.skipHydrationRootTNode===t}function ER(){K.skipHydrationRootTNode=null}function ne(){return K.lFrame.lView}function tt(){return K.lFrame.tView}function mr(t){return K.lFrame.contextLView=t,t[Yt]}function yr(t){return K.lFrame.contextLView=null,t}function gt(){let t=aI();for(;t!==null&&t.type===64;)t=t.parent;return t}function aI(){return K.lFrame.currentTNode}function CR(){let t=K.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function ri(t,e){let n=K.lFrame;n.currentTNode=t,n.isParent=e}function Nf(){return K.lFrame.isParent}function xf(){K.lFrame.isParent=!1}function TR(){return K.lFrame.contextLView}function cI(){return iI}function Qv(t){iI=t}function uI(){let t=K.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function bR(){return K.lFrame.bindingIndex}function DR(t){return K.lFrame.bindingIndex=t}function Mf(){return K.lFrame.bindingIndex++}function Pf(t){let e=K.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function SR(){return K.lFrame.inI18n}function AR(t,e){let n=K.lFrame;n.bindingIndex=n.bindingRootIndex=t,Uh(e)}function RR(){return K.lFrame.currentDirectiveIndex}function Uh(t){K.lFrame.currentDirectiveIndex=t}function NR(t){let e=K.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function lI(){return K.lFrame.currentQueryIndex}function kf(t){K.lFrame.currentQueryIndex=t}function xR(t){let e=t[W];return e.type===2?e.declTNode:e.type===1?t[pt]:null}function dI(t,e,n){if(n&Q.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&Q.Host);)if(i=xR(s),i===null||(s=s[hs],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=K.lFrame=hI();return r.currentTNode=e,r.lView=t,!0}function Of(t){let e=hI(),n=t[W];K.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function hI(){let t=K.lFrame,e=t===null?null:t.child;return e===null?fI(t):e}function fI(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function pI(){let t=K.lFrame;return K.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var gI=pI;function Lf(){let t=pI();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function MR(t){return(K.lFrame.contextLView=mR(t,K.lFrame.contextLView))[Yt]}function ii(){return K.lFrame.selectedIndex}function Xr(t){K.lFrame.selectedIndex=t}function mI(){let t=K.lFrame;return Xw(t.tView,t.selectedIndex)}function PR(){return K.lFrame.currentNamespace}var yI=!0;function Du(){return yI}function Su(t){yI=t}function kR(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=Qw(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function Au(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:f}=s;o&&(t.contentHooks??=[]).push(-n,o),c&&((t.contentHooks??=[]).push(n,c),(t.contentCheckHooks??=[]).push(n,c)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),f!=null&&(t.destroyHooks??=[]).push(n,f)}}function Wc(t,e,n){_I(t,e,3,n)}function Kc(t,e,n,r){(t[U]&3)===n&&_I(t,e,n,r)}function _h(t,e){let n=t[U];(n&3)===e&&(n&=16383,n+=1,t[U]=n)}function _I(t,e,n,r){let i=r!==void 0?t[Yi]&65535:0,s=r??-1,o=e.length-1,c=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(t[Yi]+=65536),(c<s||s==-1)&&(OR(t,n,e,u),t[Yi]=(t[Yi]&4294901760)+u+2),u++}function Yv(t,e){an(4,t,e);let n=oe(null);try{e.call(t)}finally{oe(n),an(5,t,e)}}function OR(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],c=t[o];i?t[U]>>14<t[Yi]>>16&&(t[U]&3)===e&&(t[U]+=16384,Yv(c,s)):Yv(c,s)}var Xi=-1,Lo=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function LR(t){return t instanceof Lo}function FR(t){return(t.flags&8)!==0}function VR(t){return(t.flags&16)!==0}var vh={},jh=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=vu(r);let i=this.injector.get(e,vh,r);return i!==vh||n===vh?i:this.parentInjector.get(e,n,r)}};function vI(t){return t!==Xi}function su(t){return t&32767}function UR(t){return t>>16}function ou(t,e){let n=UR(t),r=e;for(;n>0;)r=r[hs],n--;return r}var Bh=!0;function au(t){let e=Bh;return Bh=t,e}var jR=256,wI=jR-1,II=5,BR=0,cn={};function $R(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ao)&&(r=n[Ao]),r==null&&(r=n[Ao]=BR++);let i=r&wI,s=1<<i;e.data[t+(i>>II)]|=s}function EI(t,e){let n=CI(t,e);if(n!==-1)return n;let r=e[W];r.firstCreatePass&&(t.injectorIndex=e.length,wh(r.data,t),wh(e,null),wh(r.blueprint,null));let i=Ff(t,e),s=t.injectorIndex;if(vI(i)){let o=su(i),c=ou(i,e),u=c[W].data;for(let l=0;l<8;l++)e[s+l]=c[o+l]|u[o+l]}return e[s+8]=i,s}function wh(t,e){t.push(0,0,0,0,0,0,0,0,e)}function CI(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Ff(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=AI(i),r===null)return Xi;if(n++,i=i[hs],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Xi}function HR(t,e,n){$R(t,e,n)}function qR(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let s=n[i];if(kw(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(s===e)return n[i+1];i=i+2}}}return null}function TI(t,e,n){if(n&Q.Optional||t!==void 0)return t;Cf(e,"NodeInjector")}function bI(t,e,n,r){if(n&Q.Optional&&r===void 0&&(r=null),!(n&(Q.Self|Q.Host))){let i=t[is],s=ht(void 0);try{return i?i.get(e,r,n&Q.Optional):Sw(e,r,n&Q.Optional)}finally{ht(s)}}return TI(r,e,n)}function DI(t,e,n,r=Q.Default,i){if(t!==null){if(e[U]&2048&&!(r&Q.Self)){let o=KR(t,e,n,r,cn);if(o!==cn)return o}let s=SI(t,e,n,r,cn);if(s!==cn)return s}return bI(e,n,r,i)}function SI(t,e,n,r,i){let s=GR(n);if(typeof s=="function"){if(!dI(e,t,r))return r&Q.Host?TI(i,n,r):bI(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&Q.Optional))Cf(n);else return o}finally{gI()}}else if(typeof s=="number"){let o=null,c=CI(t,e),u=Xi,l=r&Q.Host?e[kt][pt]:null;for((c===-1||r&Q.SkipSelf)&&(u=c===-1?Ff(t,e):e[c+8],u===Xi||!Zv(r,!1)?c=-1:(o=e[W],c=su(u),e=ou(u,e)));c!==-1;){let f=e[W];if(Jv(s,c,f.data)){let p=zR(c,e,n,o,r,l);if(p!==cn)return p}u=e[c+8],u!==Xi&&Zv(r,e[W].data[c+8]===l)&&Jv(s,c,e)?(o=f,c=su(u),e=ou(u,e)):c=-1}}return i}function zR(t,e,n,r,i,s){let o=e[W],c=o.data[t+8],u=r==null?Cu(c)&&Bh:r!=o&&(c.type&3)!==0,l=i&Q.Host&&s===c,f=Qc(c,o,n,u,l);return f!==null?as(e,o,f,c):cn}function Qc(t,e,n,r,i){let s=t.providerIndexes,o=e.data,c=s&1048575,u=t.directiveStart,l=t.directiveEnd,f=s>>20,p=r?c:c+f,y=i?c+f:l;for(let I=p;I<y;I++){let A=o[I];if(I<u&&n===A||I>=u&&A.type===n)return I}if(i){let I=o[u];if(I&&Jr(I)&&I.type===n)return u}return null}function as(t,e,n,r){let i=t[n],s=e.data;if(LR(i)){let o=i;o.resolving&&vA(_A(s[n]));let c=au(o.canSeeViewProviders);o.resolving=!0;let u,l=o.injectImpl?ht(o.injectImpl):null,f=dI(t,r,Q.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&kR(n,s[n],e)}finally{l!==null&&ht(l),au(c),o.resolving=!1,gI()}}return i}function GR(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ao)?t[Ao]:void 0;return typeof e=="number"?e>=0?e&wI:WR:e}function Jv(t,e,n){let r=1<<t;return!!(n[e+(t>>II)]&r)}function Zv(t,e){return!(t&Q.Self)&&!(t&Q.Host&&e)}var Gr=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return DI(this._tNode,this._lView,e,vu(r),n)}};function WR(){return new Gr(gt(),ne())}function Un(t){return yu(()=>{let e=t.prototype.constructor,n=e[Zc]||$h(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Zc]||$h(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function $h(t){return Iw(t)?()=>{let e=$h(xt(t));return e&&e()}:Wr(t)}function KR(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[U]&2048&&!(o[U]&512);){let c=SI(s,o,n,r|Q.Self,cn);if(c!==cn)return c;let u=s.parent;if(!u){let l=o[Gw];if(l){let f=l.get(n,cn,r);if(f!==cn)return f}u=AI(o),o=o[hs]}s=u}return i}function AI(t){let e=t[W],n=e.type;return n===2?e.declTNode:n===1?t[pt]:null}function Vf(t){return qR(gt(),t)}function Xv(t,e=null,n=null,r){let i=RI(t,e,n,r);return i.resolveInjectorInitializers(),i}function RI(t,e=null,n=null,r,i=new Set){let s=[n||un,YA(t)];return r=r||(typeof t=="object"?void 0:at(t)),new Mo(s,e||Sf(),r||null,i)}var zr=class zr{static create(e,n){if(Array.isArray(e))return Xv({name:""},n,e,"");{let r=e.name??"";return Xv({name:r},e.parent,e.providers,r)}}};zr.THROW_IF_NOT_FOUND=No,zr.NULL=new tu,zr.\u0275prov=O({token:zr,providedIn:"any",factory:()=>j(xw)}),zr.__NG_ELEMENT_ID__=-1;var ct=zr;var QR=new V("");QR.__NG_ELEMENT_ID__=t=>{let e=gt();if(e===null)throw new F(204,!1);if(e.type&2)return e.value;if(t&Q.Optional)return null;throw new F(204,!1)};var YR="ngOriginalError";function Ih(t){return t[YR]}var On=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Ih(e);for(;n&&Ih(n);)n=Ih(n);return n||null}},NI=new V("",{providedIn:"root",factory:()=>M(On).handleError.bind(void 0)}),xI=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=JR,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Hh=class extends xI{constructor(e){super(),this._lView=e}onDestroy(e){return rI(this._lView,e),()=>yR(this._lView,e)}};function JR(){return new Hh(ne())}function ZR(){return ps(gt(),ne())}function ps(t,e){return new jn(Lt(t,e))}var jn=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=ZR;let t=e;return t})();function XR(t){return t instanceof jn?t.nativeElement:t}var gs=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ge(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=O({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();var qh=class extends Ne{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,aR()&&(this.destroyRef=M(xI,{optional:!0})??void 0,this.pendingTasks=M(gs,{optional:!0})??void 0)}emit(e){let n=oe(null);try{super.next(e)}finally{oe(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let c=super.subscribe({next:i,error:s,complete:o});return e instanceof Re&&e.add(c),c}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},je=qh;function eN(){return this._results[Symbol.iterator]()}var zh=class t{get changes(){return this._changes??=new je}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=eN)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=NA(e);(this._changesDetected=!RA(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function MI(t){return(t.flags&128)===128}var PI=new Map,tN=0;function nN(){return tN++}function rN(t){PI.set(t[Eu],t)}function iN(t){PI.delete(t[Eu])}var ew="__ngContext__";function dr(t,e){lr(e)?(t[ew]=e[Eu],rN(e)):t[ew]=e}function kI(t){return LI(t[ko])}function OI(t){return LI(t[Qt])}function LI(t){for(;t!==null&&!Vn(t);)t=t[Qt];return t}var Gh;function FI(t){Gh=t}function sN(){if(Gh!==void 0)return Gh;if(typeof document<"u")return document;throw new F(210,!1)}var Uf=new V("",{providedIn:"root",factory:()=>oN}),oN="ng",jf=new V(""),_r=new V("",{providedIn:"platform",factory:()=>"unknown"});var Bf=new V("",{providedIn:"root",factory:()=>sN().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var aN="h",cN="b";var uN=()=>null;function $f(t,e,n=!1){return uN(t,e,n)}var VI=!1,lN=new V("",{providedIn:"root",factory:()=>VI});var Hc;function dN(){if(Hc===void 0&&(Hc=null,Ro.trustedTypes))try{Hc=Ro.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Hc}function tw(t){return dN()?.createScriptURL(t)||t}var cu=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${_w})`}};function ms(t){return t instanceof cu?t.changingThisBreaksApplicationSecurity:t}function Hf(t,e){let n=hN(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${_w})`)}return n===e}function hN(t){return t instanceof cu&&t.getTypeName()||null}var fN=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function UI(t){return t=String(t),t.match(fN)?t:"unsafe:"+t}var Ru=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Ru||{});function pN(t){let e=BI();return e?e.sanitize(Ru.URL,t)||"":Hf(t,"URL")?ms(t):UI(es(t))}function gN(t){let e=BI();if(e)return tw(e.sanitize(Ru.RESOURCE_URL,t)||"");if(Hf(t,"ResourceURL"))return tw(ms(t));throw new F(904,!1)}function mN(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?gN:pN}function jI(t,e,n){return mN(e,n)(t)}function BI(){let t=ne();return t&&t[dn].sanitizer}var yN=/^>|^->|<!--|-->|--!>|<!-$/g,_N=/(<|>)/g,vN="\u200B$1\u200B";function wN(t){return t.replace(yN,e=>e.replace(_N,vN))}function $I(t){return t instanceof Function?t():t}var fn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(fn||{}),IN;function qf(t,e){return IN(t,e)}function Ji(t,e,n,r,i){if(r!=null){let s,o=!1;Vn(r)?s=r:lr(r)&&(o=!0,r=r[Fn]);let c=hn(r);t===0&&n!==null?i==null?KI(e,n,c):uu(e,n,c,i||null,!0):t===1&&n!==null?uu(e,n,c,i||null,!0):t===2?LN(e,c,o):t===3&&e.destroyNode(c),s!=null&&VN(e,t,s,n,i)}}function EN(t,e){return t.createText(e)}function CN(t,e,n){t.setValue(e,n)}function TN(t,e){return t.createComment(wN(e))}function HI(t,e,n){return t.createElement(e,n)}function bN(t,e){qI(t,e),e[Fn]=null,e[pt]=null}function DN(t,e,n,r,i,s){r[Fn]=i,r[pt]=e,xu(t,r,n,1,i,s)}function qI(t,e){e[dn].changeDetectionScheduler?.notify(8),xu(t,e,e[xe],2,null,null)}function SN(t){let e=t[ko];if(!e)return Eh(t[W],t);for(;e;){let n=null;if(lr(e))n=e[ko];else{let r=e[Ct];r&&(n=r)}if(!n){for(;e&&!e[Qt]&&e!==t;)lr(e)&&Eh(e[W],e),e=e[et];e===null&&(e=t),lr(e)&&Eh(e[W],e),n=e&&e[Qt]}e=n}}function AN(t,e,n,r){let i=Ct+r,s=n.length;r>0&&(n[i-1][Qt]=e),r<s-Ct?(e[Qt]=n[i],Nw(n,Ct+r,e)):(n.push(e),e[Qt]=null),e[et]=n;let o=e[Qr];o!==null&&n!==o&&zI(o,e);let c=e[kn];c!==null&&c.insertView(t),Vh(e),e[U]|=128}function zI(t,e){let n=t[ss],r=e[et];if(lr(r))t[U]|=iu.HasTransplantedViews;else{let i=r[et][kt];e[kt]!==i&&(t[U]|=iu.HasTransplantedViews)}n===null?t[ss]=[e]:n.push(e)}function zf(t,e){let n=t[ss],r=n.indexOf(e);n.splice(r,1)}function Wh(t,e){if(t.length<=Ct)return;let n=Ct+e,r=t[n];if(r){let i=r[Qr];i!==null&&i!==t&&zf(i,r),e>0&&(t[n-1][Qt]=r[Qt]);let s=eu(t,Ct+e);bN(r[W],r);let o=s[kn];o!==null&&o.detachView(s[W]),r[et]=null,r[Qt]=null,r[U]&=-129}return r}function GI(t,e){if(!(e[U]&256)){let n=e[xe];n.destroyNode&&xu(t,e,n,3,null,null),SN(e)}}function Eh(t,e){if(e[U]&256)return;let n=oe(null);try{e[U]&=-129,e[U]|=256,e[Mt]&&Gd(e[Mt]),NN(t,e),RN(t,e),e[W].type===1&&e[xe].destroy();let r=e[Qr];if(r!==null&&Vn(e[et])){r!==e[et]&&zf(r,e);let i=e[kn];i!==null&&i.detachView(t)}iN(e)}finally{oe(n)}}function RN(t,e){let n=t.cleanup,r=e[nu];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[nu]=null);let i=e[ur];if(i!==null){e[ur]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function NN(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Lo)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let c=i[s[o]],u=s[o+1];an(4,c,u);try{u.call(c)}finally{an(5,c,u)}}else{an(4,i,s);try{s.call(i)}finally{an(5,i,s)}}}}}function WI(t,e,n){return xN(t,e.parent,n)}function xN(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Fn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===ln.None||s===ln.Emulated)return null}return Lt(r,n)}}function uu(t,e,n,r,i){t.insertBefore(e,n,r,i)}function KI(t,e,n){t.appendChild(e,n)}function nw(t,e,n,r,i){r!==null?uu(t,e,n,r,i):KI(t,e,n)}function MN(t,e,n,r){t.removeChild(e,n,r)}function Gf(t,e){return t.parentNode(e)}function PN(t,e){return t.nextSibling(e)}function QI(t,e,n){return ON(t,e,n)}function kN(t,e,n){return t.type&40?Lt(t,n):null}var ON=kN,rw;function Nu(t,e,n,r){let i=WI(t,r,e),s=e[xe],o=r.parent||e[pt],c=QI(o,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)nw(s,i,n[u],c,!1);else nw(s,i,n,c,!1);rw!==void 0&&rw(s,r,e,n,i)}function Yc(t,e){if(e!==null){let n=e.type;if(n&3)return Lt(e,t);if(n&4)return Kh(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Yc(t,r);{let i=t[e.index];return Vn(i)?Kh(-1,i):hn(i)}}else{if(n&32)return qf(e,t)()||hn(t[e.index]);{let r=YI(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Zr(t[kt]);return Yc(i,r)}else return Yc(t,e.next)}}}return null}function YI(t,e){if(e!==null){let r=t[kt][pt],i=e.projection;return r.projection[i]}return null}function Kh(t,e){let n=Ct+t+1;if(n<e.length){let r=e[n],i=r[W].firstChild;if(i!==null)return Yc(r,i)}return e[Yr]}function LN(t,e,n){let r=Gf(t,e);r&&MN(t,r,e,n)}function Wf(t,e,n,r,i,s,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let c=r[n.index],u=n.type;if(o&&e===0&&(c&&dr(hn(c),r),n.flags|=2),(n.flags&32)!==32)if(u&8)Wf(t,e,n.child,r,i,s,!1),Ji(e,t,i,c,s);else if(u&32){let l=qf(n,r),f;for(;f=l();)Ji(e,t,i,f,s);Ji(e,t,i,c,s)}else u&16?JI(t,e,r,n,i,s):Ji(e,t,i,c,s);n=o?n.projectionNext:n.next}}function xu(t,e,n,r,i,s){Wf(n,r,t.firstChild,e,i,s,!1)}function FN(t,e,n){let r=e[xe],i=WI(t,n,e),s=n.parent||e[pt],o=QI(s,n,e);JI(r,0,e,n,i,o)}function JI(t,e,n,r,i,s){let o=n[kt],u=o[pt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let f=u[l];Ji(e,t,i,f,s)}else{let l=u,f=o[et];MI(r)&&(l.flags|=128),Wf(t,e,l,f,i,s,!0)}}function VN(t,e,n,r,i){let s=n[Yr],o=hn(n);s!==o&&Ji(e,t,r,s,i);for(let c=Ct;c<n.length;c++){let u=n[c];xu(u[W],u,t,e,r,s)}}function UN(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:fn.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=fn.Important),t.setStyle(n,r,i,s))}}function jN(t,e,n){t.setAttribute(e,"style",n)}function ZI(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function XI(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&xh(t,e,r),i!==null&&ZI(t,e,i),s!==null&&jN(t,e,s)}var pn={};function ve(t=1){eE(tt(),ne(),ii()+t,!1)}function eE(t,e,n,r){if(!r)if((e[U]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Wc(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Kc(e,s,0,n)}Xr(n)}function me(t,e=Q.Default){let n=ne();if(n===null)return j(t,e);let r=gt();return DI(r,n,xt(t),e)}function tE(t,e,n,r,i,s){let o=oe(null);try{let c=null;i&rs.SignalBased&&(c=e[r][ov]),c!==null&&c.transformFn!==void 0&&(s=c.transformFn(s)),i&rs.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,c,s,n,r):Kw(e,c,r,s)}finally{oe(o)}}function BN(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Xr(~i);else{let s=i,o=n[++r],c=n[++r];AR(o,s);let u=e[s];c(2,u)}}}finally{Xr(-1)}}function Mu(t,e,n,r,i,s,o,c,u,l,f){let p=e.blueprint.slice();return p[Fn]=i,p[U]=r|4|128|8|64,(l!==null||t&&t[U]&2048)&&(p[U]|=2048),tI(p),p[et]=p[hs]=t,p[Yt]=n,p[dn]=o||t&&t[dn],p[xe]=c||t&&t[xe],p[is]=u||t&&t[is]||null,p[pt]=s,p[Eu]=nN(),p[Po]=f,p[Gw]=l,p[kt]=e.type==2?t[kt]:p,p}function ys(t,e,n,r,i){let s=t.data[e];if(s===null)s=$N(t,e,n,r,i),SR()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=CR();s.injectorIndex=o===null?-1:o.injectorIndex}return ri(s,!0),s}function $N(t,e,n,r,i){let s=aI(),o=Nf(),c=o?s:s&&s.parent,u=t.data[e]=KN(t,c,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function nE(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function rE(t,e,n,r,i){let s=ii(),o=r&2;try{Xr(-1),o&&e.length>ft&&eE(t,e,ft,!1),an(o?2:0,i),n(r,i)}finally{Xr(s),an(o?3:1,i)}}function Kf(t,e,n){if(Af(e)){let r=oe(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let c=t.data[o];if(c.contentQueries){let u=n[o];c.contentQueries(1,u,o)}}}finally{oe(r)}}}function Qf(t,e,n){sI()&&(tx(t,e,n,Lt(n,e)),(n.flags&64)===64&&oE(t,e,n))}function Yf(t,e,n=Lt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],c=o===-1?n(e,t):t[o];t[i++]=c}}}function iE(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Jf(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Jf(t,e,n,r,i,s,o,c,u,l,f){let p=ft+r,y=p+i,I=HN(p,y),A=typeof l=="function"?l():l;return I[W]={type:t,blueprint:I,template:n,queries:null,viewQuery:c,declTNode:e,data:I.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:A,incompleteFirstPass:!1,ssrId:f}}function HN(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:pn);return n}function qN(t,e,n,r){let s=r.get(lN,VI)||n===ln.ShadowDom,o=t.selectRootElement(e,s);return zN(o),o}function zN(t){GN(t)}var GN=()=>null;function WN(t,e,n,r){let i=uE(e);i.push(n),t.firstCreatePass&&lE(t).push(r,i.length-1)}function KN(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,c=0;return oI()&&(c|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function iw(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let c,u=rs.None;Array.isArray(o)?(c=o[0],u=o[1]):c=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?sw(r,n,l,c,u):sw(r,n,l,c)}return r}function sw(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function QN(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,c=[],u=null,l=null;for(let f=r;f<i;f++){let p=s[f],y=n?n.get(p):null,I=y?y.inputs:null,A=y?y.outputs:null;u=iw(0,p.inputs,f,u,I),l=iw(1,p.outputs,f,l,A);let R=u!==null&&o!==null&&!bf(e)?hx(u,f,o):null;c.push(R)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=c,e.inputs=u,e.outputs=l}function YN(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function JN(t,e,n,r,i,s,o,c){let u=Lt(e,n),l=e.inputs,f;!c&&l!=null&&(f=l[r])?(Xf(t,n,f,r,i),Cu(e)&&ZN(n,e.index)):e.type&3?(r=YN(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(u,r,i)):e.type&12}function ZN(t,e){let n=gr(e,t);n[U]&16||(n[U]|=64)}function Zf(t,e,n,r){if(sI()){let i=r===null?null:{"":-1},s=rx(t,n),o,c;s===null?o=c=null:[o,c]=s,o!==null&&sE(t,e,n,o,i,c),i&&ix(n,r,i)}n.mergedAttrs=xo(n.mergedAttrs,n.attrs)}function sE(t,e,n,r,i,s){for(let l=0;l<r.length;l++)HR(EI(n,e),t,r[l].type);ox(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let f=r[l];f.providersResolver&&f.providersResolver(f)}let o=!1,c=!1,u=nE(t,e,r.length,null);for(let l=0;l<r.length;l++){let f=r[l];n.mergedAttrs=xo(n.mergedAttrs,f.hostAttrs),ax(t,n,e,u,f),sx(u,f,i),f.contentQueries!==null&&(n.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(n.flags|=64);let p=f.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!c&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),c=!0),u++}QN(t,n,s)}function XN(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let c=~e.index;ex(o)!=c&&o.push(c),o.push(n,r,s)}}function ex(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function tx(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Cu(n)&&cx(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||EI(n,e),dr(r,e);let o=n.initialInputs;for(let c=i;c<s;c++){let u=t.data[c],l=as(e,t,c,n);if(dr(l,e),o!==null&&dx(e,c-i,l,u,n,o),Jr(u)){let f=gr(n.index,e);f[Yt]=as(e,t,c,n)}}}function oE(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=RR();try{Xr(s);for(let c=r;c<i;c++){let u=t.data[c],l=e[c];Uh(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&nx(u,l)}}finally{Xr(-1),Uh(o)}}function nx(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function rx(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(Lw(e,o.selectors,!1))if(r||(r=[]),Jr(o))if(o.findHostDirectiveDefs!==null){let c=[];i=i||new Map,o.findHostDirectiveDefs(o,c,i),r.unshift(...c,o);let u=c.length;Qh(t,e,u)}else r.unshift(o),Qh(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Qh(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function ix(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new F(-301,!1);r.push(e[i],s)}}}function sx(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Jr(e)&&(n[""]=t)}}function ox(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function ax(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=Wr(i.type,!0)),o=new Lo(s,Jr(i),me);t.blueprint[r]=o,n[r]=o,XN(t,e,r,nE(t,n,i.hostVars,pn),i)}function cx(t,e,n){let r=Lt(e,t),i=iE(n),s=t[dn].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let c=Pu(t,Mu(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=c}function ux(t,e,n,r,i,s){let o=Lt(t,e);lx(e[xe],o,s,t.value,n,r,i)}function lx(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let c=o==null?es(s):o(s,r||"",i);t.setAttribute(e,i,c,n)}}function dx(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let c=0;c<o.length;){let u=o[c++],l=o[c++],f=o[c++],p=o[c++];tE(r,n,u,l,f,p)}}function hx(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let c=0;c<o.length;c+=3)if(o[c]===e){r.push(s,o[c+1],o[c+2],n[i+1]);break}}i+=2}return r}function aE(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function cE(t,e){let n=t.contentQueries;if(n!==null){let r=oe(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let c=t.data[o];kf(s),c.contentQueries(2,e[o],o)}}}finally{oe(r)}}}function Pu(t,e){return t[ko]?t[Wv][Qt]=e:t[ko]=e,t[Wv]=e,e}function Yh(t,e,n){kf(0);let r=oe(null);try{e(t,n)}finally{oe(r)}}function uE(t){return t[nu]??=[]}function lE(t){return t.cleanup??=[]}function dE(t,e){let n=t[is],r=n?n.get(On,null):null;r&&r.handleError(e)}function Xf(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],c=n[s++],u=n[s++],l=e[o],f=t.data[o];tE(f,l,r,c,u,i)}}function fx(t,e,n){let r=Zw(e,t);CN(t[xe],r,n)}function px(t,e){let n=gr(e,t),r=n[W];gx(r,n);let i=n[Fn];i!==null&&n[Po]===null&&(n[Po]=$f(i,n[is])),ep(r,n,n[Yt])}function gx(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function ep(t,e,n){Of(e);try{let r=t.viewQuery;r!==null&&Yh(1,r,n);let i=t.template;i!==null&&rE(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[kn]?.finishViewCreation(t),t.staticContentQueries&&cE(t,e),t.staticViewQueries&&Yh(2,t.viewQuery,n);let s=t.components;s!==null&&mx(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[U]&=-5,Lf()}}function mx(t,e){for(let n=0;n<e.length;n++)px(t,e[n])}function hE(t,e,n,r){let i=oe(null);try{let s=e.tView,c=t[U]&4096?4096:16,u=Mu(t,s,n,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Qr]=l;let f=t[kn];return f!==null&&(u[kn]=f.createEmbeddedView(s)),ep(s,u,n),u}finally{oe(i)}}function Jh(t,e){return!e||e.firstChild===null||MI(t)}function fE(t,e,n,r=!0){let i=e[W];if(AN(i,e,t,n),r){let o=Kh(n,t),c=e[xe],u=Gf(c,t[Yr]);u!==null&&DN(i,t[pt],c,e,u,o)}let s=e[Po];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function lu(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(hn(s)),Vn(s)&&yx(s,r);let o=n.type;if(o&8)lu(t,e,n.child,r);else if(o&32){let c=qf(n,e),u;for(;u=c();)r.push(u)}else if(o&16){let c=YI(e,n);if(Array.isArray(c))r.push(...c);else{let u=Zr(e[kt]);lu(u[W],u,c,r,!0)}}n=i?n.projectionNext:n.next}return r}function yx(t,e){for(let n=Ct;n<t.length;n++){let r=t[n],i=r[W].firstChild;i!==null&&lu(r[W],r,i,e)}t[Yr]!==t[Fn]&&e.push(t[Yr])}var pE=[];function _x(t){return t[Mt]??vx(t)}function vx(t){let e=pE.pop()??Object.create(Ix);return e.lView=t,e}function wx(t){t.lView[Mt]!==t&&(t.lView=null,pE.push(t))}var Ix=Ee(k({},Hd),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{bu(t.lView)},consumerOnSignalRead(){this.lView[Mt]=this}});function Ex(t){let e=t[Mt]??Object.create(Cx);return e.lView=t,e}var Cx=Ee(k({},Hd),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=Zr(t.lView);for(;e&&!gE(e[W]);)e=Zr(e);e&&nI(e)},consumerOnSignalRead(){this.lView[Mt]=this}});function gE(t){return t.type!==2}var Tx=100;function mE(t,e=!0,n=0){let r=t[dn],i=r.rendererFactory,s=!1;s||i.begin?.();try{bx(t,n)}catch(o){throw e&&dE(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function bx(t,e){let n=cI();try{Qv(!0),Zh(t,e);let r=0;for(;Oo(t);){if(r===Tx)throw new F(103,!1);r++,Zh(t,1)}}finally{Qv(n)}}function Dx(t,e,n,r){let i=e[U];if((i&256)===256)return;let s=!1,o=!1;!s&&e[dn].inlineEffectRunner?.flush(),Of(e);let c=!0,u=null,l=null;s||(gE(t)?(l=_x(e),u=qd(l)):av()===null?(c=!1,l=Ex(e),u=qd(l)):e[Mt]&&(Gd(e[Mt]),e[Mt]=null));try{tI(e),DR(t.bindingStartIndex),n!==null&&rE(t,e,n,2,r);let f=(i&3)===3;if(!s)if(f){let I=t.preOrderCheckHooks;I!==null&&Wc(e,I,null)}else{let I=t.preOrderHooks;I!==null&&Kc(e,I,0,null),_h(e,0)}if(o||Sx(e),yE(e,0),t.contentQueries!==null&&cE(t,e),!s)if(f){let I=t.contentCheckHooks;I!==null&&Wc(e,I)}else{let I=t.contentHooks;I!==null&&Kc(e,I,1),_h(e,1)}BN(t,e);let p=t.components;p!==null&&vE(e,p,0);let y=t.viewQuery;if(y!==null&&Yh(2,y,r),!s)if(f){let I=t.viewCheckHooks;I!==null&&Wc(e,I)}else{let I=t.viewHooks;I!==null&&Kc(e,I,2),_h(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[yh]){for(let I of e[yh])I();e[yh]=null}s||(e[U]&=-73)}catch(f){throw s||bu(e),f}finally{l!==null&&(cv(l,u),c&&wx(l)),Lf()}}function yE(t,e){for(let n=kI(t);n!==null;n=OI(n))for(let r=Ct;r<n.length;r++){let i=n[r];_E(i,e)}}function Sx(t){for(let e=kI(t);e!==null;e=OI(e)){if(!(e[U]&iu.HasTransplantedViews))continue;let n=e[ss];for(let r=0;r<n.length;r++){let i=n[r];nI(i)}}}function Ax(t,e,n){let r=gr(e,t);_E(r,n)}function _E(t,e){Rf(t)&&Zh(t,e)}function Zh(t,e){let r=t[W],i=t[U],s=t[Mt],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&zd(s)),o||=!1,s&&(s.dirty=!1),t[U]&=-9217,o)Dx(r,t,r.template,t[Yt]);else if(i&8192){yE(t,1);let c=r.components;c!==null&&vE(t,c,1)}}function vE(t,e,n){for(let r=0;r<e.length;r++)Ax(t,e[r],n)}function tp(t,e){let n=cI()?64:1088;for(t[dn].changeDetectionScheduler?.notify(e);t;){t[U]|=n;let r=Zr(t);if(Lh(t)&&!r)return t;t=r}return null}var ei=class{get rootNodes(){let e=this._lView,n=e[W];return lu(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Yt]}set context(e){this._lView[Yt]=e}get destroyed(){return(this._lView[U]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[et];if(Vn(e)){let n=e[ru],r=n?n.indexOf(this):-1;r>-1&&(Wh(e,r),eu(n,r))}this._attachedToViewContainer=!1}GI(this._lView[W],this._lView)}onDestroy(e){rI(this._lView,e)}markForCheck(){tp(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[U]&=-129}reattach(){Vh(this._lView),this._lView[U]|=128}detectChanges(){this._lView[U]|=1024,mE(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new F(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Lh(this._lView),n=this._lView[Qr];n!==null&&!e&&zf(n,this._lView),qI(this._lView[W],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new F(902,!1);this._appRef=e;let n=Lh(this._lView),r=this._lView[Qr];r!==null&&!n&&zI(r,this._lView),Vh(this._lView)}},cs=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=xx;let t=e;return t})(),Rx=cs,Nx=class extends Rx{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=hE(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new ei(i)}};function xx(){return ku(gt(),ne())}function ku(t,e){return t.type&4?new Nx(e,t,ps(t,e)):null}var aG=new RegExp(`^(\\d+)*(${cN}|${aN})*(.*)`);var Mx=()=>null;function Xh(t,e){return Mx(t,e)}var Fo=class{},np=new V("",{providedIn:"root",factory:()=>!1});var wE=new V(""),ef=class{},du=class{};function Px(t){let e=Error(`No component factory found for ${at(t)}.`);return e[kx]=t,e}var kx="ngComponent";var tf=class{resolveComponentFactory(e){throw Px(e)}},yp=class yp{};yp.NULL=new tf;var us=yp,ls=class{},Ho=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>Ox();let t=e;return t})();function Ox(){let t=ne(),e=gt(),n=gr(e.index,t);return(lr(n)?n:t)[xe]}var Lx=(()=>{let e=class e{};e.\u0275prov=O({token:e,providedIn:"root",factory:()=>null});let t=e;return t})();var ow=new Set;function rp(t){ow.has(t)||(ow.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function IE(t){let e=!0;return setTimeout(()=>{e&&(e=!1,t())}),typeof Ro.requestAnimationFrame=="function"&&Ro.requestAnimationFrame(()=>{e&&(e=!1,t())}),()=>{e=!1}}function aw(t){let e=!0;return queueMicrotask(()=>{e&&t()}),()=>{e=!1}}function cw(...t){}var de=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new je(!1),this.onMicrotaskEmpty=new je(!1),this.onStable=new je(!1),this.onError=new je(!1),typeof Zone>"u")throw new F(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.callbackScheduled=!1,Ux(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new F(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new F(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,Fx,cw,cw);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},Fx={};function ip(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Vx(t){t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,Zone.root.run(()=>{IE(()=>{t.callbackScheduled=!1,nf(t),t.isCheckStableRunning=!0,ip(t),t.isCheckStableRunning=!1})}),nf(t))}function Ux(t){let e=()=>{Vx(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,c)=>{if(jx(c))return n.invokeTask(i,s,o,c);try{return uw(t),n.invokeTask(i,s,o,c)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),lw(t)}},onInvoke:(n,r,i,s,o,c,u)=>{try{return uw(t),n.invoke(i,s,o,c,u)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!Bx(c)&&e(),lw(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,nf(t),ip(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function nf(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function uw(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function lw(t){t._nesting--,ip(t)}var rf=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new je,this.onMicrotaskEmpty=new je,this.onStable=new je,this.onError=new je}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function jx(t){return EE(t,"__ignore_ng_zone__")}function Bx(t){return EE(t,"__scheduler_tick__")}function EE(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var CE=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=O({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function hu(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let c=e[o];if(typeof c=="number")s=c;else if(s==1)i=Sh(i,c);else if(s==2){let u=c,l=e[++o];r=Sh(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var fu=class extends us{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Kr(e);return new Vo(n,this.ngModule)}};function dw(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function $x(t){let e=t.toLowerCase();return e==="svg"?hR:e==="math"?fR:null}var Vo=class extends du{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=dw(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return dw(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=zA(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=oe(null);try{i=i||this.ngModule;let o=i instanceof Pt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let c=o?new jh(e,o):e,u=c.get(ls,null);if(u===null)throw new F(407,!1);let l=c.get(Lx,null),f=c.get(CE,null),p=c.get(Fo,null),y={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:f,changeDetectionScheduler:p},I=u.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",R=r?qN(I,r,this.componentDef.encapsulation,c):HI(I,A,$x(A)),P=512;this.componentDef.signals?P|=4096:this.componentDef.onPush||(P|=16);let Y=null;R!==null&&(Y=$f(R,c,!0));let le=Jf(0,null,null,1,0,null,null,null,null,null,null),G=Mu(null,le,null,P,null,null,y,I,c,null,Y);Of(G);let De,lt;try{let _e=this.componentDef,E,m=null;_e.findHostDirectiveDefs?(E=[],m=new Map,_e.findHostDirectiveDefs(_e,E,m),E.push(_e)):E=[_e];let v=Hx(G,R),w=qx(v,R,_e,E,G,y,I);lt=Xw(le,ft),R&&Wx(I,_e,R,r),n!==void 0&&Kx(lt,this.ngContentSelectors,n),De=Gx(w,_e,E,m,G,[Qx]),ep(le,G,null)}finally{Lf()}return new sf(this.componentType,De,ps(lt,G),G,lt)}finally{oe(s)}}},sf=class extends ef{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new ei(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Xf(s[W],s,i,e,n),this.previousInputValues.set(e,n);let o=gr(this._tNode.index,s);tp(o,1)}}get injector(){return new Gr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Hx(t,e){let n=t[W],r=ft;return t[r]=e,ys(n,r,2,"#host",null)}function qx(t,e,n,r,i,s,o){let c=i[W];zx(r,t,e,o);let u=null;e!==null&&(u=$f(e,i[is]));let l=s.rendererFactory.createRenderer(e,n),f=16;n.signals?f=4096:n.onPush&&(f=64);let p=Mu(i,iE(n),null,f,i[t.index],t,s,l,null,null,u);return c.firstCreatePass&&Qh(c,t,r.length-1),Pu(i,p),i[t.index]=p}function zx(t,e,n,r){for(let i of t)e.mergedAttrs=xo(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(hu(e,e.mergedAttrs,!0),n!==null&&XI(r,n,e))}function Gx(t,e,n,r,i,s){let o=gt(),c=i[W],u=Lt(o,i);sE(c,i,o,n,null,r);for(let f=0;f<n.length;f++){let p=o.directiveStart+f,y=as(i,c,p,o);dr(y,i)}oE(c,i,o),u&&dr(u,i);let l=as(i,c,o.directiveStart+o.componentOffset,o);if(t[Yt]=i[Yt]=l,s!==null)for(let f of s)f(l,e);return Kf(c,o,i),l}function Wx(t,e,n,r){if(r)xh(t,n,["ng-version","18.0.6"]);else{let{attrs:i,classes:s}=GA(e.selectors[0]);i&&xh(t,n,i),s&&s.length>0&&ZI(t,n,s.join(" "))}}function Kx(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function Qx(){let t=gt();Au(ne()[W],t)}var gn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Yx;let t=e;return t})();function Yx(){let t=gt();return bE(t,ne())}var Jx=gn,TE=class extends Jx{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return ps(this._hostTNode,this._hostLView)}get injector(){return new Gr(this._hostTNode,this._hostLView)}get parentInjector(){let e=Ff(this._hostTNode,this._hostLView);if(vI(e)){let n=ou(e,this._hostLView),r=su(e),i=n[W].data[r+8];return new Gr(i,n)}else return new Gr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=hw(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Ct}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=Xh(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(c,i,Jh(this._hostTNode,o)),c}createComponent(e,n,r,i,s){let o=e&&!cR(e),c;if(o)c=n;else{let A=n||{};c=A.index,r=A.injector,i=A.projectableNodes,s=A.environmentInjector||A.ngModuleRef}let u=o?e:new Vo(Kr(e)),l=r||this.parentInjector;if(!s&&u.ngModule==null){let R=(o?l:this.parentInjector).get(Pt,null);R&&(s=R)}let f=Kr(u.componentType??{}),p=Xh(this._lContainer,f?.id??null),y=p?.firstChild??null,I=u.create(l,i,y,s);return this.insertImpl(I.hostView,c,Jh(this._hostTNode,p)),I}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(gR(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[et],l=new TE(u,u[pt],u[et]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return fE(o,i,s,r),e.attachToViewContainerRef(),Nw(Ch(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=hw(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Wh(this._lContainer,n);r&&(eu(Ch(this._lContainer),n),GI(r[W],r))}detach(e){let n=this._adjustIndex(e,-1),r=Wh(this._lContainer,n);return r&&eu(Ch(this._lContainer),n)!=null?new ei(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function hw(t){return t[ru]}function Ch(t){return t[ru]||(t[ru]=[])}function bE(t,e){let n,r=e[t.index];return Vn(r)?n=r:(n=aE(r,e,null,t),e[t.index]=n,Pu(e,n)),Xx(n,e,t,r),new TE(n,t,e)}function Zx(t,e){let n=t[xe],r=n.createComment(""),i=Lt(e,t),s=Gf(n,i);return uu(n,s,r,PN(n,i),!1),r}var Xx=nM,eM=()=>!1;function tM(t,e,n){return eM(t,e,n)}function nM(t,e,n,r){if(t[Yr])return;let i;n.type&8?i=hn(r):i=Zx(e,n),t[Yr]=i}var of=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},af=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let s=0;s<r;s++){let o=n.getByIndex(s),c=this.queries[o.indexInDeclarationView];i.push(c.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)sp(e,n).matches!==null&&this.queries[n].setDirty()}},cf=class{constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=lM(e):this.predicate=e}},uf=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,n!==null?n.push(s):n=[s])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},lf=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,n,rM(n,s)),this.matchTNodeWithReadOption(e,n,Qc(n,e,s,!1,!1))}else r===cs?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Qc(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===jn||i===gn||i===cs&&n.type&4)this.addMatch(n.index,-2);else{let s=Qc(n,e,i,!1,!1);s!==null&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function rM(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function iM(t,e){return t.type&11?ps(t,e):t.type&4?ku(t,e):null}function sM(t,e,n,r){return n===-1?iM(e,t):n===-2?oM(t,e,r):as(t,t[W],n,e)}function oM(t,e,n){if(n===jn)return ps(e,t);if(n===cs)return ku(e,t);if(n===gn)return bE(e,t)}function DE(t,e,n,r){let i=e[kn].queries[r];if(i.matches===null){let s=t.data,o=n.matches,c=[];for(let u=0;o!==null&&u<o.length;u+=2){let l=o[u];if(l<0)c.push(null);else{let f=s[l];c.push(sM(e,f,o[u+1],n.metadata.read))}}i.matches=c}return i.matches}function df(t,e,n,r){let i=t.queries.getByIndex(n),s=i.matches;if(s!==null){let o=DE(t,e,i,n);for(let c=0;c<s.length;c+=2){let u=s[c];if(u>0)r.push(o[c/2]);else{let l=s[c+1],f=e[-u];for(let p=Ct;p<f.length;p++){let y=f[p];y[Qr]===y[et]&&df(y[W],y,l,r)}if(f[ss]!==null){let p=f[ss];for(let y=0;y<p.length;y++){let I=p[y];df(I[W],I,l,r)}}}}}return r}function aM(t,e){return t[kn].queries[e].queryList}function cM(t,e,n){let r=new zh((n&4)===4);return WN(t,e,r,r.destroy),(e[kn]??=new af).queries.push(new of(r))-1}function uM(t,e,n){let r=tt();return r.firstCreatePass&&(dM(r,new cf(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),cM(r,ne(),e)}function lM(t){return t.split(",").map(e=>e.trim())}function dM(t,e,n){t.queries===null&&(t.queries=new uf),t.queries.track(new lf(e,n))}function sp(t,e){return t.queries.getByIndex(e)}function hM(t,e){let n=t[W],r=sp(n,e);return r.crossesNgTemplate?df(n,t,e,[]):DE(n,t,r,e)}function fM(t){return Object.getPrototypeOf(t.prototype).constructor}function si(t){let e=fM(t.type),n=!0,r=[t];for(;e;){let i;if(Jr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new F(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=qc(t.inputs),o.inputTransforms=qc(t.inputTransforms),o.declaredInputs=qc(t.declaredInputs),o.outputs=qc(t.outputs);let c=i.hostBindings;c&&_M(t,c);let u=i.viewQuery,l=i.contentQueries;if(u&&mM(t,u),l&&yM(t,l),pM(t,i),lA(t.outputs,i.outputs),Jr(i)&&i.data.animation){let f=t.data;f.animation=(f.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let c=s[o];c&&c.ngInherit&&c(t),c===si&&(n=!1)}}e=Object.getPrototypeOf(e)}gM(r)}function pM(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function gM(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=xo(i.hostAttrs,n=xo(n,i.hostAttrs))}}function qc(t){return t===ts?{}:t===un?[]:t}function mM(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function yM(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function _M(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function op(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var hr=class{},Uo=class{};var hf=class extends hr{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new fu(this);let i=jw(e);this._bootstrapComponents=$I(i.bootstrap),this._r3Injector=RI(e,n,[{provide:hr,useValue:this},{provide:us,useValue:this.componentFactoryResolver},...r],at(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},ff=class extends Uo{constructor(e){super(),this.moduleType=e}create(e){return new hf(this.moduleType,e,[])}};var pu=class extends hr{constructor(e){super(),this.componentFactoryResolver=new fu(this),this.instance=null;let n=new Mo([...e.providers,{provide:hr,useValue:this},{provide:us,useValue:this.componentFactoryResolver}],e.parent||Sf(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ap(t,e,n=null){return new pu({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function SE(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function AE(t,e,n){return t[e]=n}function fr(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function pf(t,e,n,r){let i=fr(t,e,n);return fr(t,e+1,r)||i}function vM(t,e,n,r,i,s){let o=pf(t,e,n,r);return pf(t,e+2,i,s)||o}function wM(t){return(t.flags&32)===32}function IM(t,e,n,r,i,s,o,c,u){let l=e.consts,f=ys(e,t,4,o||null,c||null);Zf(e,n,f,os(l,u)),Au(e,f);let p=f.tView=Jf(2,f,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,f),p.queries=e.queries.embeddedTView(f)),f}function RE(t,e,n,r,i,s,o,c,u,l){let f=n+ft,p=e.firstCreatePass?IM(f,e,t,r,i,s,o,c,u):e.data[f];ri(p,!1);let y=EM(e,t,p,n);Du()&&Nu(e,t,y,p),dr(y,t);let I=aE(y,t,y,p);return t[f]=I,Pu(t,I),tM(I,p,t),Tu(p)&&Qf(e,t,p),u!=null&&Yf(t,p,l),p}function ut(t,e,n,r,i,s,o,c){let u=ne(),l=tt(),f=os(l.consts,s);return RE(u,l,t,e,n,r,i,f,o,c),ut}var EM=CM;function CM(t,e,n,r){return Su(!0),e[xe].createComment("")}function cp(t,e,n,r){let i=ne(),s=Mf();if(fr(i,s,e)){let o=tt(),c=mI();ux(c,i,t,e,n,r)}return cp}function NE(t,e,n,r){return fr(t,Mf(),n)?e+es(n)+r:pn}function TM(t,e,n,r,i,s){let o=bR(),c=pf(t,o,n,i);return Pf(2),c?e+es(n)+r+es(i)+s:pn}function zc(t,e){return t<<17|e<<2}function ti(t){return t>>17&32767}function bM(t){return(t&2)==2}function DM(t,e){return t&131071|e<<17}function gf(t){return t|2}function ds(t){return(t&131068)>>2}function Th(t,e){return t&-131069|e<<2}function SM(t){return(t&1)===1}function mf(t){return t|1}function AM(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,c=ti(o),u=ds(o);t[r]=n;let l=!1,f;if(Array.isArray(n)){let p=n;f=p[1],(f===null||Bo(p,f)>0)&&(l=!0)}else f=n;if(i)if(u!==0){let y=ti(t[c+1]);t[r+1]=zc(y,c),y!==0&&(t[y+1]=Th(t[y+1],r)),t[c+1]=DM(t[c+1],r)}else t[r+1]=zc(c,0),c!==0&&(t[c+1]=Th(t[c+1],r)),c=r;else t[r+1]=zc(u,0),c===0?c=r:t[u+1]=Th(t[u+1],r),u=r;l&&(t[r+1]=gf(t[r+1])),fw(t,f,r,!0),fw(t,f,r,!1),RM(e,f,t,r,s),o=zc(c,u),s?e.classBindings=o:e.styleBindings=o}function RM(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&Bo(s,e)>=0&&(n[r+1]=mf(n[r+1]))}function fw(t,e,n,r){let i=t[n+1],s=e===null,o=r?ti(i):ds(i),c=!1;for(;o!==0&&(c===!1||s);){let u=t[o],l=t[o+1];NM(u,e)&&(c=!0,t[o+1]=r?mf(l):gf(l)),o=r?ti(l):ds(l)}c&&(t[n+1]=r?gf(i):mf(i))}function NM(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Bo(t,e)>=0:!1}var Kt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function xM(t){return t.substring(Kt.key,Kt.keyEnd)}function MM(t){return PM(t),xE(t,ME(t,0,Kt.textEnd))}function xE(t,e){let n=Kt.textEnd;return n===e?-1:(e=Kt.keyEnd=kM(t,Kt.key=e,n),ME(t,e,n))}function PM(t){Kt.key=0,Kt.keyEnd=0,Kt.value=0,Kt.valueEnd=0,Kt.textEnd=t.length}function ME(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function kM(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function we(t,e,n){let r=ne(),i=Mf();if(fr(r,i,e)){let s=tt(),o=mI();JN(s,o,r,t,e,r[xe],n,!1)}return we}function yf(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";Xf(t,n,s[o],o,r)}function qo(t,e){return OM(t,e,null,!0),qo}function PE(t,e){for(let n=MM(e);n>=0;n=xE(e,n))wu(t,xM(e),!0)}function OM(t,e,n,r){let i=ne(),s=tt(),o=Pf(2);if(s.firstUpdatePass&&LE(s,t,o,r),e!==pn&&fr(i,o,e)){let c=s.data[ii()];FE(s,c,i,i[xe],t,i[o+1]=$M(e,n),r,o)}}function kE(t,e,n,r){let i=tt(),s=Pf(2);i.firstUpdatePass&&LE(i,null,s,r);let o=ne();if(n!==pn&&fr(o,s,n)){let c=i.data[ii()];if(VE(c,r)&&!OE(i,s)){let u=r?c.classesWithoutHost:c.stylesWithoutHost;u!==null&&(n=Sh(u,n||"")),yf(i,c,o,n,r)}else BM(i,c,o,o[xe],o[s+1],o[s+1]=jM(t,e,n),r,s)}}function OE(t,e){return e>=t.expandoStartIndex}function LE(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[ii()],o=OE(t,n);VE(s,r)&&e===null&&!o&&(e=!1),e=LM(i,s,e,r),AM(i,s,e,n,o,r)}}function LM(t,e,n,r){let i=NR(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=bh(null,t,e,n,r),n=jo(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=bh(i,t,e,n,r),s===null){let u=FM(t,e,r);u!==void 0&&Array.isArray(u)&&(u=bh(null,t,e,u[1],r),u=jo(u,e.attrs,r),VM(t,e,r,u))}else s=UM(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function FM(t,e,n){let r=n?e.classBindings:e.styleBindings;if(ds(r)!==0)return t[ti(r)]}function VM(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[ti(i)]=r}function UM(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=jo(r,o,n)}return jo(r,e.attrs,n)}function bh(t,e,n,r,i){let s=null,o=n.directiveEnd,c=n.directiveStylingLast;for(c===-1?c=n.directiveStart:c++;c<o&&(s=e[c],r=jo(r,s.hostAttrs,i),s!==t);)c++;return t!==null&&(n.directiveStylingLast=c),r}function jo(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),wu(t,o,n?!0:e[++s]))}return t===void 0?null:t}function jM(t,e,n){if(n==null||n==="")return un;let r=[],i=ms(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)t(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&t(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function BM(t,e,n,r,i,s,o,c){i===pn&&(i=un);let u=0,l=0,f=0<i.length?i[0]:null,p=0<s.length?s[0]:null;for(;f!==null||p!==null;){let y=u<i.length?i[u+1]:void 0,I=l<s.length?s[l+1]:void 0,A=null,R;f===p?(u+=2,l+=2,y!==I&&(A=p,R=I)):p===null||f!==null&&f<p?(u+=2,A=f):(l+=2,A=p,R=I),A!==null&&FE(t,e,n,r,A,R,o,c),f=u<i.length?i[u]:null,p=l<s.length?s[l]:null}}function FE(t,e,n,r,i,s,o,c){if(!(e.type&3))return;let u=t.data,l=u[c+1],f=SM(l)?pw(u,e,n,i,ds(l),o):void 0;if(!gu(f)){gu(s)||bM(l)&&(s=pw(u,null,n,i,c,o));let p=Zw(ii(),n);UN(r,o,p,i,s)}}function pw(t,e,n,r,i,s){let o=e===null,c;for(;i>0;){let u=t[i],l=Array.isArray(u),f=l?u[1]:u,p=f===null,y=n[i+1];y===pn&&(y=p?un:void 0);let I=p?gh(y,r):f===r?y:void 0;if(l&&!gu(I)&&(I=gh(u,r)),gu(I)&&(c=I,o))return c;let A=t[i+1];i=o?ti(A):ds(A)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(c=gh(u,r))}return c}function gu(t){return t!==void 0}function $M(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=at(ms(t)))),t}function VE(t,e){return(t.flags&(e?8:16))!==0}function Ou(t,e,n){let r=ne(),i=NE(r,t,e,n);kE(wu,PE,i,!0)}function UE(t,e,n,r,i){let s=ne(),o=TM(s,t,e,n,r,i);kE(wu,PE,o,!0)}function HM(t,e,n,r,i,s){let o=e.consts,c=os(o,i),u=ys(e,t,2,r,c);return Zf(e,n,u,os(o,s)),u.attrs!==null&&hu(u,u.attrs,!1),u.mergedAttrs!==null&&hu(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function L(t,e,n,r){let i=ne(),s=tt(),o=ft+t,c=i[xe],u=s.firstCreatePass?HM(o,s,i,e,n,r):s.data[o],l=qM(s,i,u,c,e,t);i[o]=l;let f=Tu(u);return ri(u,!0),XI(c,l,u),!wM(u)&&Du()&&Nu(s,i,l,u),_R()===0&&dr(l,i),vR(),f&&(Qf(s,i,u),Kf(s,u,i)),r!==null&&Yf(i,u),L}function $(){let t=gt();Nf()?xf():(t=t.parent,ri(t,!1));let e=t;IR(e)&&ER(),wR();let n=tt();return n.firstCreatePass&&(Au(n,t),Af(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&FR(e)&&yf(n,e,ne(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&VR(e)&&yf(n,e,ne(),e.stylesWithoutHost,!1),$}function Ft(t,e,n,r){return L(t,e,n,r),$(),Ft}var qM=(t,e,n,r,i,s)=>(Su(!0),HI(r,i,PR()));function zM(t,e,n,r,i){let s=e.consts,o=os(s,r),c=ys(e,t,8,"ng-container",o);o!==null&&hu(c,o,!0);let u=os(s,i);return Zf(e,n,c,u),e.queries!==null&&e.queries.elementStart(e,c),c}function jE(t,e,n){let r=ne(),i=tt(),s=t+ft,o=i.firstCreatePass?zM(s,i,r,e,n):i.data[s];ri(o,!0);let c=GM(i,r,o,t);return r[s]=c,Du()&&Nu(i,r,c,o),dr(c,r),Tu(o)&&(Qf(i,r,o),Kf(i,o,r)),n!=null&&Yf(r,o),jE}function BE(){let t=gt(),e=tt();return Nf()?xf():(t=t.parent,ri(t,!1)),e.firstCreatePass&&(Au(e,t),Af(t)&&e.queries.elementEnd(t)),BE}function Lu(t,e,n){return jE(t,e,n),BE(),Lu}var GM=(t,e,n,r)=>(Su(!0),TN(e[xe],""));function vr(){return ne()}var mu="en-US";var WM=mu;function KM(t){typeof t=="string"&&(WM=t.toLowerCase().replace(/_/g,"-"))}var QM=(t,e,n)=>{};function Ce(t,e,n,r){let i=ne(),s=tt(),o=gt();return JM(s,i,i[xe],o,t,e,r),Ce}function YM(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let c=e[nu],u=i[s+2];return c.length>u?c[u]:null}typeof o=="string"&&(s+=2)}return null}function JM(t,e,n,r,i,s,o){let c=Tu(r),l=t.firstCreatePass&&lE(t),f=e[Yt],p=uE(e),y=!0;if(r.type&3||o){let R=Lt(r,e),P=o?o(R):R,Y=p.length,le=o?De=>o(hn(De[r.index])):r.index,G=null;if(!o&&c&&(G=YM(t,e,i,r.index)),G!==null){let De=G.__ngLastListenerFn__||G;De.__ngNextListenerFn__=s,G.__ngLastListenerFn__=s,y=!1}else{s=mw(r,e,f,s),QM(R,i,s);let De=n.listen(P,i,s);p.push(s,De),l&&l.push(i,le,Y,Y+1)}}else s=mw(r,e,f,s);let I=r.outputs,A;if(y&&I!==null&&(A=I[i])){let R=A.length;if(R)for(let P=0;P<R;P+=2){let Y=A[P],le=A[P+1],lt=e[Y][le].subscribe(s),_e=p.length;p.push(s,lt),l&&l.push(i,r.index,_e,-(_e+1))}}}function gw(t,e,n,r){let i=oe(null);try{return an(6,e,n),n(r)!==!1}catch(s){return dE(t,s),!1}finally{an(7,e,n),oe(i)}}function mw(t,e,n,r){return function i(s){if(s===Function)return r;let o=t.componentOffset>-1?gr(t.index,e):e;tp(o,5);let c=gw(e,n,r,s),u=i.__ngNextListenerFn__;for(;u;)c=gw(e,n,u,s)&&c,u=u.__ngNextListenerFn__;return c}}function mt(t=1){return MR(t)}function ZM(t,e){let n=null,r=jA(t);for(let i=0;i<e.length;i++){let s=e[i];if(s==="*"){n=i;continue}if(r===null?Lw(t,s,!0):HA(r,s))return i}return n}function _s(t){let e=ne()[kt][pt];if(!e.projection){let n=t?t.length:1,r=e.projection=xA(n,null),i=r.slice(),s=e.child;for(;s!==null;){if(s.type!==128){let o=t?ZM(s,t):0;o!==null&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s)}s=s.next}}}function vs(t,e=0,n,r,i,s){let o=ne(),c=tt(),u=r?t+1:null;u!==null&&RE(o,c,u,r,i,s,null,n);let l=ys(c,ft+t,16,null,n||null);l.projection===null&&(l.projection=e),xf();let p=!o[Po]||oI();o[kt][pt].projection[l.projection]===null&&u!==null?XM(o,c,u):p&&(l.flags&32)!==32&&FN(c,o,l)}function XM(t,e,n){let r=ft+n,i=e.data[r],s=t[r],o=Xh(s,i.tView.ssrId),c=hE(t,i,void 0,{dehydratedView:o});fE(s,c,0,Jh(i,o))}function $E(t,e,n){uM(t,e,n)}function up(t){let e=ne(),n=tt(),r=lI();kf(r+1);let i=sp(n,r);if(t.dirty&&pR(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let s=hM(e,r);t.reset(s,XR),t.notifyOnChanges()}return!0}return!1}function lp(){return aM(ne(),lI())}function eP(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function Fu(t){let e=TR();return eI(e,ft+t)}function Z(t,e=""){let n=ne(),r=tt(),i=t+ft,s=r.firstCreatePass?ys(r,i,1,e,null):r.data[i],o=tP(r,n,s,e,t);n[i]=o,Du()&&Nu(r,n,o,s),ri(s,!1)}var tP=(t,e,n,r,i)=>(Su(!0),EN(e[xe],r));function Vt(t){return Vu("",t,""),Vt}function Vu(t,e,n){let r=ne(),i=NE(r,t,e,n);return i!==pn&&fx(r,ii(),i),Vu}var nP=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=Hw(!1,r.type),s=i.length>0?ap([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=O({token:e,providedIn:"environment",factory:()=>new e(j(Pt))});let t=e;return t})();function ke(t){rp("NgStandalone"),t.getStandaloneInjector=e=>e.get(nP).getOrCreateStandaloneInjector(t)}function HE(t,e,n,r,i,s,o){return iP(ne(),uI(),t,e,n,r,i,s,o)}function qE(t,e){let n=t[e];return n===pn?void 0:n}function rP(t,e,n,r,i,s){let o=e+n;return fr(t,o,i)?AE(t,o+1,s?r.call(s,i):r(i)):qE(t,o+1)}function iP(t,e,n,r,i,s,o,c,u){let l=e+n;return vM(t,l,i,s,o,c)?AE(t,l+4,u?r.call(u,i,s,o,c):r(i,s,o,c)):qE(t,l+4)}function zo(t,e){let n=tt(),r,i=t+ft;n.firstCreatePass?(r=sP(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=Wr(r.type,!0)),o,c=ht(me);try{let u=au(!1),l=s();return au(u),eP(n,ne(),i,l),l}finally{ht(c)}}function sP(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function Go(t,e,n){let r=t+ft,i=ne(),s=eI(i,r);return oP(i,r)?rP(i,uI(),e,s.transform,n,s):s.transform(n)}function oP(t,e){return t[W].data[e].pure}function Wo(t,e){return ku(t,e)}var pr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},zE=new pr("18.0.6");var Uu=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var GE=new V("");function ws(t){return!!t&&typeof t.then=="function"}function dp(t){return!!t&&typeof t.subscribe=="function"}var WE=new V(""),KE=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=M(WE,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(ws(o))r.push(o);else if(dp(o)){let c=new Promise((u,l)=>{o.subscribe({complete:u,error:l})});r.push(c)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),hp=new V("");function aP(){uv(()=>{throw new F(600,!1)})}function cP(t){return t.isBoundToModule}var uP=10;function lP(t,e,n){try{let r=n();return ws(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var wr=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=M(NI),this.afterRenderEffectManager=M(CE),this.zonelessEnabled=M(np),this.externalTestViews=new Set,this.beforeRender=new Ne,this.afterTick=new Ne,this.componentTypes=[],this.components=[],this.isStable=M(gs).hasPendingTasks.pipe(J(r=>!r)),this._injector=M(Pt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof du;if(!this._injector.get(KE).done){let I=!s&&Uw(r),A=!1;throw new F(405,A)}let c;s?c=r:c=this._injector.get(us).resolveComponentFactory(r),this.componentTypes.push(c.componentType);let u=cP(c)?void 0:this._injector.get(hr),l=i||c.selector,f=c.create(ct.NULL,[],l,u),p=f.location.nativeElement,y=f.injector.get(GE,null);return y?.registerApplication(p),f.onDestroy(()=>{this.detachView(f.hostView),Dh(this.components,f),y?.unregisterApplication(p)}),this._loadComponent(f),f}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new F(101,!1);let i=oe(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this._runningTick=!1,oe(i),this.afterTick.next()}}detectChangesInAttachedViews(r){let i=null;this._injector.destroyed||(i=this._injector.get(ls,null,{optional:!0}));let s=0,o=this.afterRenderEffectManager;for(;s<uP;){let c=s===0;if(r||!c){this.beforeRender.next(c);for(let{_lView:u,notifyErrorHandler:l}of this._views)dP(u,l,c,this.zonelessEnabled)}else i?.begin?.(),i?.end?.();if(s++,o.executeInternalCallbacks(),!this.allViews.some(({_lView:u})=>Oo(u))&&(o.execute(),!this.allViews.some(({_lView:u})=>Oo(u))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Dh(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(hp,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Dh(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new F(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Dh(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function dP(t,e,n,r){if(!n&&!Oo(t))return;mE(t,e,n&&!r?0:1)}var _f=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},fp=(()=>{let e=class e{compileModuleSync(r){return new ff(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=jw(r),o=$I(s.declarations).reduce((c,u)=>{let l=Kr(u);return l&&c.push(new Vo(l)),c},[]);return new _f(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var hP=(()=>{let e=class e{constructor(){this.zone=M(de),this.changeDetectionScheduler=M(Fo),this.applicationRef=M(wr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),fP=new V("",{factory:()=>!1});function QE({ngZoneFactory:t,ignoreChangesOutsideZone:e}){return t??=()=>new de(JE()),[{provide:de,useFactory:t},{provide:ns,multi:!0,useFactory:()=>{let n=M(hP,{optional:!0});return()=>n.initialize()}},{provide:ns,multi:!0,useFactory:()=>{let n=M(gP);return()=>{n.initialize()}}},{provide:NI,useFactory:pP},e===!0?{provide:wE,useValue:!0}:[]]}function pP(){let t=M(de),e=M(On);return n=>t.runOutsideAngular(()=>e.handleError(n))}function YE(t){let e=t?.ignoreChangesOutsideZone,n=QE({ngZoneFactory:()=>{let r=JE(t);return r.shouldCoalesceEventChangeDetection&&rp("NgZone_CoalesceEvent"),new de(r)},ignoreChangesOutsideZone:e});return Ot([{provide:fP,useValue:!0},{provide:np,useValue:!1},n])}function JE(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var gP=(()=>{let e=class e{constructor(){this.subscription=new Re,this.initialized=!1,this.zone=M(de),this.pendingTasks=M(gs)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{de.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{de.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var mP=(()=>{let e=class e{constructor(){this.appRef=M(wr),this.taskService=M(gs),this.ngZone=M(de),this.zonelessEnabled=M(np),this.disableScheduling=M(wE,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Re,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof rf||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 3:case 2:case 0:case 4:case 5:case 1:{this.shouldRefreshViews=!0;break}case 8:case 7:case 6:case 9:default:}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?aw:IE;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&de.isInAngularZone())}tick(r){if(this.runningTick||this.appRef.destroyed)return;let i=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(r)},void 0,this.schedulerTickApplyArgs)}catch(s){throw this.taskService.remove(i),s}finally{this.cleanup()}this.useMicrotaskScheduler=!0,aw(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(i)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function yP(){return typeof $localize<"u"&&$localize.locale||mu}var pp=new V("",{providedIn:"root",factory:()=>M(pp,Q.Optional|Q.SkipSelf)||yP()});var ZE=new V("");var Jc=null;function _P(t=[],e){return ct.create({name:e,providers:[{provide:Iu,useValue:"platform"},{provide:ZE,useValue:new Set([()=>Jc=null])},...t]})}function vP(t=[]){if(Jc)return Jc;let e=_P(t);return Jc=e,aP(),wP(e),e}function wP(t){t.get(jf,null)?.forEach(n=>n())}var Is=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=IP;let t=e;return t})();function IP(t){return EP(gt(),ne(),(t&16)===16)}function EP(t,e,n){if(Cu(t)&&!n){let r=gr(t.index,e);return new ei(r,r)}else if(t.type&175){let r=e[kt];return new ei(r,e)}return null}var vf=class{constructor(){}supports(e){return e instanceof Map||SE(e)}create(){return new wf}},wf=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let n;for(n=this._mapHead;n!==null;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;n!==null;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;n!==null;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||SE(e)))throw new F(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{let s=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,s)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){let r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,n);let s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}let r=new If(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}},If=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function yw(){return new gp([new vf])}var gp=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||yw()),deps:[[e,new Rw,new Me]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i)return i;throw new F(901,!1)}};e.\u0275prov=O({token:e,providedIn:"root",factory:yw});let t=e;return t})();function XE(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=vP(r),s=[QE({}),{provide:Fo,useExisting:mP},...n||[]],c=new pu({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,u=c.get(de);return u.run(()=>{c.resolveInjectorInitializers();let l=c.get(On,null),f;u.runOutsideAngular(()=>{f=u.onError.subscribe({next:I=>{l.handleError(I)}})});let p=()=>c.destroy(),y=i.get(ZE);return y.add(p),c.onDestroy(()=>{f.unsubscribe(),y.delete(p)}),lP(l,u,()=>{let I=c.get(KE);return I.runInitializers(),I.donePromise.then(()=>{let A=c.get(pp,mu);KM(A||mu);let R=c.get(wr);return e!==void 0&&R.bootstrap(e),R})})})}catch(e){return Promise.reject(e)}}var eC=new V("");function Ko(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function mp(t){let e=oe(null);try{return t()}finally{oe(e)}}var oC=null;function Es(){return oC}function aC(t){oC??=t}var ju=class{};var Tt=new V(""),cC=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>M(CP),providedIn:"platform"});let t=e;return t})();var CP=(()=>{let e=class e extends cC{constructor(){super(),this._doc=M(Tt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Es().getBaseHref(this._doc)}onPopState(r){let i=Es().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Es().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function uC(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function tC(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function oi(t){return t&&t[0]!=="?"?"?"+t:t}var Cs=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>M(lC),providedIn:"root"});let t=e;return t})(),TP=new V(""),lC=(()=>{let e=class e extends Cs{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??M(Tt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return uC(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+oi(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let c=this.prepareExternalUrl(s+oi(o));this._platformLocation.pushState(r,i,c)}replaceState(r,i,s,o){let c=this.prepareExternalUrl(s+oi(o));this._platformLocation.replaceState(r,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(j(cC),j(TP,8))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Qo=(()=>{let e=class e{constructor(r){this._subject=new je,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=SP(tC(nC(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+oi(i))}normalize(r){return e.stripTrailingSlash(DP(this._basePath,nC(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+oi(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+oi(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=oi,e.joinWithSlash=uC,e.stripTrailingSlash=tC,e.\u0275fac=function(i){return new(i||e)(j(Cs))},e.\u0275prov=O({token:e,factory:()=>bP(),providedIn:"root"});let t=e;return t})();function bP(){return new Qo(j(Cs))}function DP(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function nC(t){return t.replace(/\/index.html$/,"")}function SP(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function dC(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Ir=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new _p,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){rC("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){rC("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(me(gn),me(cs))},e.\u0275dir=ni({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),_p=class{constructor(){this.$implicit=null,this.ngIf=null}};function rC(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${at(e)}'.`)}var hC=(()=>{let e=class e{constructor(r,i,s){this._ngEl=r,this._differs=i,this._renderer=s,this._ngStyle=null,this._differ=null}set ngStyle(r){this._ngStyle=r,!this._differ&&r&&(this._differ=this._differs.find(r).create())}ngDoCheck(){if(this._differ){let r=this._differ.diff(this._ngStyle);r&&this._applyChanges(r)}}_setStyle(r,i){let[s,o]=r.split("."),c=s.indexOf("-")===-1?void 0:fn.DashCase;i!=null?this._renderer.setStyle(this._ngEl.nativeElement,s,o?`${i}${o}`:i,c):this._renderer.removeStyle(this._ngEl.nativeElement,s,c)}_applyChanges(r){r.forEachRemovedItem(i=>this._setStyle(i.key,null)),r.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),r.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}};e.\u0275fac=function(i){return new(i||e)(me(jn),me(gp),me(Ho))},e.\u0275dir=ni({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0});let t=e;return t})(),fC=(()=>{let e=class e{constructor(r){this._viewContainerRef=r,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(r){if(this._shouldRecreateView(r)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let s=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,s,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(r){return!!r.ngTemplateOutlet||!!r.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(r,i,s)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,s):!1,get:(r,i,s)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,s)}})}};e.\u0275fac=function(i){return new(i||e)(me(gn))},e.\u0275dir=ni({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[fs]});let t=e;return t})();function AP(t,e){return new F(2100,!1)}var vp=class{createSubscription(e,n){return mp(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){mp(()=>e.unsubscribe())}},wp=class{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}},RP=new wp,NP=new vp,pC=(()=>{let e=class e{constructor(r){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){if(!this._obj){if(r)try{this.markForCheckOnValueUpdate=!1,this._subscribe(r)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if(ws(r))return RP;if(dp(r))return NP;throw AP(e,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){r===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};e.\u0275fac=function(i){return new(i||e)(me(Is,16))},e.\u0275pipe=$o({name:"async",type:e,pure:!1,standalone:!0});let t=e;return t})();var gC=(()=>{let e=class e{transform(r){return JSON.stringify(r,null,2)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275pipe=$o({name:"json",type:e,pure:!1,standalone:!0});let t=e;return t})();var mC="browser",xP="server";function Ip(t){return t===xP}var Bu=class{};var Tp=class extends ju{constructor(){super(...arguments),this.supportsDOMEvents=!0}},bp=class t extends Tp{static makeCurrent(){aC(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=PP();return n==null?null:kP(n)}resetBaseElement(){Yo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return dC(document.cookie,e)}},Yo=null;function PP(){return Yo=Yo||document.querySelector("base"),Yo?Yo.getAttribute("href"):null}function kP(t){return new URL(t,document.baseURI).pathname}var OP=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),$u=new V(""),wC=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new F(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(j($u),j(de))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),Jo=class{constructor(e){this._doc=e}},Ep="ng-app-id",IC=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ip(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Ep}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(Ep),o;{let c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=i,this.platformIsServer&&c.setAttribute(Ep,this.appId),r.appendChild(c),c}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,c=o.get(i)?.elements;c?c.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(j(Tt),j(Uf),j(Bf,8),j(_r))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),Cp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Sp=/%COMP%/g,EC="%COMP%",LP=`_nghost-${EC}`,FP=`_ngcontent-${EC}`,VP=!0,UP=new V("",{providedIn:"root",factory:()=>VP});function jP(t){return FP.replace(Sp,t)}function BP(t){return LP.replace(Sp,t)}function CC(t,e){return e.map(n=>n.replace(Sp,t))}var yC=(()=>{let e=class e{constructor(r,i,s,o,c,u,l,f=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=c,this.platformId=u,this.ngZone=l,this.nonce=f,this.rendererByCompId=new Map,this.platformIsServer=Ip(u),this.defaultRenderer=new Zo(r,c,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===ln.ShadowDom&&(i=Ee(k({},i),{encapsulation:ln.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Hu?s.applyToHost(r):s instanceof Xo&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let c=this.doc,u=this.ngZone,l=this.eventManager,f=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,y=this.platformIsServer;switch(i.encapsulation){case ln.Emulated:o=new Hu(l,f,i,this.appId,p,c,u,y);break;case ln.ShadowDom:return new Dp(l,f,r,i,c,u,this.nonce,y);default:o=new Xo(l,f,i,p,c,u,y);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(j(wC),j(IC),j(Uf),j(UP),j(Tt),j(_r),j(de),j(Bf))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),Zo=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Cp[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(_C(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(_C(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new F(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=Cp[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Cp[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(fn.DashCase|fn.Important)?e.style.setProperty(n,r,i&fn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&fn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Es().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function _C(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Dp=class extends Zo{constructor(e,n,r,i,s,o,c,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=CC(i.id,i.styles);for(let f of l){let p=document.createElement("style");c&&p.setAttribute("nonce",c),p.textContent=f,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Xo=class extends Zo{constructor(e,n,r,i,s,o,c,u){super(e,s,o,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?CC(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Hu=class extends Xo{constructor(e,n,r,i,s,o,c,u){let l=i+"-"+r.id;super(e,n,r,s,o,c,u,l),this.contentAttr=jP(l),this.hostAttr=BP(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},$P=(()=>{let e=class e extends Jo{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(j(Tt))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),HP=(()=>{let e=class e extends Jo{constructor(r){super(r),this.delegate=M(eC,{optional:!0})}supports(r){return this.delegate?this.delegate.supports(r):!1}addEventListener(r,i,s){return this.delegate.addEventListener(r,i,s)}removeEventListener(r,i,s){return this.delegate.removeEventListener(r,i,s)}};e.\u0275fac=function(i){return new(i||e)(j(Tt))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),vC=["alt","control","meta","shift"],qP={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},zP={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},GP=(()=>{let e=class e extends Jo{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),c=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Es().onAndCancel(r,o.domEventName,c))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),c="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),c="code."),vC.forEach(f=>{let p=i.indexOf(f);p>-1&&(i.splice(p,1),c+=f+".")}),c+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=c,l}static matchEventFullKeyCode(r,i){let s=qP[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),vC.forEach(c=>{if(c!==s){let u=zP[c];u(r)&&(o+=c+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(j(Tt))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();function TC(t,e){return XE(k({rootComponent:t},WP(e)))}function WP(t){return{appProviders:[...ZP,...t?.providers??[]],platformProviders:JP}}function KP(){bp.makeCurrent()}function QP(){return new On}function YP(){return FI(document),document}var JP=[{provide:_r,useValue:mC},{provide:jf,useValue:KP,multi:!0},{provide:Tt,useFactory:YP,deps:[]}];var ZP=[{provide:Iu,useValue:"root"},{provide:On,useFactory:QP,deps:[]},{provide:$u,useClass:$P,multi:!0,deps:[Tt,de,_r]},{provide:$u,useClass:GP,multi:!0,deps:[Tt]},{provide:$u,useClass:HP,multi:!0},yC,IC,wC,{provide:ls,useExisting:yC},{provide:Bu,useClass:OP,deps:[]},[]];var bC=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(j(Tt))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var z="primary",ma=Symbol("RouteTitle"),Mp=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Rs(t){return new Mp(t)}function ek(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],c=t[s];if(o[0]===":")i[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function tk(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!mn(t[n],e[n]))return!1;return!0}function mn(t,e){let n=t?Pp(t):void 0,r=e?Pp(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!PC(t[i],e[i]))return!1;return!0}function Pp(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function PC(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function kC(t){return t.length>0?t[t.length-1]:null}function Tr(t){return ch(t)?t:ws(t)?Oe(Promise.resolve(t)):q(t)}var nk={exact:LC,subset:FC},OC={exact:rk,subset:ik,ignored:()=>!0};function DC(t,e,n){return nk[n.paths](t.root,e.root,n.matrixParams)&&OC[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function rk(t,e){return mn(t,e)}function LC(t,e,n){if(!ci(t.segments,e.segments)||!Gu(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!LC(t.children[r],e.children[r],n))return!1;return!0}function ik(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>PC(t[n],e[n]))}function FC(t,e,n){return VC(t,e,e.segments,n)}function VC(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!ci(i,n)||e.hasChildren()||!Gu(i,n,r))}else if(t.segments.length===n.length){if(!ci(t.segments,n)||!Gu(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!FC(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!ci(t.segments,i)||!Gu(t.segments,i,r)||!t.children[z]?!1:VC(t.children[z],e,s,r)}}function Gu(t,e,n){return e.every((r,i)=>OC[n](t[i].parameters,r.parameters))}var Er=class{constructor(e=new he([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Rs(this.queryParams),this._queryParamMap}toString(){return ak.serialize(this)}},he=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Wu(this)}},ai=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Rs(this.parameters),this._parameterMap}toString(){return jC(this)}};function sk(t,e){return ci(t,e)&&t.every((n,r)=>mn(n.parameters,e[r].parameters))}function ci(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function ok(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===z&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==z&&(n=n.concat(e(i,r)))}),n}var sg=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>new oa,providedIn:"root"});let t=e;return t})(),oa=class{parse(e){let n=new Op(e);return new Er(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${ea(e.root,!0)}`,r=lk(e.queryParams),i=typeof e.fragment=="string"?`#${ck(e.fragment)}`:"";return`${n}${r}${i}`}},ak=new oa;function Wu(t){return t.segments.map(e=>jC(e)).join("/")}function ea(t,e){if(!t.hasChildren())return Wu(t);if(e){let n=t.children[z]?ea(t.children[z],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==z&&r.push(`${i}:${ea(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=ok(t,(r,i)=>i===z?[ea(t.children[z],!1)]:[`${i}:${ea(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[z]!=null?`${Wu(t)}/${n[0]}`:`${Wu(t)}/(${n.join("//")})`}}function UC(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qu(t){return UC(t).replace(/%3B/gi,";")}function ck(t){return encodeURI(t)}function kp(t){return UC(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ku(t){return decodeURIComponent(t)}function SC(t){return Ku(t.replace(/\+/g,"%20"))}function jC(t){return`${kp(t.path)}${uk(t.parameters)}`}function uk(t){return Object.entries(t).map(([e,n])=>`;${kp(e)}=${kp(n)}`).join("")}function lk(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${qu(n)}=${qu(i)}`).join("&"):`${qu(n)}=${qu(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var dk=/^[^\/()?;#]+/;function Ap(t){let e=t.match(dk);return e?e[0]:""}var hk=/^[^\/()?;=#]+/;function fk(t){let e=t.match(hk);return e?e[0]:""}var pk=/^[^=?&#]+/;function gk(t){let e=t.match(pk);return e?e[0]:""}var mk=/^[^&#]+/;function yk(t){let e=t.match(mk);return e?e[0]:""}var Op=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new he([],{}):new he([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[z]=new he(e,n)),r}parseSegment(){let e=Ap(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new F(4009,!1);return this.capture(e),new ai(Ku(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=fk(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Ap(this.remaining);i&&(r=i,this.capture(r))}e[Ku(n)]=Ku(r)}parseQueryParam(e){let n=gk(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=yk(this.remaining);o&&(r=o,this.capture(r))}let i=SC(n),s=SC(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Ap(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new F(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=z);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[z]:new he([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new F(4011,!1)}};function BC(t){return t.segments.length>0?new he([],{[z]:t}):t}function $C(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=$C(i);if(r===z&&s.segments.length===0&&s.hasChildren())for(let[o,c]of Object.entries(s.children))e[o]=c;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new he(t.segments,e);return _k(n)}function _k(t){if(t.numberOfChildren===1&&t.children[z]){let e=t.children[z];return new he(t.segments.concat(e.segments),e.children)}return t}function aa(t){return t instanceof Er}function vk(t,e,n=null,r=null){let i=HC(t);return qC(i,e,n,r)}function HC(t){let e;function n(s){let o={};for(let u of s.children){let l=n(u);o[u.outlet]=l}let c=new he(s.url,o);return s===t&&(e=c),c}let r=n(t.root),i=BC(r);return e??i}function qC(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Rp(i,i,i,n,r);let s=wk(e);if(s.toRoot())return Rp(i,i,new he([],{}),n,r);let o=Ik(s,i,t),c=o.processChildren?ra(o.segmentGroup,o.index,s.commands):GC(o.segmentGroup,o.index,s.commands);return Rp(i,o.segmentGroup,c,n,r)}function Qu(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function ca(t){return typeof t=="object"&&t!=null&&t.outlets}function Rp(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(f=>`${f}`):`${l}`});let o;t===e?o=n:o=zC(t,e,n);let c=BC($C(o));return new Er(c,s,i)}function zC(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=zC(s,e,n)}),new he(t.segments,r)}var Yu=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Qu(r[0]))throw new F(4003,!1);let i=r.find(ca);if(i&&i!==kC(r))throw new F(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function wk(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Yu(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([u,l])=>{c[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:c}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?n=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,s]},[]);return new Yu(n,e,r)}var Ds=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function Ik(t,e,n){if(t.isAbsolute)return new Ds(e,!0,0);if(!n)return new Ds(e,!1,NaN);if(n.parent===null)return new Ds(n,!0,0);let r=Qu(t.commands[0])?0:1,i=n.segments.length-1+r;return Ek(n,i,t.numberOfDoubleDots)}function Ek(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new F(4005,!1);i=r.segments.length}return new Ds(r,!1,i-s)}function Ck(t){return ca(t[0])?t[0].outlets:{[z]:t}}function GC(t,e,n){if(t??=new he([],{}),t.segments.length===0&&t.hasChildren())return ra(t,e,n);let r=Tk(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new he(t.segments.slice(0,r.pathIndex),{});return s.children[z]=new he(t.segments.slice(r.pathIndex),t.children),ra(s,0,i)}else return r.match&&i.length===0?new he(t.segments,{}):r.match&&!t.hasChildren()?Lp(t,e,n):r.match?ra(t,0,i):Lp(t,e,n)}function ra(t,e,n){if(n.length===0)return new he(t.segments,{});{let r=Ck(n),i={};if(Object.keys(r).some(s=>s!==z)&&t.children[z]&&t.numberOfChildren===1&&t.children[z].segments.length===0){let s=ra(t.children[z],e,n);return new he(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=GC(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new he(t.segments,i)}}function Tk(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],c=n[r];if(ca(c))break;let u=`${c}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!RC(u,l,o))return s;r+=2}else{if(!RC(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Lp(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(ca(s)){let u=bk(s.outlets);return new he(r,u)}if(i===0&&Qu(n[0])){let u=t.segments[e];r.push(new ai(u.path,AC(n[0]))),i++;continue}let o=ca(s)?s.outlets[z]:`${s}`,c=i<n.length-1?n[i+1]:null;o&&c&&Qu(c)?(r.push(new ai(o,AC(c))),i+=2):(r.push(new ai(o,{})),i++)}return new he(r,{})}function bk(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Lp(new he([],{}),0,r))}),e}function AC(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function RC(t,e,n){return t==n.path&&mn(e,n.parameters)}var ia="imperative",Ke=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Ke||{}),Ut=class{constructor(e,n){this.id=e,this.url=n}},ua=class extends Ut{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Ke.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Cr=class extends Ut{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Ke.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Dt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Dt||{}),Fp=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Fp||{}),Bn=class extends Ut{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Ke.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ui=class extends Ut{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Ke.NavigationSkipped}},la=class extends Ut{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Ke.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ju=class extends Ut{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ke.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vp=class extends Ut{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ke.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Up=class extends Ut{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Ke.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},jp=class extends Ut{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ke.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bp=class extends Ut{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ke.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$p=class{constructor(e){this.route=e,this.type=Ke.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Hp=class{constructor(e){this.route=e,this.type=Ke.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},qp=class{constructor(e){this.snapshot=e,this.type=Ke.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zp=class{constructor(e){this.snapshot=e,this.type=Ke.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Gp=class{constructor(e){this.snapshot=e,this.type=Ke.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wp=class{constructor(e){this.snapshot=e,this.type=Ke.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var da=class{},Ns=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function Dk(t,e){return t.providers&&!t._injector&&(t._injector=ap(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Jt(t){return t.outlet||z}function Sk(t,e){let n=t.filter(r=>Jt(r)===e);return n.push(...t.filter(r=>Jt(r)!==e)),n}function ya(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Kp=class{get injector(){return ya(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new il(this.rootInjector),this.attachRef=null}},il=(()=>{let e=class e{constructor(r){this.rootInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Kp(this.rootInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(j(Pt))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Zu=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Qp(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Qp(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Yp(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Yp(e,this._root).map(n=>n.value)}};function Qp(t,e){if(t===e.value)return e;for(let n of e.children){let r=Qp(t,n);if(r)return r}return null}function Yp(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Yp(t,n);if(r.length)return r.unshift(e),r}return[]}var bt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function bs(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Xu=class extends Zu{constructor(e,n){super(e),this.snapshot=n,og(this,e)}toString(){return this.snapshot.toString()}};function WC(t){let e=Ak(t),n=new Ge([new ai("",{})]),r=new Ge({}),i=new Ge({}),s=new Ge({}),o=new Ge(""),c=new $n(n,r,s,o,i,z,t,e.root);return c.snapshot=e.root,new Xu(new bt(c,[]),e)}function Ak(t){let e={},n={},r={},i="",s=new Ss([],e,r,i,n,z,t,null,{});return new tl("",new bt(s,[]))}var $n=class{constructor(e,n,r,i,s,o,c,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(J(l=>l[ma]))??q(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(J(e=>Rs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(J(e=>Rs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function el(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:k(k({},e.params),t.params),data:k(k({},e.data),t.data),resolve:k(k(k(k({},t.data),e.data),i?.data),t._resolvedData)}:r={params:k({},t.params),data:k({},t.data),resolve:k(k({},t.data),t._resolvedData??{})},i&&QC(i)&&(r.resolve[ma]=i.title),r}var Ss=class{get title(){return this.data?.[ma]}constructor(e,n,r,i,s,o,c,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=c,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Rs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Rs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},tl=class extends Zu{constructor(e,n){super(n),this.url=e,og(this,n)}toString(){return KC(this._root)}};function og(t,e){e.value._routerState=t,e.children.forEach(n=>og(t,n))}function KC(t){let e=t.children.length>0?` { ${t.children.map(KC).join(", ")} } `:"";return`${t.value}${e}`}function Np(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,mn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),mn(e.params,n.params)||t.paramsSubject.next(n.params),tk(e.url,n.url)||t.urlSubject.next(n.url),mn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Jp(t,e){let n=mn(t.params,e.params)&&sk(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Jp(t.parent,e.parent))}function QC(t){return typeof t.title=="string"||t.title===null}var ag=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=z,this.activateEvents=new je,this.deactivateEvents=new je,this.attachEvents=new je,this.detachEvents=new je,this.parentContexts=M(il),this.location=M(gn),this.changeDetector=M(Is),this.inputBinder=M(cg,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new F(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new F(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new F(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new F(4013,!1);this._activatedRoute=r;let s=this.location,c=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,l=new Zp(r,u,s.injector);this.activated=s.createComponent(c,{index:s.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=ni({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[fs]});let t=e;return t})(),Zp=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===$n?this.route:e===il?this.childContexts:this.parent.get(e,n)}},cg=new V("");function Rk(t,e,n){let r=ha(t,e._root,n?n._root:void 0);return new Xu(r,e)}function ha(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=Nk(t,e,n);return new bt(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(c=>ha(t,c)),o}}let r=xk(e.value),i=e.children.map(s=>ha(t,s));return new bt(r,i)}}function Nk(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return ha(t,r,i);return ha(t,r)})}function xk(t){return new $n(new Ge(t.url),new Ge(t.params),new Ge(t.queryParams),new Ge(t.fragment),new Ge(t.data),t.outlet,t.component,t)}var fa=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},YC="ngNavigationCancelingError";function nl(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=aa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=JC(!1,Dt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function JC(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[YC]=!0,n.cancellationCode=e,n}function Mk(t){return ZC(t)&&aa(t.url)}function ZC(t){return!!t&&t[YC]}var Pk=(t,e,n,r)=>J(i=>(new Xp(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Xp=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Np(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=bs(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=bs(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:c})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=bs(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=bs(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Wp(s.value.snapshot))}),e.children.length&&this.forwardEvent(new zp(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(Np(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),Np(c.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},rl=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},As=class{constructor(e,n){this.component=e,this.route=n}};function kk(t,e,n){let r=t._root,i=e?e._root:null;return ta(r,i,n,[r.value])}function Ok(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Ms(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Ew(t)?t:e.get(t):r}function ta(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=bs(e);return t.children.forEach(o=>{Lk(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,c])=>sa(c,n.getContext(o),i)),i}function Lk(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,c=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=Fk(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new rl(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?ta(t,e,c?c.children:null,r,i):ta(t,e,n,r,i),u&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new As(c.outlet.component,o))}else o&&sa(e,c,i),i.canActivateChecks.push(new rl(r)),s.component?ta(t,null,c?c.children:null,r,i):ta(t,null,n,r,i);return i}function Fk(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!ci(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ci(t.url,e.url)||!mn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Jp(t,e)||!mn(t.queryParams,e.queryParams);case"paramsChange":default:return!Jp(t,e)}}function sa(t,e,n){let r=bs(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?sa(o,e.children.getContext(s),n):sa(o,null,n):sa(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new As(e.outlet.component,i)):n.canDeactivateChecks.push(new As(null,i)):n.canDeactivateChecks.push(new As(null,i))}function _a(t){return typeof t=="function"}function Vk(t){return typeof t=="boolean"}function Uk(t){return t&&_a(t.canLoad)}function jk(t){return t&&_a(t.canActivate)}function Bk(t){return t&&_a(t.canActivateChild)}function $k(t){return t&&_a(t.canDeactivate)}function Hk(t){return t&&_a(t.canMatch)}function XC(t){return t instanceof Mn||t?.name==="EmptyError"}var zu=Symbol("INITIAL_VALUE");function xs(){return Gt(t=>Uc(t.map(e=>e.pipe(Pn(1),fh(zu)))).pipe(J(e=>{for(let n of e)if(n!==!0){if(n===zu)return zu;if(n===!1||qk(n))return n}return!0}),zt(e=>e!==zu),Pn(1)))}function qk(t){return aa(t)||t instanceof fa}function zk(t,e){return Le(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?q(Ee(k({},n),{guardsResult:!0})):Gk(o,r,i,t).pipe(Le(c=>c&&Vk(c)?Wk(r,s,t,e):q(c)),J(c=>Ee(k({},n),{guardsResult:c})))})}function Gk(t,e,n,r){return Oe(t).pipe(Le(i=>Zk(i.component,i.route,n,e,r)),on(i=>i!==!0,!0))}function Wk(t,e,n,r){return Oe(e).pipe(Wi(i=>Gi(Qk(i.route.parent,r),Kk(i.route,r),Jk(t,i.path,n),Yk(t,i.route,n))),on(i=>i!==!0,!0))}function Kk(t,e){return t!==null&&e&&e(new Gp(t)),q(!0)}function Qk(t,e){return t!==null&&e&&e(new qp(t)),q(!0)}function Yk(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return q(!0);let i=r.map(s=>jc(()=>{let o=ya(e)??n,c=Ms(s,o),u=jk(c)?c.canActivate(e,t):Ln(o,()=>c(e,t));return Tr(u).pipe(on())}));return q(i).pipe(xs())}function Jk(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>Ok(o)).filter(o=>o!==null).map(o=>jc(()=>{let c=o.guards.map(u=>{let l=ya(o.node)??n,f=Ms(u,l),p=Bk(f)?f.canActivateChild(r,t):Ln(l,()=>f(r,t));return Tr(p).pipe(on())});return q(c).pipe(xs())}));return q(s).pipe(xs())}function Zk(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return q(!0);let o=s.map(c=>{let u=ya(e)??i,l=Ms(c,u),f=$k(l)?l.canDeactivate(t,e,n,r):Ln(u,()=>l(t,e,n,r));return Tr(f).pipe(on())});return q(o).pipe(xs())}function Xk(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return q(!0);let s=i.map(o=>{let c=Ms(o,t),u=Uk(c)?c.canLoad(e,n):Ln(t,()=>c(e,n));return Tr(u)});return q(s).pipe(xs(),eT(r))}function eT(t){return th(Fe(e=>{if(typeof e!="boolean")throw nl(t,e)}),J(e=>e===!0))}function eO(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return q(!0);let s=i.map(o=>{let c=Ms(o,t),u=Hk(c)?c.canMatch(e,n):Ln(t,()=>c(e,n));return Tr(u)});return q(s).pipe(xs(),eT(r))}var pa=class{constructor(e){this.segmentGroup=e||null}},ga=class extends Error{constructor(e){super(),this.urlTree=e}};function Ts(t){return zi(new pa(t))}function tO(t){return zi(new F(4e3,!1))}function nO(t){return zi(JC(!1,Dt.GuardRejected))}var eg=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return q(r);if(i.numberOfChildren>1||!i.children[z])return tO(`${e.redirectTo}`);i=i.children[z]}}applyRedirectCommands(e,n,r,i,s){if(typeof n!="string"){let c=n,{queryParams:u,fragment:l,routeConfig:f,url:p,outlet:y,params:I,data:A,title:R}=i,P=Ln(s,()=>c({params:I,data:A,queryParams:u,fragment:l,routeConfig:f,url:p,outlet:y,title:R}));if(P instanceof Er)throw new ga(P);n=P}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new ga(o);return o}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Er(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let c=s.substring(1);r[i]=n[c]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([c,u])=>{o[c]=this.createSegmentGroup(e,u,r,i)}),new he(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new F(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},tg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function rO(t,e,n,r,i){let s=ug(t,e,n);return s.matched?(r=Dk(e,r),eO(r,e,n,i).pipe(J(o=>o===!0?s:k({},tg)))):q(s)}function ug(t,e,n){if(e.path==="**")return iO(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?k({},tg):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||ek)(n,t,e);if(!i)return k({},tg);let s={};Object.entries(i.posParams??{}).forEach(([c,u])=>{s[c]=u.path});let o=i.consumed.length>0?k(k({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function iO(t){return{matched:!0,parameters:t.length>0?kC(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function NC(t,e,n,r){return n.length>0&&aO(t,n,r)?{segmentGroup:new he(e,oO(r,new he(n,t.children))),slicedSegments:[]}:n.length===0&&cO(t,n,r)?{segmentGroup:new he(t.segments,sO(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new he(t.segments,t.children),slicedSegments:n}}function sO(t,e,n,r){let i={};for(let s of n)if(sl(t,e,s)&&!r[Jt(s)]){let o=new he([],{});i[Jt(s)]=o}return k(k({},r),i)}function oO(t,e){let n={};n[z]=e;for(let r of t)if(r.path===""&&Jt(r)!==z){let i=new he([],{});n[Jt(r)]=i}return n}function aO(t,e,n){return n.some(r=>sl(t,e,r)&&Jt(r)!==z)}function cO(t,e,n){return n.some(r=>sl(t,e,r))}function sl(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function uO(t,e,n,r){return Jt(t)!==r&&(r===z||!sl(e,n,t))?!1:ug(e,t,n).matched}function lO(t,e,n){return e.length===0&&!t.children[n]}var ng=class{};function dO(t,e,n,r,i,s,o="emptyOnly"){return new rg(t,e,n,r,i,o,s).recognize()}var hO=31,rg=class{constructor(e,n,r,i,s,o,c){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=c,this.applyRedirects=new eg(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new F(4002,`'${e.segmentGroup}'`)}recognize(){let e=NC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(J(({children:n,rootSnapshot:r})=>{let i=new bt(r,n),s=new tl("",i),o=vk(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let n=new Ss([],Object.freeze({}),Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),z,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,z,n).pipe(J(r=>({children:r,rootSnapshot:n})),or(r=>{if(r instanceof ga)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof pa?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,s):this.processSegment(e,n,r,r.segments,i,!0,s).pipe(J(o=>o instanceof bt?[o]:[]))}processChildren(e,n,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Oe(s).pipe(Wi(o=>{let c=r.children[o],u=Sk(n,o);return this.processSegmentGroup(e,u,c,o,i)}),hh((o,c)=>(o.push(...c),o)),ar(null),dh(),Le(o=>{if(o===null)return Ts(r);let c=tT(o);return fO(c),q(c)}))}processSegment(e,n,r,i,s,o,c){return Oe(n).pipe(Wi(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,s,o,c).pipe(or(l=>{if(l instanceof pa)return q(null);throw l}))),on(u=>!!u),or(u=>{if(XC(u))return lO(r,i,s)?q(new ng):Ts(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,s,o,c,u){return uO(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,u):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o,u):Ts(i):Ts(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o,c){let{matched:u,parameters:l,consumedSegments:f,positionalParamSegments:p,remainingSegments:y}=ug(n,i,s);if(!u)return Ts(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>hO&&(this.allowRedirects=!1));let I=new Ss(s,l,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,xC(i),Jt(i),i.component??i._loadedComponent??null,i,MC(i)),A=el(I,c,this.paramsInheritanceStrategy);I.params=Object.freeze(A.params),I.data=Object.freeze(A.data);let R=this.applyRedirects.applyRedirectCommands(f,i.redirectTo,p,I,e);return this.applyRedirects.lineralizeSegments(i,R).pipe(Le(P=>this.processSegment(e,r,n,P.concat(y),o,!1,c)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let c=rO(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),c.pipe(Gt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Gt(({routes:l})=>{let f=r._loadedInjector??e,{parameters:p,consumedSegments:y,remainingSegments:I}=u,A=new Ss(y,p,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,xC(r),Jt(r),r.component??r._loadedComponent??null,r,MC(r)),R=el(A,o,this.paramsInheritanceStrategy);A.params=Object.freeze(R.params),A.data=Object.freeze(R.data);let{segmentGroup:P,slicedSegments:Y}=NC(n,y,I,l);if(Y.length===0&&P.hasChildren())return this.processChildren(f,l,P,A).pipe(J(G=>new bt(A,G)));if(l.length===0&&Y.length===0)return q(new bt(A,[]));let le=Jt(r)===s;return this.processSegment(f,l,P,Y,le?z:s,!0,A).pipe(J(G=>new bt(A,G instanceof bt?[G]:[])))}))):Ts(n)))}getChildConfig(e,n,r){return n.children?q({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?q({routes:n._loadedRoutes,injector:n._loadedInjector}):Xk(e,n,r,this.urlSerializer).pipe(Le(i=>i?this.configLoader.loadChildren(e,n).pipe(Fe(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):nO(n))):q({routes:[],injector:e})}};function fO(t){t.sort((e,n)=>e.value.outlet===z?-1:n.value.outlet===z?1:e.value.outlet.localeCompare(n.value.outlet))}function pO(t){let e=t.value.routeConfig;return e&&e.path===""}function tT(t){let e=[],n=new Set;for(let r of t){if(!pO(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=tT(r.children);e.push(new bt(r.value,i))}return e.filter(r=>!n.has(r))}function xC(t){return t.data||{}}function MC(t){return t.resolve||{}}function gO(t,e,n,r,i,s){return Le(o=>dO(t,e,n,r,o.extractedUrl,i,s).pipe(J(({state:c,tree:u})=>Ee(k({},o),{targetSnapshot:c,urlAfterRedirects:u}))))}function mO(t,e){return Le(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return q(n);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let l of nT(u))o.add(l);let c=0;return Oe(o).pipe(Wi(u=>s.has(u)?yO(u,r,t,e):(u.data=el(u,u.parent,t).resolve,q(void 0))),Fe(()=>c++),Ki(1),Le(u=>c===o.size?q(n):Et))})}function nT(t){let e=t.children.map(n=>nT(n)).flat();return[t,...e]}function yO(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!QC(i)&&(s[ma]=i.title),_O(s,t,e,r).pipe(J(o=>(t._resolvedData=o,t.data=el(t,t.parent,n).resolve,null)))}function _O(t,e,n,r){let i=Pp(t);if(i.length===0)return q({});let s={};return Oe(i).pipe(Le(o=>vO(t[o],e,n,r).pipe(on(),Fe(c=>{if(c instanceof fa)throw nl(new oa,c);s[o]=c}))),Ki(1),lh(s),or(o=>XC(o)?Et:zi(o)))}function vO(t,e,n,r){let i=ya(e)??r,s=Ms(t,i),o=s.resolve?s.resolve(e,n):Ln(i,()=>s(e,n));return Tr(o)}function xp(t){return Gt(e=>{let n=t(e);return n?Oe(n).pipe(J(()=>e)):q(e)})}var rT=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===z);return i}getResolvedTitleForRoute(r){return r.data[ma]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>M(wO),providedIn:"root"});let t=e;return t})(),wO=(()=>{let e=class e extends rT{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(j(bC))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),lg=new V("",{providedIn:"root",factory:()=>({})}),IO=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Pe({type:e,selectors:[["ng-component"]],standalone:!0,features:[ke],decls:1,vars:0,template:function(i,s){i&1&&Ft(0,"router-outlet")},dependencies:[ag],encapsulation:2});let t=e;return t})();function dg(t){let e=t.children&&t.children.map(dg),n=e?Ee(k({},t),{children:e}):k({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==z&&(n.component=IO),n}var hg=new V(""),EO=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=M(fp)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return q(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Tr(r.loadComponent()).pipe(J(iT),Fe(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),So(()=>{this.componentLoaders.delete(r)})),s=new Bi(i,()=>new Ne).pipe(ji());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return q({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=CO(i,this.compiler,r,this.onLoadEndListener).pipe(So(()=>{this.childrenLoaders.delete(i)})),c=new Bi(o,()=>new Ne).pipe(ji());return this.childrenLoaders.set(i,c),c}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function CO(t,e,n,r){return Tr(t.loadChildren()).pipe(J(iT),Le(i=>i instanceof Uo||Array.isArray(i)?q(i):Oe(e.compileModuleAsync(i))),J(i=>{r&&r(t);let s,o,c=!1;return Array.isArray(i)?(o=i,c=!0):(s=i.create(n).injector,o=s.get(hg,[],{optional:!0,self:!0}).flat()),{routes:o.map(dg),injector:s}}))}function TO(t){return t&&typeof t=="object"&&"default"in t}function iT(t){return TO(t)?t.default:t}var fg=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>M(bO),providedIn:"root"});let t=e;return t})(),bO=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),DO=new V("");var SO=new V(""),AO=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ne,this.transitionAbortSubject=new Ne,this.configLoader=M(EO),this.environmentInjector=M(Pt),this.urlSerializer=M(sg),this.rootContexts=M(il),this.location=M(Qo),this.inputBindingEnabled=M(cg,{optional:!0})!==null,this.titleStrategy=M(rT),this.options=M(lg,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=M(fg),this.createViewTransition=M(DO,{optional:!0}),this.navigationErrorHandler=M(SO,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>q(void 0),this.rootComponentType=null;let r=s=>this.events.next(new $p(s)),i=s=>this.events.next(new Hp(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(Ee(k(k({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new Ge({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:ia,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(zt(o=>o.id!==0),J(o=>Ee(k({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Gt(o=>{let c=!1,u=!1;return q(o).pipe(Gt(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Dt.SupersededByNewNavigation),Et;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Ee(k({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let f=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!f&&p!=="reload"){let y="";return this.events.next(new ui(l.id,this.urlSerializer.serialize(l.rawUrl),y,Fp.IgnoredSameUrlNavigation)),l.resolve(!1),Et}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return q(l).pipe(Gt(y=>{let I=this.transitions?.getValue();return this.events.next(new ua(y.id,this.urlSerializer.serialize(y.extractedUrl),y.source,y.restoredState)),I!==this.transitions?.getValue()?Et:Promise.resolve(y)}),gO(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Fe(y=>{o.targetSnapshot=y.targetSnapshot,o.urlAfterRedirects=y.urlAfterRedirects,this.currentNavigation=Ee(k({},this.currentNavigation),{finalUrl:y.urlAfterRedirects});let I=new Ju(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(I)}));if(f&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:y,extractedUrl:I,source:A,restoredState:R,extras:P}=l,Y=new ua(y,this.urlSerializer.serialize(I),A,R);this.events.next(Y);let le=WC(this.rootComponentType).snapshot;return this.currentTransition=o=Ee(k({},l),{targetSnapshot:le,urlAfterRedirects:I,extras:Ee(k({},P),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=I,q(o)}else{let y="";return this.events.next(new ui(l.id,this.urlSerializer.serialize(l.extractedUrl),y,Fp.IgnoredByUrlHandlingStrategy)),l.resolve(!1),Et}}),Fe(l=>{let f=new Vp(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}),J(l=>(this.currentTransition=o=Ee(k({},l),{guards:kk(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),zk(this.environmentInjector,l=>this.events.next(l)),Fe(l=>{if(o.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw nl(this.urlSerializer,l.guardsResult);let f=new Up(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(f)}),zt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Dt.GuardRejected),!1)),xp(l=>{if(l.guards.canActivateChecks.length)return q(l).pipe(Fe(f=>{let p=new jp(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(p)}),Gt(f=>{let p=!1;return q(f).pipe(mO(this.paramsInheritanceStrategy,this.environmentInjector),Fe({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(f,"",Dt.NoDataFromResolver)}}))}),Fe(f=>{let p=new Bp(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(p)}))}),xp(l=>{let f=p=>{let y=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&y.push(this.configLoader.loadComponent(p.routeConfig).pipe(Fe(I=>{p.component=I}),J(()=>{})));for(let I of p.children)y.push(...f(I));return y};return Uc(f(l.targetSnapshot.root)).pipe(ar(null),Pn(1))}),xp(()=>this.afterPreactivation()),Gt(()=>{let{currentSnapshot:l,targetSnapshot:f}=o,p=this.createViewTransition?.(this.environmentInjector,l.root,f.root);return p?Oe(p).pipe(J(()=>o)):q(o)}),J(l=>{let f=Rk(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=Ee(k({},l),{targetRouterState:f}),this.currentNavigation.targetRouterState=f,o}),Fe(()=>{this.events.next(new da)}),Pk(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Pn(1),Fe({next:l=>{c=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Cr(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{c=!0}}),ph(this.transitionAbortSubject.pipe(Fe(l=>{throw l}))),So(()=>{!c&&!u&&this.cancelNavigationTransition(o,"",Dt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),or(l=>{if(u=!0,ZC(l))this.events.next(new Bn(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),Mk(l)?this.events.next(new Ns(l.url,l.navigationBehaviorOptions)):o.resolve(!1);else{let f=new la(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0);try{let p=Ln(this.environmentInjector,()=>this.navigationErrorHandler?.(f));if(p instanceof fa){let{message:y,cancellationCode:I}=nl(this.urlSerializer,p);this.events.next(new Bn(o.id,this.urlSerializer.serialize(o.extractedUrl),y,I)),this.events.next(new Ns(p.redirectTo,p.navigationBehaviorOptions))}else{this.events.next(f);let y=r.errorHandler(l);o.resolve(!!y)}}catch(p){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(p)}}return Et}))}))}cancelNavigationTransition(r,i,s){let o=new Bn(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function RO(t){return t!==ia}var NO=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>M(xO),providedIn:"root"});let t=e;return t})(),ig=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},xO=(()=>{let e=class e extends ig{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Un(e)))(s||e)}})(),e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),sT=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>M(MO),providedIn:"root"});let t=e;return t})(),MO=(()=>{let e=class e extends sT{constructor(){super(...arguments),this.location=M(Qo),this.urlSerializer=M(sg),this.options=M(lg,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=M(fg),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Er,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=WC(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof ua)this.stateMemento=this.createStateMemento();else if(r instanceof ui)this.rawUrlTree=i.initialUrl;else if(r instanceof Ju){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof da?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Bn&&(r.code===Dt.GuardRejected||r.code===Dt.NoDataFromResolver)?this.restoreHistory(i):r instanceof la?this.restoreHistory(i,!0):r instanceof Cr&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,c=k(k({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",c)}else{let o=k(k({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Un(e)))(s||e)}})(),e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),na=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(na||{});function PO(t,e){t.events.pipe(zt(n=>n instanceof Cr||n instanceof Bn||n instanceof la||n instanceof ui),J(n=>n instanceof Cr||n instanceof ui?na.COMPLETE:(n instanceof Bn?n.code===Dt.Redirect||n.code===Dt.SupersededByNewNavigation:!1)?na.REDIRECTING:na.FAILED),zt(n=>n!==na.REDIRECTING),Pn(1)).subscribe(()=>{e()})}function kO(t){throw t}var OO={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},LO={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Zt=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=M(Uu),this.stateManager=M(sT),this.options=M(lg,{optional:!0})||{},this.pendingTasks=M(gs),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=M(AO),this.urlSerializer=M(sg),this.location=M(Qo),this.urlHandlingStrategy=M(fg),this._events=new Ne,this.errorHandler=this.options.errorHandler||kO,this.navigated=!1,this.routeReuseStrategy=M(NO),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=M(hg,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!M(cg,{optional:!0}),this.eventsSubscription=new Re,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Bn&&i.code!==Dt.Redirect&&i.code!==Dt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Cr)this.navigated=!0;else if(i instanceof Ns){let c=i.navigationBehaviorOptions,u=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),l=k({info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||RO(s.source)},c);this.scheduleNavigation(u,ia,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}VO(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ia,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},c=s?.navigationId?s:null;if(s){let l=k({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let u=this.parseUrl(r);this.scheduleNavigation(u,i,c,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(dg),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:c,queryParamsHandling:u,preserveFragment:l}=i,f=l?this.currentUrlTree.fragment:c,p=null;switch(u){case"merge":p=k(k({},this.currentUrlTree.queryParams),o);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=o||null}p!==null&&(p=this.removeEmptyProps(p));let y;try{let I=s?s.snapshot:this.routerState.snapshot.root;y=HC(I)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),y=this.currentUrlTree.root}return qC(y,r,p,f??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=aa(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,ia,null,i)}navigate(r,i={skipLocationChange:!1}){return FO(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=k({},OO):i===!1?s=k({},LO):s=i,aa(r))return DC(this.currentUrlTree,r,s);let o=this.parseUrl(r);return DC(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,c){if(this.disposed)return Promise.resolve(!1);let u,l,f;c?(u=c.resolve,l=c.reject,f=c.promise):f=new Promise((y,I)=>{u=y,l=I});let p=this.pendingTasks.add();return PO(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:u,reject:l,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(y=>Promise.reject(y))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function FO(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new F(4008,!1)}function VO(t){return!(t instanceof da)&&!(t instanceof Ns)}var oT=(()=>{let e=class e{constructor(r,i,s,o,c,u){this.router=r,this.route=i,this.tabIndexAttribute=s,this.renderer=o,this.el=c,this.locationStrategy=u,this.href=null,this.commands=null,this.onChanges=new Ne,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=c.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=r.events.subscribe(f=>{f instanceof Cr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,s,o,c){let u=this.urlTree;if(u===null||this.isAnchorElement&&(r!==0||i||s||o||c||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(u,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:jI(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let s=this.renderer,o=this.el.nativeElement;i!==null?s.setAttribute(o,r,i):s.removeAttribute(o,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(me(Zt),me($n),Vf("tabindex"),me(Ho),me(jn),me(Cs))},e.\u0275dir=ni({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&Ce("click",function(c){return s.onClick(c.button,c.ctrlKey,c.shiftKey,c.altKey,c.metaKey)}),i&2&&cp("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Ko],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Ko],replaceUrl:[2,"replaceUrl","replaceUrl",Ko],routerLink:"routerLink"},standalone:!0,features:[op,fs]});let t=e;return t})();var UO=new V("");function aT(t,...e){return Ot([{provide:hg,multi:!0,useValue:t},[],{provide:$n,useFactory:jO,deps:[Zt]},{provide:hp,multi:!0,useFactory:BO},e.map(n=>n.\u0275providers)])}function jO(t){return t.routerState.root}function BO(){let t=M(ct);return e=>{let n=t.get(wr);if(e!==n.components[0])return;let r=t.get(Zt),i=t.get($O);t.get(HO)===1&&r.initialNavigation(),t.get(qO,null,Q.Optional)?.setUpPreloading(),t.get(UO,null,Q.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var $O=new V("",{factory:()=>new Ne}),HO=new V("",{providedIn:"root",factory:()=>1});var qO=new V("");var br=class{close(e){this.modalInstance.close(e)}dismiss(e){this.modalInstance.dismiss(e)}};var zO=["*"],GO=(t,e,n,r)=>({paddingLeft:t,paddingRight:e,paddingTop:n,paddingBottom:r}),Ps=(()=>{let e=class e{constructor(){this.paddingX=20,this.paddingY=20}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Pe({type:e,selectors:[["ui-panel"]],inputs:{paddingX:"paddingX",paddingY:"paddingY"},standalone:!0,features:[ke],ngContentSelectors:zO,decls:2,vars:6,consts:[[1,"panel",3,"ngStyle"]],template:function(i,s){i&1&&(_s(),L(0,"div",0),vs(1),$()),i&2&&we("ngStyle",HE(1,GO,s.paddingX+"px",s.paddingX+"px",s.paddingY+"px",s.paddingY+"px"))},dependencies:[hC],styles:[".panel[_ngcontent-%COMP%]{background-color:var(--theme-bg);border-bottom:1px solid var(--theme-bg-hover);border-radius:12px;box-shadow:0 4px 8px #33334e1a;padding:10px 30px}"]});let t=e;return t})();var WO=["*"],yn=(()=>{let e=class e{constructor(){this.type="box",this.priority="primary",this.disable=!1}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Pe({type:e,selectors:[["ui-button"]],inputs:{type:"type",priority:"priority",disable:"disable"},standalone:!0,features:[ke],ngContentSelectors:WO,decls:2,vars:7,consts:[[3,"disabled"]],template:function(i,s){i&1&&(_s(),L(0,"button",0),vs(1),$()),i&2&&(UE("button button--",s.type," button--",s.priority,""),qo("button-disabled",s.disable),we("disabled",s.disable))},styles:[".button[_ngcontent-%COMP%]{color:var(--theme-text);border:none;font-size:16px;border-radius:8px;padding:5px 2px;text-align:center;vertical-align:middle;height:36px;cursor:pointer}.button--box[_ngcontent-%COMP%]{width:36px}.button--wide[_ngcontent-%COMP%]{padding:5px 14px;width:auto;min-width:100px}.button--primary[_ngcontent-%COMP%]{background-color:var(--theme-bg)}.button--primary[_ngcontent-%COMP%]:hover, .button--primary[_ngcontent-%COMP%]:active{background-color:var(--theme-bg-hover)}.button--primary[disabled][_ngcontent-%COMP%], .button--primary.button-disabled[_ngcontent-%COMP%]{background-color:var(--theme-bg);cursor:default;pointer-events:none}.button--secondary[_ngcontent-%COMP%]{background-color:var(--theme-bg-hover)}.button--secondary[_ngcontent-%COMP%]:hover, .button--secondary[_ngcontent-%COMP%]:active{background-color:var(--theme-bg)}.button--secondary[disabled][_ngcontent-%COMP%], .button--secondary.button-disabled[_ngcontent-%COMP%]{background-color:var(--theme-bg-hover);cursor:default;pointer-events:none}.button[_ngcontent-%COMP%]:focus{box-shadow:1px 4px 8px #33334e1a}"]});let t=e;return t})();var KO=["*"];function QO(t,e){if(t&1){let n=vr();L(0,"ui-button",2),Ce("click",function(){mr(n);let i=mt();return yr(i.cancelClick())}),L(1,"span",3),Z(2,"close"),$()()}}function YO(t,e){if(t&1&&(L(0,"h3",4),Z(1),$()),t&2){let n=mt();ve(),Vu(" ",n.header," ")}}var cT=(()=>{let e=class e extends br{constructor(){super(...arguments),this.showCancel=!1,this.cancel=new je}cancelClick(){this.cancel.emit("canceling")}onInjectInputs(r){this.header=r.header}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Un(e)))(s||e)}})(),e.\u0275cmp=Pe({type:e,selectors:[["ui-modal"]],inputs:{header:"header",showCancel:"showCancel"},outputs:{cancel:"cancel"},standalone:!0,features:[si,ke],ngContentSelectors:KO,decls:4,vars:2,consts:[["priority","primary","class","close",3,"click",4,"ngIf"],["class","modal-header",4,"ngIf"],["priority","primary",1,"close",3,"click"],[1,"material-icons"],[1,"modal-header"]],template:function(i,s){i&1&&(_s(),L(0,"ui-panel"),ut(1,QO,3,0,"ui-button",0)(2,YO,2,1,"h3",1),vs(3),$()),i&2&&(ve(),we("ngIf",s.showCancel),ve(),we("ngIf",s.header))},dependencies:[Ps,Ir,yn],styles:[".close[_ngcontent-%COMP%]{float:right;position:relative}.modal-header[_ngcontent-%COMP%]{margin-top:0;line-height:32px}"]});let t=e;return t})();var al=(()=>{let e=class e extends br{constructor(){super(...arguments),this.title="",this.message="",this.confirm="Ok"}onInjectInputs(r){this.title=r.title,this.message=r.message,r.confirm&&(this.confirm=r.confirm)}save(){this.close("saving")}cancel(){this.dismiss("canceling")}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Un(e)))(s||e)}})(),e.\u0275cmp=Pe({type:e,selectors:[["ui-confirm-modal"]],standalone:!0,features:[si,ke],decls:9,vars:4,consts:[[3,"cancel","header","showCancel"],[1,"modal-body"],[1,"modal-footer"],["priority","primary","type","wide",3,"click"],["priority","secondary","type","wide",3,"click"]],template:function(i,s){i&1&&(L(0,"ui-modal",0),Ce("cancel",function(){return s.cancel()}),L(1,"div",1)(2,"p"),Z(3),$()(),L(4,"div",2)(5,"ui-button",3),Ce("click",function(){return s.cancel()}),Z(6,"Cancel"),$(),L(7,"ui-button",4),Ce("click",function(){return s.save()}),Z(8),$()()()),i&2&&(we("header",s.title)("showCancel",!0),ve(3),Vt(s.message),ve(5),Vt(s.confirm))},dependencies:[cT,yn],styles:[".modal-footer[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-end;gap:10px;justify-content:end}"]});let t=e;return t})();var JO=["modalContainer"];function ZO(t,e){t&1&&Ft(0,"div",4)}function XO(t,e){}var uT=(()=>{let e=class e{constructor(){this.type="modal"}onInjectOptions(r){r.type&&(this.type=r.type)}createModal(r){return this.modalContainer?.clear(),this.modalContainer.createComponent(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Pe({type:e,selectors:[["ui-modal-container"]],viewQuery:function(i,s){if(i&1&&$E(JO,5,gn),i&2){let o;up(o=lp())&&(s.modalContainer=o.first)}},standalone:!0,features:[ke],decls:5,vars:3,consts:[["modalContainer",""],["class","modal-backdrop",4,"ngIf"],[1,"modal-container"],[1,"modal-content"],[1,"modal-backdrop"]],template:function(i,s){i&1&&(ut(0,ZO,1,0,"div",1),L(1,"div",2)(2,"div",3),ut(3,XO,0,0,"ng-template",null,0,Wo),$()()),i&2&&(we("ngIf",s.type!=="toast"),ve(),qo("modal-container--toast",s.type==="toast"))},dependencies:[Ir],styles:[".modal-backdrop[_ngcontent-%COMP%]{position:fixed;z-index:10;background-color:var(--theme-bg-hover);opacity:.1;height:100vh;width:100%;top:0;left:0}.modal-container[_ngcontent-%COMP%]{position:fixed;z-index:11;display:flex;flex-direction:column;inset:0;align-items:center;justify-content:center}.modal-container--toast[_ngcontent-%COMP%]{z-index:5;width:500px;inset:auto auto 0;align-items:end;justify-content:end}.modal-container--toast[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{margin-left:20px;margin-bottom:20px;margin-top:auto}.modal-content[_ngcontent-%COMP%]{margin:0 auto;max-width:500px;width:calc(100% - 20px);display:block}"]});let t=e;return t})();var cl=class{constructor(e,n){this.modalContainer=e,this.modal=n,this.result$=new Ne,this.modal.instance.modalInstance=this}close(e){this.result$.next(e),this.destroy$()}dismiss(e){this.result$.error(e),this.destroy$()}onResult(){return this.result$.asObservable()}destroy$(){this.modal.destroy(),this.modalContainer.destroy(),this.result$.complete()}};function e1(t,e){if(t&1){let n=vr();L(0,"ui-button",7),Ce("click",function(){mr(n);let i=mt();return yr(i.toggleDetails())}),L(1,"span",2),Z(2),$()()}if(t&2){let n=mt();ve(2),Vt(n.showDetails?"zoom_out":"zoom_in")}}function t1(t,e){if(t&1&&(L(0,"pre",8),Z(1),zo(2,"json"),$()),t&2){let n=mt();ve(),Vt(Go(2,1,n.details))}}var lT=(()=>{let e=class e extends br{constructor(){super(...arguments),this.typeIcon={error:"error",info:"info_outline",success:"check_circle"},this.message="",this.ttl=5e3,this.showDetails=!1}ngOnInit(){this.setCloseTimer()}stopCloseTimer(){this.closeTimer&&clearTimeout(this.closeTimer)}setCloseTimer(){this.closeTimer=setTimeout(()=>{this.dismiss("ttl close")},this.ttl)}onInjectInputs(r){this.type=r.type||"info",this.message=r.message,this.details=r.details,r?.ttl&&(this.ttl=r.ttl)}toggleDetails(){this.showDetails=!this.showDetails,this.closeTimer&&this.showDetails&&this.stopCloseTimer()}cancel(){this.dismiss("canceling")}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Un(e)))(s||e)}})(),e.\u0275cmp=Pe({type:e,selectors:[["ui-toast-modal"]],standalone:!0,features:[si,ke],decls:12,vars:14,consts:[[3,"mouseenter","mouseleave"],["priority","primary",1,"toast__close",3,"click"],[1,"material-icons"],[1,"toast__message"],[3,"disable"],["class","toast__more",3,"click",4,"ngIf"],["class","toast__details",4,"ngIf"],[1,"toast__more",3,"click"],[1,"toast__details"]],template:function(i,s){i&1&&(L(0,"div",0),Ce("mouseenter",function(){return s.stopCloseTimer()})("mouseleave",function(){return s.setCloseTimer()}),L(1,"ui-button",1),Ce("click",function(){return s.cancel()}),L(2,"span",2),Z(3,"close"),$()(),L(4,"div",3)(5,"ui-button",4)(6,"span",2),Z(7),$()(),L(8,"p"),Z(9),$(),ut(10,e1,3,1,"ui-button",5),$(),ut(11,t1,3,3,"pre",6),$()),i&2&&(Ou("toast toast--",s.type,""),ve(5),Ou("toast__icon toast__icon--",s.type,""),we("disable",!0),ve(2),Vt(s.typeIcon[s.type]),ve(),Ou("toast__message_text toast__message_text--",s.type,""),ve(),Vt(s.message),ve(),we("ngIf",s.details),ve(),we("ngIf",s.details&&s.showDetails))},dependencies:[yn,gC,Ir],styles:[".toast[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 4px 8px #33334e1a;padding:10px;background-color:var(--theme-bg);box-sizing:border-box;border:2px solid var(--theme-bg)}.toast--info[_ngcontent-%COMP%]{border-color:var(--theme-dark)}.toast--success[_ngcontent-%COMP%]{border-color:var(--theme-green)}.toast--error[_ngcontent-%COMP%]{border-color:var(--theme-red)}.toast__close[_ngcontent-%COMP%]{float:right;margin-left:10px}.toast__message[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:10px}.toast__more[_ngcontent-%COMP%]{margin-left:auto}.toast__icon--info[_ngcontent-%COMP%]     .material-icons{color:var(--theme-dark)}.toast__icon--success[_ngcontent-%COMP%]     .material-icons{color:var(--theme-green)}.toast__icon--error[_ngcontent-%COMP%]     .material-icons{color:var(--theme-red)}.toast__message_text[_ngcontent-%COMP%]{margin:0;padding-top:7px}.toast__message_text[_ngcontent-%COMP%]:first-letter{text-transform:capitalize}.toast__message_text--info[_ngcontent-%COMP%]{color:var(--theme-dark)}.toast__message_text--success[_ngcontent-%COMP%]{color:var(--theme-green)}.toast__message_text--error[_ngcontent-%COMP%]{color:var(--theme-red)}"]});let t=e;return t})();var ks=(()=>{let e=class e{constructor(r){this.appRef=r}open(r,i,s={}){this.setupModalContainerDiv();let o=this.appRef.bootstrap(uT,this.modalContainer),c=o.instance.createModal(r);return s&&o.instance.onInjectOptions(s),i&&c.instance.onInjectInputs(i),new cl(o,c)}confirm(r){return this.open(al,r).onResult()}showError(r,i){return this.showMessage("error",{message:i||r?.message||r?.errorMessage||"Something went wrong",details:r})}showSuccess(r,i){return this.showMessage("success",{message:r,details:i})}showInfo(r,i){return this.showMessage("info",{message:r,details:i})}showMessage(r,i){return this.open(lT,Ee(k({},i),{type:r}),{type:"toast"})}setupModalContainerDiv(){this.modalContainer=document.createElement("div"),document.getElementsByTagName("body")[0].appendChild(this.modalContainer)}};e.\u0275fac=function(i){return new(i||e)(j(wr))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var dT=(()=>{let e=class e{constructor(r){this.modalService=r}createModal(){this.modalService.open(al,{title:"Test modal",message:"My dynamic message to confirm some action"}).onResult().subscribe(r=>console.log("closed",r),r=>console.log("dismissed",r),()=>console.log("completed"))}confirm(){this.modalService.confirm({title:"Confirm something",message:"My dynamic message to confirm some action?"}).subscribe(r=>console.log("closed",r),r=>console.log("dismissed",r),()=>console.log("completed"))}showInfo(){this.modalService.showInfo("info message")}showSuccess(){this.modalService.showSuccess("success message")}showError(){this.modalService.showError({error:405,message:"some error message"})}};e.\u0275fac=function(i){return new(i||e)(me(ks))},e.\u0275cmp=Pe({type:e,selectors:[["app-dashboard-page"]],standalone:!0,features:[ke],decls:13,vars:0,consts:[[2,"display","flex","flex-direction","row","gap","10px"],["priority","primary","type","wide",3,"click"]],template:function(i,s){i&1&&(L(0,"p"),Z(1,"dashboard-page works!"),$(),L(2,"div",0)(3,"ui-button",1),Ce("click",function(){return s.createModal()}),Z(4,"Create modal"),$(),L(5,"ui-button",1),Ce("click",function(){return s.confirm()}),Z(6,"Confirm"),$(),L(7,"ui-button",1),Ce("click",function(){return s.showError()}),Z(8,"Error"),$(),L(9,"ui-button",1),Ce("click",function(){return s.showSuccess()}),Z(10,"Success"),$(),L(11,"ui-button",1),Ce("click",function(){return s.showInfo()}),Z(12,"Info"),$()())},dependencies:[yn],styles:["[_nghost-%COMP%]{padding:0}"]});let t=e;return t})();var mg={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var x=function(t,e){if(!t)throw di(e)},di=function(t){return new Error("Firebase Database ("+mg.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var fT=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},n1=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],c=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},ll={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,c=o?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,f=s>>2,p=(s&3)<<4|c>>4,y=(c&15)<<2|l>>6,I=l&63;u||(I=64,o||(y=64)),r.push(n[f],n[p],n[y],n[I])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(fT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):n1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||c==null||l==null||p==null)throw new yg;let y=s<<2|c>>4;if(r.push(y),l!==64){let I=c<<4&240|l>>2;if(r.push(I),p!==64){let A=l<<6&192|p;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},yg=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},vg=function(t){let e=fT(t);return ll.encodeByteArray(e,!0)},va=function(t){return vg(t).replace(/\./g,"")},wa=function(t){try{return ll.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function pT(t){return gT(void 0,t)}function gT(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!r1(n)||(t[n]=gT(t[n],e[n]));return t}function r1(t){return t!=="__proto__"}function i1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var s1=()=>i1().__FIREBASE_DEFAULTS__,o1=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},a1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&wa(t[1]);return e&&JSON.parse(e)},wg=()=>{try{return s1()||o1()||a1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ig=t=>{var e,n;return(n=(e=wg())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},dl=t=>{let e=Ig(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Eg=()=>{var t;return(t=wg())===null||t===void 0?void 0:t.config},Cg=t=>{var e;return(e=wg())===null||e===void 0?void 0:e[`_${t}`]};var li=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function hl(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[va(JSON.stringify(n)),va(JSON.stringify(o)),""].join(".")}function Be(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ia(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function mT(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function fl(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yT(){let t=Be();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function _n(){return mg.NODE_CLIENT===!0||mg.NODE_ADMIN===!0}function Tg(){try{return typeof indexedDB=="object"}catch{return!1}}function _T(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var c1="FirebaseError",St=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=c1,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hn.prototype.create)}},Hn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?u1(s,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new St(i,c,r)}};function u1(t,e){return t.replace(l1,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var l1=/\{\$([^}]+)}/g;function Os(t){return JSON.parse(t)}function $e(t){return JSON.stringify(t)}var vT=function(t){let e={},n={},r={},i="";try{let s=t.split(".");e=Os(wa(s[0])||""),n=Os(wa(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var wT=function(t){let e=vT(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},IT=function(t){let e=vT(t).claims;return typeof e=="object"&&e.admin===!0};function vn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function hi(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Ea(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ca(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function fi(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(hT(s)&&hT(o)){if(!fi(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function hT(t){return t!==null&&typeof t=="object"}function Dr(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}var ul=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let p=0;p<16;p++)r[p]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let p=0;p<16;p++)r[p]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let p=16;p<80;p++){let y=r[p-3]^r[p-8]^r[p-14]^r[p-16];r[p]=(y<<1|y>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],c=this.chain_[3],u=this.chain_[4],l,f;for(let p=0;p<80;p++){p<40?p<20?(l=c^s&(o^c),f=1518500249):(l=s^o^c,f=1859775393):p<60?(l=s&o|c&(s|o),f=2400959708):(l=s^o^c,f=3395469782);let y=(i<<5|i>>>27)+l+u+f+r[p]&4294967295;u=c,c=o,o=(s<<30|s>>>2)&4294967295,s=i,i=y}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function ET(t,e){let n=new _g(t,e);return n.subscribe.bind(n)}var _g=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");d1(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=gg),i.error===void 0&&(i.error=gg),i.complete===void 0&&(i.complete=gg);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function d1(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function gg(){}function CT(t,e){return`${t} failed: ${e} argument `}var TT=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,x(r<t.length,"Surrogate pair missing trail surrogate.");let o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Ta=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var f3=4*60*60*1e3;function Xt(t){return t&&t._delegate?t._delegate:t}var yt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var pi="[DEFAULT]";var pl=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new li;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(f1(e))try{this.getOrInitializeService({instanceIdentifier:pi})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=pi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return D(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=pi){return this.instances.has(e)}getOptions(e=pi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);r===c&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:h1(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=pi){return this.component?this.component.multipleInstances?e:pi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function h1(t){return t===pi?void 0:t}function f1(t){return t.instantiationMode==="EAGER"}var ba=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new pl(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var p1=[],ae=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(ae||{}),g1={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},m1=ae.INFO,y1={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},_1=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=y1[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},wn=class{constructor(e){this.name=e,this._logLevel=m1,this._logHandler=_1,this._userLogHandler=null,p1.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?g1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}};var v1=(t,e)=>e.some(n=>t instanceof n),bT,DT;function w1(){return bT||(bT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function I1(){return DT||(DT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var ST=new WeakMap,Dg=new WeakMap,AT=new WeakMap,bg=new WeakMap,Ag=new WeakMap;function E1(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(In(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&ST.set(n,t)}).catch(()=>{}),Ag.set(e,t),e}function C1(t){if(Dg.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Dg.set(t,e)}var Sg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Dg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||AT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return In(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function RT(t){Sg=t(Sg)}function T1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(gl(this),e,...n);return AT.set(r,e.sort?e.sort():[e]),In(r)}:I1().includes(t)?function(...e){return t.apply(gl(this),e),In(ST.get(this))}:function(...e){return In(t.apply(gl(this),e))}}function b1(t){return typeof t=="function"?T1(t):(t instanceof IDBTransaction&&C1(t),v1(t,w1())?new Proxy(t,Sg):t)}function In(t){if(t instanceof IDBRequest)return E1(t);if(bg.has(t))return bg.get(t);let e=b1(t);return e!==t&&(bg.set(t,e),Ag.set(e,t)),e}var gl=t=>Ag.get(t);function xT(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),c=In(o);return r&&o.addEventListener("upgradeneeded",u=>{r(In(o.result),u.oldVersion,u.newVersion,In(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),c}var D1=["get","getKey","getAll","getAllKeys","count"],S1=["put","add","delete","clear"],Rg=new Map;function NT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Rg.get(e))return Rg.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=S1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||D1.includes(n)))return;let s=function(o,...c){return D(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(c.shift())),(yield Promise.all([l[n](...c),i&&u.done]))[0]})};return Rg.set(e,s),s}RT(t=>Ee(k({},t),{get:(e,n,r)=>NT(e,n)||t.get(e,n,r),has:(e,n)=>!!NT(e,n)||t.has(e,n)}));var xg=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(A1(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function A1(t){let e=t.getComponent();return e?.type==="VERSION"}var Mg="@firebase/app",MT="0.10.6";var gi=new wn("@firebase/app"),R1="@firebase/app-compat",N1="@firebase/analytics-compat",x1="@firebase/analytics",M1="@firebase/app-check-compat",P1="@firebase/app-check",k1="@firebase/auth",O1="@firebase/auth-compat",L1="@firebase/database",F1="@firebase/database-compat",V1="@firebase/functions",U1="@firebase/functions-compat",j1="@firebase/installations",B1="@firebase/installations-compat",$1="@firebase/messaging",H1="@firebase/messaging-compat",q1="@firebase/performance",z1="@firebase/performance-compat",G1="@firebase/remote-config",W1="@firebase/remote-config-compat",K1="@firebase/storage",Q1="@firebase/storage-compat",Y1="@firebase/firestore",J1="@firebase/vertexai-preview",Z1="@firebase/firestore-compat",X1="firebase",eL="10.12.3";var Pg="[DEFAULT]",tL={[Mg]:"fire-core",[R1]:"fire-core-compat",[x1]:"fire-analytics",[N1]:"fire-analytics-compat",[P1]:"fire-app-check",[M1]:"fire-app-check-compat",[k1]:"fire-auth",[O1]:"fire-auth-compat",[L1]:"fire-rtdb",[F1]:"fire-rtdb-compat",[V1]:"fire-fn",[U1]:"fire-fn-compat",[j1]:"fire-iid",[B1]:"fire-iid-compat",[$1]:"fire-fcm",[H1]:"fire-fcm-compat",[q1]:"fire-perf",[z1]:"fire-perf-compat",[G1]:"fire-rc",[W1]:"fire-rc-compat",[K1]:"fire-gcs",[Q1]:"fire-gcs-compat",[Y1]:"fire-fst",[Z1]:"fire-fst-compat",[J1]:"fire-vertex","fire-js":"fire-js",[X1]:"fire-js-all"};var Da=new Map,nL=new Map,kg=new Map;function PT(t,e){try{t.container.addComponent(e)}catch(n){gi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function En(t){let e=t.name;if(kg.has(e))return gi.debug(`There were multiple attempts to register component ${e}.`),!1;kg.set(e,t);for(let n of Da.values())PT(n,t);for(let n of nL.values())PT(n,t);return!0}function mi(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Cn(t){return t.settings!==void 0}var rL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Sr=new Hn("app","Firebase",rL);var Og=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new yt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sr.create("app-deleted",{appName:this._name})}};var Tn=eL;function Vg(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Pg,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Sr.create("bad-app-name",{appName:String(i)});if(n||(n=Eg()),!n)throw Sr.create("no-options");let s=Da.get(i);if(s){if(fi(n,s.options)&&fi(r,s.config))return s;throw Sr.create("duplicate-app",{appName:i})}let o=new ba(i);for(let u of kg.values())o.addComponent(u);let c=new Og(n,r,o);return Da.set(i,c),c}function Ar(t=Pg){let e=Da.get(t);if(!e&&t===Pg&&Eg())return Vg();if(!e)throw Sr.create("no-app",{appName:t});return e}function ml(){return Array.from(Da.values())}function be(t,e,n){var r;let i=(r=tL[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gi.warn(c.join(" "));return}En(new yt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var iL="firebase-heartbeat-database",sL=1,Sa="firebase-heartbeat-store",Ng=null;function FT(){return Ng||(Ng=xT(iL,sL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Sa)}catch(n){console.warn(n)}}}}).catch(t=>{throw Sr.create("idb-open",{originalErrorMessage:t.message})})),Ng}function oL(t){return D(this,null,function*(){try{let n=(yield FT()).transaction(Sa),r=yield n.objectStore(Sa).get(VT(t));return yield n.done,r}catch(e){if(e instanceof St)gi.warn(e.message);else{let n=Sr.create("idb-get",{originalErrorMessage:e?.message});gi.warn(n.message)}}})}function kT(t,e){return D(this,null,function*(){try{let r=(yield FT()).transaction(Sa,"readwrite");yield r.objectStore(Sa).put(e,VT(t)),yield r.done}catch(n){if(n instanceof St)gi.warn(n.message);else{let r=Sr.create("idb-set",{originalErrorMessage:n?.message});gi.warn(r.message)}}})}function VT(t){return`${t.name}!${t.options.appId}`}var aL=1024,cL=30*24*60*60*1e3,Lg=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Fg(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return D(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=OT();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let c=new Date(o.date).valueOf();return Date.now()-c<=cL}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return D(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=OT(),{heartbeatsToSend:r,unsentEntries:i}=uL(this._heartbeatsCache.heartbeats),s=va(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function OT(){return new Date().toISOString().substring(0,10)}function uL(t,e=aL){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),LT(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),LT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Fg=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return D(this,null,function*(){return Tg()?_T().then(()=>!0).catch(()=>!1):!1})}read(){return D(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield oL(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return D(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return kT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return D(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return kT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function LT(t){return va(JSON.stringify({version:2,heartbeats:t})).length}function lL(t){En(new yt("platform-logger",e=>new xg(e),"PRIVATE")),En(new yt("heartbeat",e=>new Lg(e),"PRIVATE")),be(Mg,MT,t),be(Mg,MT,"esm2017"),be("fire-js","")}lL("");function XT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var eb=XT,tb=new Hn("auth","Firebase",XT());var El=new wn("@firebase/auth");function dL(t,...e){El.logLevel<=ae.WARN&&El.warn(`Auth (${Tn}): ${t}`,...e)}function _l(t,...e){El.logLevel<=ae.ERROR&&El.error(`Auth (${Tn}): ${t}`,...e)}function Dn(t,...e){throw nm(t,...e)}function en(t,...e){return nm(t,...e)}function tm(t,e,n){let r=Object.assign(Object.assign({},eb()),{[e]:n});return new Hn("auth","Firebase",r).create(e,{appName:t.name})}function yi(t){return tm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hL(t,e,n){let r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Dn(t,"argument-error"),tm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function nm(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return tb.create(t,...e)}function B(t,e,...n){if(!t)throw nm(e,...n)}function qn(t){let e="INTERNAL ASSERTION FAILED: "+t;throw _l(e),new Error(e)}function Gn(t,e){t||qn(e)}function Bg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function fL(){return UT()==="http:"||UT()==="https:"}function UT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function pL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(fL()||mT()||"connection"in navigator)?navigator.onLine:!0}function gL(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var _i=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Gn(n>e,"Short delay should be less than long delay!"),this.isMobile=Ia()||fl()}get(){return pL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function rm(t,e){Gn(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Cl=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var mL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var yL=new _i(3e4,6e4);function im(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Vs(s,o,c,u){return D(this,arguments,function*(t,e,n,r,i={}){return nb(t,i,()=>D(this,null,function*(){let l={},f={};r&&(e==="GET"?f=r:l={body:JSON.stringify(r)});let p=Dr(Object.assign({key:t.config.apiKey},f)).slice(1),y=yield t._getAdditionalHeaders();return y["Content-Type"]="application/json",t.languageCode&&(y["X-Firebase-Locale"]=t.languageCode),Cl.fetch()(rb(t,t.config.apiHost,n,p),Object.assign({method:e,headers:y,referrerPolicy:"no-referrer"},l))}))})}function nb(t,e,n){return D(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},mL),e);try{let i=new $g(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw yl(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[u,l]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw yl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw yl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw yl(t,"user-disabled",o);let f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw tm(t,f,l);Dn(t,f)}}catch(i){if(i instanceof St)throw i;Dn(t,"network-request-failed",{message:String(i)})}})}function _L(s,o,c,u){return D(this,arguments,function*(t,e,n,r,i={}){let l=yield Vs(t,e,n,r,i);return"mfaPendingCredential"in l&&Dn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function rb(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?rm(t.config,i):`${t.config.apiScheme}://${i}`}var $g=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(en(this.auth,"network-request-failed")),yL.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function yl(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=en(t,e,r);return i.customData._tokenResponse=n,i}function vL(t,e){return D(this,null,function*(){return Vs(t,"POST","/v1/accounts:delete",e)})}function ib(t,e){return D(this,null,function*(){return Vs(t,"POST","/v1/accounts:lookup",e)})}function Aa(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function sm(t,e=!1){return D(this,null,function*(){let n=Xt(t),r=yield n.getIdToken(e),i=om(r);B(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Aa(Ug(i.auth_time)),issuedAtTime:Aa(Ug(i.iat)),expirationTime:Aa(Ug(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Ug(t){return Number(t)*1e3}function om(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return _l("JWT malformed, contained fewer than 3 sections"),null;try{let i=wa(n);return i?JSON.parse(i):(_l("Failed to decode base64 JWT payload"),null)}catch(i){return _l("Caught error parsing JWT payload as JSON",i?.toString()),null}}function jT(t){let e=om(t);return B(e,"internal-error"),B(typeof e.exp<"u","internal-error"),B(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Na(t,e,n=!1){return D(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof St&&wL(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function wL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Hg=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>D(this,null,function*(){yield this.iteration()}),n)}iteration(){return D(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var xa=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Aa(this.lastLoginAt),this.creationTime=Aa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Tl(t){return D(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Na(t,ib(n,{idToken:r}));B(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?sb(s.providerUserInfo):[],c=IL(t.providerData,o),u=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!c?.length,f=u?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new xa(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,p)})}function am(t){return D(this,null,function*(){let e=Xt(t);yield Tl(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function IL(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function sb(t){return t.map(e=>{var{providerId:n}=e,r=Ac(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function EL(t,e){return D(this,null,function*(){let n=yield nb(t,{},()=>D(this,null,function*(){let r=Dr({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=rb(t,i,"/v1/token",`key=${s}`),c=yield t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Cl.fetch()(o,{method:"POST",headers:c,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function CL(t,e){return D(this,null,function*(){return Vs(t,"POST","/v2/accounts:revokeToken",im(t,e))})}var Ra=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){B(e.idToken,"internal-error"),B(typeof e.idToken<"u","internal-error"),B(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){B(e.length!==0,"internal-error");let n=jT(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return D(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(B(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return D(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield EL(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(B(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(B(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(B(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return qn("not implemented")}};function Rr(t,e){B(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Fs=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Ac(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Hg(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new xa(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return D(this,null,function*(){let n=yield Na(this,this.stsTokenManager.getToken(this.auth,e));return B(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return sm(this,e)}reload(){return am(this)}_assign(e){this!==e&&(B(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){B(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return D(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Tl(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return D(this,null,function*(){if(Cn(this.auth.app))return Promise.reject(yi(this.auth));let e=yield this.getIdToken();return yield Na(this,vL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,c,u,l,f;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,y=(i=n.email)!==null&&i!==void 0?i:void 0,I=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,A=(o=n.photoURL)!==null&&o!==void 0?o:void 0,R=(c=n.tenantId)!==null&&c!==void 0?c:void 0,P=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,Y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,le=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:G,emailVerified:De,isAnonymous:lt,providerData:_e,stsTokenManager:E}=n;B(G&&E,e,"internal-error");let m=Ra.fromJSON(this.name,E);B(typeof G=="string",e,"internal-error"),Rr(p,e.name),Rr(y,e.name),B(typeof De=="boolean",e,"internal-error"),B(typeof lt=="boolean",e,"internal-error"),Rr(I,e.name),Rr(A,e.name),Rr(R,e.name),Rr(P,e.name),Rr(Y,e.name),Rr(le,e.name);let v=new t({uid:G,auth:e,email:y,emailVerified:De,displayName:p,isAnonymous:lt,photoURL:A,phoneNumber:I,tenantId:R,stsTokenManager:m,createdAt:Y,lastLoginAt:le});return _e&&Array.isArray(_e)&&(v.providerData=_e.map(w=>Object.assign({},w))),P&&(v._redirectEventId=P),v}static _fromIdTokenResponse(e,n,r=!1){return D(this,null,function*(){let i=new Ra;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Tl(s),s})}static _fromGetAccountInfoResponse(e,n,r){return D(this,null,function*(){let i=n.users[0];B(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?sb(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,c=new Ra;c.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new xa(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var BT=new Map;function zn(t){Gn(t instanceof Function,"Expected a class definition");let e=BT.get(t);return e?(Gn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,BT.set(t,e),e)}var TL=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return D(this,null,function*(){return!0})}_set(n,r){return D(this,null,function*(){this.storage[n]=r})}_get(n){return D(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return D(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),qg=TL;function vl(t,e,n){return`firebase:${t}:${e}:${n}`}var bl=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=vl(this.userKey,i.apiKey,s),this.fullPersistenceKey=vl("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return D(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Fs._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return D(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return D(this,null,function*(){if(!n.length)return new t(zn(qg),e,r);let i=(yield Promise.all(n.map(l=>D(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||zn(qg),o=vl(r,e.config.apiKey,e.name),c=null;for(let l of n)try{let f=yield l._get(o);if(f){let p=Fs._fromJSON(e,f);l!==s&&(c=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new t(s,e,r):(s=u[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(n.map(l=>D(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function $T(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(cb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ob(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lb(e))return"Blackberry";if(db(e))return"Webos";if(cm(e))return"Safari";if((e.includes("chrome/")||ab(e))&&!e.includes("edge/"))return"Chrome";if(ub(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function ob(t=Be()){return/firefox\//i.test(t)}function cm(t=Be()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ab(t=Be()){return/crios\//i.test(t)}function cb(t=Be()){return/iemobile/i.test(t)}function ub(t=Be()){return/android/i.test(t)}function lb(t=Be()){return/blackberry/i.test(t)}function db(t=Be()){return/webos/i.test(t)}function kl(t=Be()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function bL(t=Be()){var e;return kl(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function DL(){return yT()&&document.documentMode===10}function hb(t=Be()){return kl(t)||ub(t)||db(t)||lb(t)||/windows phone/i.test(t)||cb(t)}function SL(){try{return!!(window&&window!==window.top)}catch{return!1}}function fb(t,e=[]){let n;switch(t){case"Browser":n=$T(Be());break;case"Worker":n=`${$T(Be())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Tn}/${r}`}var zg=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,c)=>{try{let u=e(s);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return D(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function AL(n){return D(this,arguments,function*(t,e={}){return Vs(t,"GET","/v2/passwordPolicy",im(t,e))})}var RL=6,Gg=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:RL,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Wg=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Dl(this),this.idTokenSubscription=new Dl(this),this.beforeStateQueue=new zg(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=zn(n)),this._initializationPromise=this.queue(()=>D(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield bl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return D(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return D(this,null,function*(){try{let n=yield ib(this,{idToken:e}),r=yield Fs._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return D(this,null,function*(){var n;if(Cn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===c)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return B(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return D(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return D(this,null,function*(){try{yield Tl(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=gL()}_delete(){return D(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return D(this,null,function*(){if(Cn(this.app))return Promise.reject(yi(this));let n=e?Xt(e):null;return n&&B(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return D(this,null,function*(){if(!this._deleted)return e&&B(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>D(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return D(this,null,function*(){return Cn(this.app)?Promise.reject(yi(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Cn(this.app)?Promise.reject(yi(this)):this.queue(()=>D(this,null,function*(){yield this.assertedPersistence.setPersistence(zn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return D(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return D(this,null,function*(){let e=yield AL(this),n=new Gg(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Hn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return D(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield CL(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return D(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return D(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&zn(e)||this._popupRedirectResolver;B(n,this,"argument-error"),this.redirectPersistenceManager=yield bl.create(this,[zn(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return D(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>D(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return D(this,null,function*(){if(e===this.currentUser)return this.queue(()=>D(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(B(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(n);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return D(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return B(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return D(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return D(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&dL(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Ol(t){return Xt(t)}var Dl=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=ET(n=>this.observer=n)}get next(){return B(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var um={loadJS(){return D(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function NL(t){um=t}function xL(t){return um.loadJS(t)}function ML(){return um.gapiScript}function pb(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function lm(t,e){let n=mi(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(fi(s,e??{}))return i;Dn(i,"already-initialized")}return n.initialize({options:e})}function PL(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(zn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function dm(t,e,n){let r=Ol(t);B(r._canInitEmulator,r,"emulator-config-failed"),B(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=gb(e),{host:o,port:c}=kL(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||OL()}function gb(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function kL(t){let e=gb(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:HT(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:HT(o)}}}function HT(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function OL(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Ma=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return qn("not implemented")}_getIdTokenResponse(e){return qn("not implemented")}_linkToIdToken(e,n){return qn("not implemented")}_getReauthenticationResolver(e){return qn("not implemented")}};function Ls(t,e){return D(this,null,function*(){return _L(t,"POST","/v1/accounts:signInWithIdp",im(t,e))})}var LL="http://localhost",Sl=class t extends Ma{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let n=new t(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Dn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Ac(n,["providerId","signInMethod"]);if(!r||!i)return null;let o=new t(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let n=this.buildRequest();return Ls(e,n)}_linkToIdToken(e,n){let r=this.buildRequest();return r.idToken=n,Ls(e,r)}_getReauthenticationResolver(e){let n=this.buildRequest();return n.autoCreate=!1,Ls(e,n)}buildRequest(){let e={requestUri:LL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Dr(n)}return e}};var Pa=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Al=class extends Pa{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var hm=(()=>{class t extends Al{constructor(){super("google.com"),this.addScope("profile")}static credential(n,r){return Sl._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:r})}static credentialFromResult(n){return t.credentialFromTaggedObject(n)}static credentialFromError(n){return t.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;let{oauthIdToken:r,oauthAccessToken:i}=n;if(!r&&!i)return null;try{return t.credential(r,i)}catch{return null}}}t.GOOGLE_SIGN_IN_METHOD="google.com",t.PROVIDER_ID="google.com";return t})();var ka=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return D(this,null,function*(){let s=yield Fs._fromIdTokenResponse(e,r,i),o=qT(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return D(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=qT(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function qT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Kg=class t extends St{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function mb(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Kg._fromErrorAndOperation(t,s,e,r):s})}function FL(t,e,n=!1){return D(this,null,function*(){let r=yield Na(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return ka._forOperation(t,"link",r)})}function VL(t,e,n=!1){return D(this,null,function*(){let{auth:r}=t;if(Cn(r.app))return Promise.reject(yi(r));let i="reauthenticate";try{let s=yield Na(t,mb(r,i,e,t),n);B(s.idToken,r,"internal-error");let o=om(s.idToken);B(o,r,"internal-error");let{sub:c}=o;return B(t.uid===c,r,"user-mismatch"),ka._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Dn(r,"user-mismatch"),s}})}function UL(t,e,n=!1){return D(this,null,function*(){if(Cn(t.app))return Promise.reject(yi(t));let r="signIn",i=yield mb(t,r,e),s=yield ka._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function fm(t,e,n,r){return Xt(t).onIdTokenChanged(e,n,r)}function pm(t,e,n){return Xt(t).beforeAuthStateChanged(e,n)}var Rl="__sak";var Nl=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Rl,"1"),this.storage.removeItem(Rl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function jL(){let t=Be();return cm(t)||kl(t)}var BL=1e3,$L=10,HL=(()=>{class t extends Nl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=jL()&&SL(),this.fallbackToPolling=hb(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((c,u,l)=>{this.notifyListeners(c,l)});return}let i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let c=this.storage.getItem(i);if(n.newValue!==c)n.newValue!==null?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}let s=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);DL()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,$L):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},BL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return D(this,null,function*(){yield nr(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return D(this,null,function*(){let r=yield nr(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return D(this,null,function*(){yield nr(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),Ll=HL;var qL=(()=>{class t extends Nl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),gm=qL;function zL(t){return Promise.all(t.map(e=>D(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var GL=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return D(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,c=this.handlersMap[s];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(c).map(f=>D(this,null,function*(){return f(r.origin,o)})),l=yield zL(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function mm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Qg=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return D(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((c,u)=>{let l=mm("",20);i.port1.start();let f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let y=p;if(y.data.eventId===l)switch(y.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(y.data.response);break;default:clearTimeout(f),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function bn(){return window}function WL(t){bn().location.href=t}function yb(){return typeof bn().WorkerGlobalScope<"u"&&typeof bn().importScripts=="function"}function KL(){return D(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function QL(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function YL(){return yb()?self:null}var _b="firebaseLocalStorageDb",JL=1,xl="firebaseLocalStorage",vb="fbase_key",vi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Fl(t,e){return t.transaction([xl],e?"readwrite":"readonly").objectStore(xl)}function ZL(){let t=indexedDB.deleteDatabase(_b);return new vi(t).toPromise()}function Yg(){let t=indexedDB.open(_b,JL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(xl,{keyPath:vb})}catch(i){n(i)}}),t.addEventListener("success",()=>D(this,null,function*(){let r=t.result;r.objectStoreNames.contains(xl)?e(r):(r.close(),yield ZL(),e(yield Yg()))}))})}function zT(t,e,n){return D(this,null,function*(){let r=Fl(t,!0).put({[vb]:e,value:n});return new vi(r).toPromise()})}function XL(t,e){return D(this,null,function*(){let n=Fl(t,!1).get(e),r=yield new vi(n).toPromise();return r===void 0?null:r.value})}function GT(t,e){let n=Fl(t,!0).delete(e);return new vi(n).toPromise()}var eF=800,tF=3,nF=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return D(this,null,function*(){return this.db?this.db:(this.db=yield Yg(),this.db)})}_withRetries(n){return D(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>tF)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return D(this,null,function*(){return yb()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return D(this,null,function*(){this.receiver=GL._getInstance(YL()),this.receiver._subscribe("keyChanged",(n,r)=>D(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>D(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return D(this,null,function*(){var n,r;if(this.activeServiceWorker=yield KL(),!this.activeServiceWorker)return;this.sender=new Qg(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return D(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||QL()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return D(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Yg();return yield zT(n,Rl,"1"),yield GT(n,Rl),!0}catch{}return!1})}_withPendingWrite(n){return D(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return D(this,null,function*(){return this._withPendingWrite(()=>D(this,null,function*(){return yield this._withRetries(i=>zT(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return D(this,null,function*(){let r=yield this._withRetries(i=>XL(i,n));return this.localCache[n]=r,r})}_remove(n){return D(this,null,function*(){return this._withPendingWrite(()=>D(this,null,function*(){return yield this._withRetries(r=>GT(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return D(this,null,function*(){let n=yield this._withRetries(s=>{let o=Fl(s,!1).getAll();return new vi(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>D(this,null,function*(){return this._poll()}),eF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),wb=nF;var $3=pb("rcb"),H3=new _i(3e4,6e4);function Ib(t,e){return e?zn(e):(B(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Oa=class extends Ma{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ls(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ls(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ls(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function rF(t){return UL(t.auth,new Oa(t),t.bypassAuthState)}function iF(t){let{auth:e,user:n}=t;return B(n,e,"internal-error"),VL(n,new Oa(t),t.bypassAuthState)}function sF(t){return D(this,null,function*(){let{auth:e,user:n}=t;return B(n,e,"internal-error"),FL(n,new Oa(t),t.bypassAuthState)})}var Ml=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>D(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return D(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rF;case"linkViaPopup":case"linkViaRedirect":return sF;case"reauthViaPopup":case"reauthViaRedirect":return iF;default:Dn(this.auth,"internal-error")}}resolve(e){Gn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var oF=new _i(2e3,1e4);function Vl(t,e,n){return D(this,null,function*(){if(Cn(t.app))return Promise.reject(en(t,"operation-not-supported-in-this-environment"));let r=Ol(t);hL(t,e,Pa);let i=Ib(r,n);return new aF(r,"signInViaPopup",e,i).executeNotNull()})}var aF=(()=>{class t extends Ml{constructor(n,r,i,s,o){super(n,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=this}executeNotNull(){return D(this,null,function*(){let n=yield this.execute();return B(n,this.auth,"internal-error"),n})}onExecution(){return D(this,null,function*(){Gn(this.filter.length===1,"Popup operations only handle one event");let n=mm();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],n),this.authWindow.associatedEvent=n,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(en(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var n;return((n=this.authWindow)===null||n===void 0?void 0:n.associatedEvent)||null}cancel(){this.reject(en(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}pollUserCancellation(){let n=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(en(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(n,oF.get())};n()}}t.currentPopupAction=null;return t})(),cF="pendingRedirect",wl=new Map,Jg=class t extends Ml{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return D(this,null,function*(){let e=wl.get(this.auth._key());if(!e){try{let r=(yield uF(this.resolver,this.auth))?yield nr(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}wl.set(this.auth._key(),e)}return this.bypassAuthState||wl.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return D(this,null,function*(){if(e.type==="signInViaRedirect")return nr(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,nr(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return D(this,null,function*(){})}cleanUp(){}};function uF(t,e){return D(this,null,function*(){let n=hF(e),r=dF(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function lF(t,e){wl.set(t._key(),e)}function dF(t){return zn(t._redirectPersistence)}function hF(t){return vl(cF,t.config.apiKey,t.name)}function fF(t,e,n=!1){return D(this,null,function*(){if(Cn(t.app))return Promise.reject(yi(t));let r=Ol(t),i=Ib(r,e),o=yield new Jg(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var pF=10*60*1e3,Zg=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gF(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Eb(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(en(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=pF&&this.cachedEventUids.clear(),this.cachedEventUids.has(WT(e))}saveEventToCache(e){this.cachedEventUids.add(WT(e)),this.lastProcessedEventTime=Date.now()}};function WT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Eb({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function gF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Eb(t);default:return!1}}function mF(n){return D(this,arguments,function*(t,e={}){return Vs(t,"GET","/v1/projects",e)})}var yF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_F=/^https?/;function vF(t){return D(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield mF(t);for(let n of e)try{if(wF(n))return}catch{}Dn(t,"unauthorized-domain")})}function wF(t){let e=Bg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!_F.test(n))return!1;if(yF.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var IF=new _i(3e4,6e4);function KT(){let t=bn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function EF(t){return new Promise((e,n)=>{var r,i,s;function o(){KT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{KT(),n(en(t,"network-request-failed"))},timeout:IF.get()})}if(!((i=(r=bn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=bn().gapi)===null||s===void 0)&&s.load)o();else{let c=pb("iframefcb");return bn()[c]=()=>{gapi.load?o():n(en(t,"network-request-failed"))},xL(`${ML()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Il=null,e})}var Il=null;function CF(t){return Il=Il||EF(t),Il}var TF=new _i(5e3,15e3),bF="__/auth/iframe",DF="emulator/auth/iframe",SF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},AF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function RF(t){let e=t.config;B(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?rm(e,DF):`https://${t.config.authDomain}/${bF}`,r={apiKey:e.apiKey,appName:t.name,v:Tn},i=AF.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Dr(r).slice(1)}`}function NF(t){return D(this,null,function*(){let e=yield CF(t),n=bn().gapi;return B(n,t,"internal-error"),e.open({where:document.body,url:RF(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:SF,dontclear:!0},r=>new Promise((i,s)=>D(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=en(t,"network-request-failed"),c=bn().setTimeout(()=>{s(o)},TF.get());function u(){bn().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{s(o)})})))})}var xF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},MF=500,PF=600,kF="_blank",OF="http://localhost",Pl=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function LF(t,e,n,r=MF,i=PF){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",u=Object.assign(Object.assign({},xF),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Be().toLowerCase();n&&(c=ab(l)?kF:n),ob(l)&&(e=e||OF,u.scrollbars="yes");let f=Object.entries(u).reduce((y,[I,A])=>`${y}${I}=${A},`,"");if(bL(l)&&c!=="_self")return FF(e||"",c),new Pl(null);let p=window.open(e||"",c,f);B(p,t,"popup-blocked");try{p.focus()}catch{}return new Pl(p)}function FF(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var VF="__/auth/handler",UF="emulator/auth/handler",jF=encodeURIComponent("fac");function QT(t,e,n,r,i,s){return D(this,null,function*(){B(t.config.authDomain,t,"auth-domain-config-required"),B(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Tn,eventId:i};if(e instanceof Pa){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Ea(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[f,p]of Object.entries(s||{}))o[f]=p}if(e instanceof Al){let f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);let c=o;for(let f of Object.keys(c))c[f]===void 0&&delete c[f];let u=yield t._getAppCheckToken(),l=u?`#${jF}=${encodeURIComponent(u)}`:"";return`${BF(t)}?${Dr(c).slice(1)}${l}`})}function BF({config:t}){return t.emulator?rm(t,UF):`https://${t.authDomain}/${VF}`}var jg="webStorageSupport",Xg=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gm,this._completeRedirectFn=fF,this._overrideRedirectResult=lF}_openPopup(e,n,r,i){return D(this,null,function*(){var s;Gn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield QT(e,n,r,Bg(),i);return LF(e,o,mm())})}_openRedirect(e,n,r,i){return D(this,null,function*(){yield this._originValidation(e);let s=yield QT(e,n,r,Bg(),i);return WL(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Gn(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return D(this,null,function*(){let n=yield NF(e),r=new Zg(e);return n.register("authEvent",i=>(B(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(jg,{type:jg},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[jg];o!==void 0&&n(!!o),Dn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=vF(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return hb()||cm()||kl()}},Cb=Xg;var YT="@firebase/auth",JT="1.7.5";var em=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return D(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){B(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function $F(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function HF(t){En(new yt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;B(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fb(t)},l=new Wg(r,i,s,u);return PL(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),En(new yt("auth-internal",e=>{let n=Ol(e.getProvider("auth").getImmediate());return(r=>new em(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),be(YT,JT,$F(t)),be(YT,JT,"esm2017")}var qF=5*60,zF=Cg("authIdTokenMaxAge")||qF,ZT=null,GF=t=>e=>D(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>zF)return;let i=n?.token;ZT!==i&&(ZT=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function ym(t=Ar()){let e=mi(t,"auth");if(e.isInitialized())return e.getImmediate();let n=lm(t,{popupRedirectResolver:Cb,persistence:[wb,Ll,gm]}),r=Cg("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=GF(s.toString());pm(n,o,()=>o(n.currentUser)),fm(n,c=>o(c))}}let i=Ig("auth");return i&&dm(n,`http://${i}`),n}function WF(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}NL({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=en("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",WF().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});HF("Browser");var jV="firebase",BV="10.12.3";be(jV,BV,"app");var Wn=new pr("ANGULARFIRE2_VERSION");function js(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Ii=(t,e)=>{let n=e?[e]:ml(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Nr=class{constructor(){return Ii($V)}},$V="app-check";function Us(){}var Ul=class{zone;delegate;constructor(e,n=ah){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},_m=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Us,{},Us,Us)),n.pipe(Fe({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},xr=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Ul(Zone.current)),this.insideAngular=n.run(()=>new Ul(Zone.current,oh)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(j(de))};static \u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function jl(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function HV(t){return jl().ngZone.runOutsideAngular(()=>t())}function wi(t){return jl().ngZone.run(()=>t())}function qV(t){return zV(jl())(t)}function zV(t){return function(n){return n=n.lift(new _m(t.ngZone)),n.pipe(sr(t.outsideAngular),ir(t.insideAngular))}}var GV=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),wi(()=>t.apply(void 0,r))},Mr=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=wi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Us,{},Us,Us))),r[s]=GV(r[s],n));let i=HV(()=>t.apply(this,r));if(!e)if(i instanceof ue){let s=jl();return i.pipe(sr(s.outsideAngular),ir(s.insideAngular))}else return wi(()=>i);return i instanceof ue?i.pipe(qV):i instanceof Promise?wi(()=>new Promise((s,o)=>i.then(c=>wi(()=>s(c)),c=>wi(()=>o(c))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:wi(()=>i)};var tn=class{constructor(e){return e}},Kn=class{constructor(){return ml()}};function WV(t){return t&&t.length===1?t[0]:new tn(Ar())}var vm=new V("angularfire2._apps"),KV={provide:tn,useFactory:WV,deps:[[new Me,vm]]},QV={provide:Kn,deps:[[new Me,vm]]};function YV(t){return(e,n)=>{let r=n.get(_r);be("angularfire",Wn.full,"core"),be("angularfire",Wn.full,"app"),be("angular",zE.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new tn(i)}}function Tb(t,...e){return Ot([KV,QV,{provide:vm,useFactory:YV(t),multi:!0,deps:[de,ct,xr,...e]}])}var bb=Mr(Vg,!0);var Db="auth",At=class{constructor(e){return e}},Ei=class{constructor(){return Ii(Db)}};var wm=new V("angularfire2.auth-instances");function JV(t,e){let n=js(Db,t,e);return n&&new At(n)}function ZV(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new At(r)}}var XV={provide:Ei,deps:[[new Me,wm]]},eU={provide:At,useFactory:JV,deps:[[new Me,wm],tn]};function Sb(t,...e){return be("angularfire",Wn.full,"auth"),Ot([eU,XV,{provide:wm,useFactory:ZV(t),multi:!0,deps:[de,ct,xr,Kn,[new Me,Nr],...e]}])}var Ab=Mr(ym,!0);var Rb=(()=>{let e=class e{constructor(r,i,s,o){this.auth=r,this.router=i,this.activatedRoute=s,this.modalService=o,this.onError=c=>this.modalService.showError(c),this.redirectToInnerPage=()=>this.activatedRoute.snapshot?.queryParams?.previous?this.router.navigateByUrl(this.activatedRoute.snapshot?.queryParams?.previous):this.router.navigate(["cash-flow"])}signInGoogle(){return D(this,null,function*(){yield this.auth.setPersistence(Ll).catch(this.onError);let r=yield Vl(this.auth,new hm).catch(this.onError);yield this.auth.updateCurrentUser(r?.user).catch(this.onError),yield this.redirectToInnerPage().catch(this.onError)})}};e.\u0275fac=function(i){return new(i||e)(me(At),me(Zt),me($n),me(ks))},e.\u0275cmp=Pe({type:e,selectors:[["app-login-page"]],standalone:!0,features:[ke],decls:13,vars:2,consts:[[1,"login-form",3,"paddingX","paddingY"],[1,"login-form__title"],[1,"login-form__text"],[1,"login-form__sign-in",3,"click"]],template:function(i,s){i&1&&(L(0,"ui-panel",0)(1,"h1",1),Z(2,"Hello!"),$(),L(3,"p",2),Z(4," This is a pet-project."),Ft(5,"br")(6,"br"),Z(7," It designed for a select group of users."),Ft(8,"br")(9,"br"),Z(10," You can sign in only if you have received an invitation. "),$(),L(11,"button",3),Ce("click",function(){return s.signInGoogle()}),Z(12," Sign In with Google "),$()()),i&2&&we("paddingX",30)("paddingY",10)},dependencies:[Ps],styles:["[_nghost-%COMP%]{height:100vh;background-color:var(--theme-bg-hover);display:flex;flex-direction:column;justify-content:center;align-items:center}.login-form[_ngcontent-%COMP%]{margin:0 auto 80px;padding:30px;max-width:500px}.login-form__title[_ngcontent-%COMP%]{text-align:center;width:100%;font-weight:500;letter-spacing:2px;text-transform:capitalize;margin:16px auto;padding-bottom:20px;border-bottom:1px solid var(--theme-bg-hover)}.login-form__text[_ngcontent-%COMP%]{font-size:18px;margin:20px 0;padding-bottom:20px;border-bottom:1px solid var(--theme-bg-hover)}.login-form__sign-in[_ngcontent-%COMP%]{display:block;max-width:500px;width:100%;background-color:var(--theme-bg-hover);border:1px solid var(--theme-bg-hover);color:var(--theme-text);font-size:22px;border-radius:12px;box-shadow:1px 4px 8px #33334e1a;padding:10px 24px;margin-bottom:20px}.login-form__sign-in[_ngcontent-%COMP%]:hover{background-color:var(--theme-bg);border:1px solid var(--theme-bg-hover);color:var(--theme-input-focus);cursor:pointer}"]});let t=e;return t})();var $l=(()=>{let e=class e{constructor(r,i){this.auth=r,this.router=i}canActivate(r,i){return D(this,null,function*(){yield this.auth.authStateReady();let s=yield this.currentUser();return s||(yield this.router.navigate(["welcome"],{queryParams:{previous:i.url}})),!!s})}currentUser(){return D(this,null,function*(){return this.auth.currentUser})}};e.\u0275fac=function(i){return new(i||e)(j(At),j(Zt))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();var Hl=(()=>{let e=class e{constructor(r,i){this.auth=r,this.router=i}canActivate(){return D(this,null,function*(){yield this.auth.authStateReady();let r=yield this.currentUser();return r&&(yield this.router.navigate(["cash-flow"])),!r})}currentUser(){return D(this,null,function*(){return this.auth.currentUser})}};e.\u0275fac=function(i){return new(i||e)(j(At),j(Zt))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();var Nb=[{path:"cash-flow",component:dT,canActivate:[$l]},{path:"welcome",component:Rb,canActivate:[Hl]},{path:"**",redirectTo:"welcome"}];var xb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Mb={};var Im,Pb;(function(){var t;function e(E,m){function v(){}v.prototype=m.prototype,E.D=m.prototype,E.prototype=new v,E.prototype.constructor=E,E.C=function(w,C,b){for(var _=Array(arguments.length-2),Rn=2;Rn<arguments.length;Rn++)_[Rn-2]=arguments[Rn];return m.prototype[C].apply(w,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,m,v){v||(v=0);var w=Array(16);if(typeof m=="string")for(var C=0;16>C;++C)w[C]=m.charCodeAt(v++)|m.charCodeAt(v++)<<8|m.charCodeAt(v++)<<16|m.charCodeAt(v++)<<24;else for(C=0;16>C;++C)w[C]=m[v++]|m[v++]<<8|m[v++]<<16|m[v++]<<24;m=E.g[0],v=E.g[1],C=E.g[2];var b=E.g[3],_=m+(b^v&(C^b))+w[0]+3614090360&4294967295;m=v+(_<<7&4294967295|_>>>25),_=b+(C^m&(v^C))+w[1]+3905402710&4294967295,b=m+(_<<12&4294967295|_>>>20),_=C+(v^b&(m^v))+w[2]+606105819&4294967295,C=b+(_<<17&4294967295|_>>>15),_=v+(m^C&(b^m))+w[3]+3250441966&4294967295,v=C+(_<<22&4294967295|_>>>10),_=m+(b^v&(C^b))+w[4]+4118548399&4294967295,m=v+(_<<7&4294967295|_>>>25),_=b+(C^m&(v^C))+w[5]+1200080426&4294967295,b=m+(_<<12&4294967295|_>>>20),_=C+(v^b&(m^v))+w[6]+2821735955&4294967295,C=b+(_<<17&4294967295|_>>>15),_=v+(m^C&(b^m))+w[7]+4249261313&4294967295,v=C+(_<<22&4294967295|_>>>10),_=m+(b^v&(C^b))+w[8]+1770035416&4294967295,m=v+(_<<7&4294967295|_>>>25),_=b+(C^m&(v^C))+w[9]+2336552879&4294967295,b=m+(_<<12&4294967295|_>>>20),_=C+(v^b&(m^v))+w[10]+4294925233&4294967295,C=b+(_<<17&4294967295|_>>>15),_=v+(m^C&(b^m))+w[11]+2304563134&4294967295,v=C+(_<<22&4294967295|_>>>10),_=m+(b^v&(C^b))+w[12]+1804603682&4294967295,m=v+(_<<7&4294967295|_>>>25),_=b+(C^m&(v^C))+w[13]+4254626195&4294967295,b=m+(_<<12&4294967295|_>>>20),_=C+(v^b&(m^v))+w[14]+2792965006&4294967295,C=b+(_<<17&4294967295|_>>>15),_=v+(m^C&(b^m))+w[15]+1236535329&4294967295,v=C+(_<<22&4294967295|_>>>10),_=m+(C^b&(v^C))+w[1]+4129170786&4294967295,m=v+(_<<5&4294967295|_>>>27),_=b+(v^C&(m^v))+w[6]+3225465664&4294967295,b=m+(_<<9&4294967295|_>>>23),_=C+(m^v&(b^m))+w[11]+643717713&4294967295,C=b+(_<<14&4294967295|_>>>18),_=v+(b^m&(C^b))+w[0]+3921069994&4294967295,v=C+(_<<20&4294967295|_>>>12),_=m+(C^b&(v^C))+w[5]+3593408605&4294967295,m=v+(_<<5&4294967295|_>>>27),_=b+(v^C&(m^v))+w[10]+38016083&4294967295,b=m+(_<<9&4294967295|_>>>23),_=C+(m^v&(b^m))+w[15]+3634488961&4294967295,C=b+(_<<14&4294967295|_>>>18),_=v+(b^m&(C^b))+w[4]+3889429448&4294967295,v=C+(_<<20&4294967295|_>>>12),_=m+(C^b&(v^C))+w[9]+568446438&4294967295,m=v+(_<<5&4294967295|_>>>27),_=b+(v^C&(m^v))+w[14]+3275163606&4294967295,b=m+(_<<9&4294967295|_>>>23),_=C+(m^v&(b^m))+w[3]+4107603335&4294967295,C=b+(_<<14&4294967295|_>>>18),_=v+(b^m&(C^b))+w[8]+1163531501&4294967295,v=C+(_<<20&4294967295|_>>>12),_=m+(C^b&(v^C))+w[13]+2850285829&4294967295,m=v+(_<<5&4294967295|_>>>27),_=b+(v^C&(m^v))+w[2]+4243563512&4294967295,b=m+(_<<9&4294967295|_>>>23),_=C+(m^v&(b^m))+w[7]+1735328473&4294967295,C=b+(_<<14&4294967295|_>>>18),_=v+(b^m&(C^b))+w[12]+2368359562&4294967295,v=C+(_<<20&4294967295|_>>>12),_=m+(v^C^b)+w[5]+4294588738&4294967295,m=v+(_<<4&4294967295|_>>>28),_=b+(m^v^C)+w[8]+2272392833&4294967295,b=m+(_<<11&4294967295|_>>>21),_=C+(b^m^v)+w[11]+1839030562&4294967295,C=b+(_<<16&4294967295|_>>>16),_=v+(C^b^m)+w[14]+4259657740&4294967295,v=C+(_<<23&4294967295|_>>>9),_=m+(v^C^b)+w[1]+2763975236&4294967295,m=v+(_<<4&4294967295|_>>>28),_=b+(m^v^C)+w[4]+1272893353&4294967295,b=m+(_<<11&4294967295|_>>>21),_=C+(b^m^v)+w[7]+4139469664&4294967295,C=b+(_<<16&4294967295|_>>>16),_=v+(C^b^m)+w[10]+3200236656&4294967295,v=C+(_<<23&4294967295|_>>>9),_=m+(v^C^b)+w[13]+681279174&4294967295,m=v+(_<<4&4294967295|_>>>28),_=b+(m^v^C)+w[0]+3936430074&4294967295,b=m+(_<<11&4294967295|_>>>21),_=C+(b^m^v)+w[3]+3572445317&4294967295,C=b+(_<<16&4294967295|_>>>16),_=v+(C^b^m)+w[6]+76029189&4294967295,v=C+(_<<23&4294967295|_>>>9),_=m+(v^C^b)+w[9]+3654602809&4294967295,m=v+(_<<4&4294967295|_>>>28),_=b+(m^v^C)+w[12]+3873151461&4294967295,b=m+(_<<11&4294967295|_>>>21),_=C+(b^m^v)+w[15]+530742520&4294967295,C=b+(_<<16&4294967295|_>>>16),_=v+(C^b^m)+w[2]+3299628645&4294967295,v=C+(_<<23&4294967295|_>>>9),_=m+(C^(v|~b))+w[0]+4096336452&4294967295,m=v+(_<<6&4294967295|_>>>26),_=b+(v^(m|~C))+w[7]+1126891415&4294967295,b=m+(_<<10&4294967295|_>>>22),_=C+(m^(b|~v))+w[14]+2878612391&4294967295,C=b+(_<<15&4294967295|_>>>17),_=v+(b^(C|~m))+w[5]+4237533241&4294967295,v=C+(_<<21&4294967295|_>>>11),_=m+(C^(v|~b))+w[12]+1700485571&4294967295,m=v+(_<<6&4294967295|_>>>26),_=b+(v^(m|~C))+w[3]+2399980690&4294967295,b=m+(_<<10&4294967295|_>>>22),_=C+(m^(b|~v))+w[10]+4293915773&4294967295,C=b+(_<<15&4294967295|_>>>17),_=v+(b^(C|~m))+w[1]+2240044497&4294967295,v=C+(_<<21&4294967295|_>>>11),_=m+(C^(v|~b))+w[8]+1873313359&4294967295,m=v+(_<<6&4294967295|_>>>26),_=b+(v^(m|~C))+w[15]+4264355552&4294967295,b=m+(_<<10&4294967295|_>>>22),_=C+(m^(b|~v))+w[6]+2734768916&4294967295,C=b+(_<<15&4294967295|_>>>17),_=v+(b^(C|~m))+w[13]+1309151649&4294967295,v=C+(_<<21&4294967295|_>>>11),_=m+(C^(v|~b))+w[4]+4149444226&4294967295,m=v+(_<<6&4294967295|_>>>26),_=b+(v^(m|~C))+w[11]+3174756917&4294967295,b=m+(_<<10&4294967295|_>>>22),_=C+(m^(b|~v))+w[2]+718787259&4294967295,C=b+(_<<15&4294967295|_>>>17),_=v+(b^(C|~m))+w[9]+3951481745&4294967295,E.g[0]=E.g[0]+m&4294967295,E.g[1]=E.g[1]+(C+(_<<21&4294967295|_>>>11))&4294967295,E.g[2]=E.g[2]+C&4294967295,E.g[3]=E.g[3]+b&4294967295}r.prototype.u=function(E,m){m===void 0&&(m=E.length);for(var v=m-this.blockSize,w=this.B,C=this.h,b=0;b<m;){if(C==0)for(;b<=v;)i(this,E,b),b+=this.blockSize;if(typeof E=="string"){for(;b<m;)if(w[C++]=E.charCodeAt(b++),C==this.blockSize){i(this,w),C=0;break}}else for(;b<m;)if(w[C++]=E[b++],C==this.blockSize){i(this,w),C=0;break}}this.h=C,this.o+=m},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var m=1;m<E.length-8;++m)E[m]=0;var v=8*this.o;for(m=E.length-8;m<E.length;++m)E[m]=v&255,v/=256;for(this.u(E),E=Array(16),m=v=0;4>m;++m)for(var w=0;32>w;w+=8)E[v++]=this.g[m]>>>w&255;return E};function s(E,m){var v=c;return Object.prototype.hasOwnProperty.call(v,E)?v[E]:v[E]=m(E)}function o(E,m){this.h=m;for(var v=[],w=!0,C=E.length-1;0<=C;C--){var b=E[C]|0;w&&b==m||(v[C]=b,w=!1)}this.g=v}var c={};function u(E){return-128<=E&&128>E?s(E,function(m){return new o([m|0],0>m?-1:0)}):new o([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return p;if(0>E)return P(l(-E));for(var m=[],v=1,w=0;E>=v;w++)m[w]=E/v|0,v*=4294967296;return new o(m,0)}function f(E,m){if(E.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(E.charAt(0)=="-")return P(f(E.substring(1),m));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=l(Math.pow(m,8)),w=p,C=0;C<E.length;C+=8){var b=Math.min(8,E.length-C),_=parseInt(E.substring(C,C+b),m);8>b?(b=l(Math.pow(m,b)),w=w.j(b).add(l(_))):(w=w.j(v),w=w.add(l(_)))}return w}var p=u(0),y=u(1),I=u(16777216);t=o.prototype,t.m=function(){if(R(this))return-P(this).m();for(var E=0,m=1,v=0;v<this.g.length;v++){var w=this.i(v);E+=(0<=w?w:4294967296+w)*m,m*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(A(this))return"0";if(R(this))return"-"+P(this).toString(E);for(var m=l(Math.pow(E,6)),v=this,w="";;){var C=De(v,m).g;v=Y(v,C.j(m));var b=((0<v.g.length?v.g[0]:v.h)>>>0).toString(E);if(v=C,A(v))return b+w;for(;6>b.length;)b="0"+b;w=b+w}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function A(E){if(E.h!=0)return!1;for(var m=0;m<E.g.length;m++)if(E.g[m]!=0)return!1;return!0}function R(E){return E.h==-1}t.l=function(E){return E=Y(this,E),R(E)?-1:A(E)?0:1};function P(E){for(var m=E.g.length,v=[],w=0;w<m;w++)v[w]=~E.g[w];return new o(v,~E.h).add(y)}t.abs=function(){return R(this)?P(this):this},t.add=function(E){for(var m=Math.max(this.g.length,E.g.length),v=[],w=0,C=0;C<=m;C++){var b=w+(this.i(C)&65535)+(E.i(C)&65535),_=(b>>>16)+(this.i(C)>>>16)+(E.i(C)>>>16);w=_>>>16,b&=65535,_&=65535,v[C]=_<<16|b}return new o(v,v[v.length-1]&-2147483648?-1:0)};function Y(E,m){return E.add(P(m))}t.j=function(E){if(A(this)||A(E))return p;if(R(this))return R(E)?P(this).j(P(E)):P(P(this).j(E));if(R(E))return P(this.j(P(E)));if(0>this.l(I)&&0>E.l(I))return l(this.m()*E.m());for(var m=this.g.length+E.g.length,v=[],w=0;w<2*m;w++)v[w]=0;for(w=0;w<this.g.length;w++)for(var C=0;C<E.g.length;C++){var b=this.i(w)>>>16,_=this.i(w)&65535,Rn=E.i(C)>>>16,so=E.i(C)&65535;v[2*w+2*C]+=_*so,le(v,2*w+2*C),v[2*w+2*C+1]+=b*so,le(v,2*w+2*C+1),v[2*w+2*C+1]+=_*Rn,le(v,2*w+2*C+1),v[2*w+2*C+2]+=b*Rn,le(v,2*w+2*C+2)}for(w=0;w<m;w++)v[w]=v[2*w+1]<<16|v[2*w];for(w=m;w<2*m;w++)v[w]=0;return new o(v,0)};function le(E,m){for(;(E[m]&65535)!=E[m];)E[m+1]+=E[m]>>>16,E[m]&=65535,m++}function G(E,m){this.g=E,this.h=m}function De(E,m){if(A(m))throw Error("division by zero");if(A(E))return new G(p,p);if(R(E))return m=De(P(E),m),new G(P(m.g),P(m.h));if(R(m))return m=De(E,P(m)),new G(P(m.g),m.h);if(30<E.g.length){if(R(E)||R(m))throw Error("slowDivide_ only works with positive integers.");for(var v=y,w=m;0>=w.l(E);)v=lt(v),w=lt(w);var C=_e(v,1),b=_e(w,1);for(w=_e(w,2),v=_e(v,2);!A(w);){var _=b.add(w);0>=_.l(E)&&(C=C.add(v),b=_),w=_e(w,1),v=_e(v,1)}return m=Y(E,C.j(m)),new G(C,m)}for(C=p;0<=E.l(m);){for(v=Math.max(1,Math.floor(E.m()/m.m())),w=Math.ceil(Math.log(v)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),b=l(v),_=b.j(m);R(_)||0<_.l(E);)v-=w,b=l(v),_=b.j(m);A(b)&&(b=y),C=C.add(b),E=Y(E,_)}return new G(C,E)}t.A=function(E){return De(this,E).h},t.and=function(E){for(var m=Math.max(this.g.length,E.g.length),v=[],w=0;w<m;w++)v[w]=this.i(w)&E.i(w);return new o(v,this.h&E.h)},t.or=function(E){for(var m=Math.max(this.g.length,E.g.length),v=[],w=0;w<m;w++)v[w]=this.i(w)|E.i(w);return new o(v,this.h|E.h)},t.xor=function(E){for(var m=Math.max(this.g.length,E.g.length),v=[],w=0;w<m;w++)v[w]=this.i(w)^E.i(w);return new o(v,this.h^E.h)};function lt(E){for(var m=E.g.length+1,v=[],w=0;w<m;w++)v[w]=E.i(w)<<1|E.i(w-1)>>>31;return new o(v,E.h)}function _e(E,m){var v=m>>5;m%=32;for(var w=E.g.length-v,C=[],b=0;b<w;b++)C[b]=0<m?E.i(b+v)>>>m|E.i(b+v+1)<<32-m:E.i(b+v);return new o(C,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Pb=Mb.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=f,Im=Mb.Integer=o}).apply(typeof xb<"u"?xb:typeof self<"u"?self:typeof window<"u"?window:{});var ql=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Qn={};var kb,Ob,Lb,Fb,Vb,Ub,jb,Bb,$b;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,h){return a==Array.prototype||a==Object.prototype||(a[d]=h.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof ql=="object"&&ql];for(var d=0;d<a.length;++d){var h=a[d];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var h=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var T=a[g];if(!(T in h))break e;h=h[T]}a=a[a.length-1],g=h[a],d=d(g),d!=g&&d!=null&&e(h,a,{configurable:!0,writable:!0,value:d})}}function s(a,d){a instanceof String&&(a+="");var h=0,g=!1,T={next:function(){if(!g&&h<a.length){var S=h++;return{value:d(S,a[S]),done:!1}}return g=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(a){return a||function(){return s(this,function(d,h){return h})}});var o=o||{},c=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function l(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function f(a,d,h){return a.call.apply(a.bind,arguments)}function p(a,d,h){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,g),a.apply(d,T)}}return function(){return a.apply(d,arguments)}}function y(a,d,h){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,y.apply(null,arguments)}function I(a,d){var h=Array.prototype.slice.call(arguments,1);return function(){var g=h.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function A(a,d){function h(){}h.prototype=d.prototype,a.aa=d.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(g,T,S){for(var N=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)N[pe-2]=arguments[pe];return d.prototype[T].apply(g,N)}}function R(a){let d=a.length;if(0<d){let h=Array(d);for(let g=0;g<d;g++)h[g]=a[g];return h}return[]}function P(a,d){for(let h=1;h<arguments.length;h++){let g=arguments[h];if(u(g)){let T=a.length||0,S=g.length||0;a.length=T+S;for(let N=0;N<S;N++)a[T+N]=g[N]}else a.push(g)}}class Y{constructor(d,h){this.i=d,this.j=h,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function le(a){return/^[\s\xa0]*$/.test(a)}function G(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function De(a){return De[" "](a),a}De[" "]=function(){};var lt=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function _e(a,d,h){for(let g in a)d.call(h,a[g],g,a)}function E(a,d){for(let h in a)d.call(void 0,a[h],h,a)}function m(a){let d={};for(let h in a)d[h]=a[h];return d}let v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(a,d){let h,g;for(let T=1;T<arguments.length;T++){g=arguments[T];for(h in g)a[h]=g[h];for(let S=0;S<v.length;S++)h=v[S],Object.prototype.hasOwnProperty.call(g,h)&&(a[h]=g[h])}}function C(a){var d=1;a=a.split(":");let h=[];for(;0<d&&a.length;)h.push(a.shift()),d--;return a.length&&h.push(a.join(":")),h}function b(a){c.setTimeout(()=>{throw a},0)}function _(){var a=md;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class Rn{constructor(){this.h=this.g=null}add(d,h){let g=so.get();g.set(d,h),this.h?this.h.next=g:this.g=g,this.h=g}}var so=new Y(()=>new YS,a=>a.reset());class YS{constructor(){this.next=this.g=this.h=null}set(d,h){this.h=d,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let oo,ao=!1,md=new Rn,r_=()=>{let a=c.Promise.resolve(void 0);oo=()=>{a.then(JS)}};var JS=()=>{for(var a;a=_();){try{a.h.call(a.g)}catch(h){b(h)}var d=so;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}ao=!1};function Zn(){this.s=this.s,this.C=this.C}Zn.prototype.s=!1,Zn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Zn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ye(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}Ye.prototype.h=function(){this.defaultPrevented=!0};var ZS=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};c.addEventListener("test",h,d),c.removeEventListener("test",h,d)}catch{}return a}();function co(a,d){if(Ye.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(lt){e:{try{De(d.nodeName);var T=!0;break e}catch{}T=!1}T||(d=null)}}else h=="mouseover"?d=a.fromElement:h=="mouseout"&&(d=a.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:XS[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&co.aa.h.call(this)}}A(co,Ye);var XS={2:"touch",3:"pen",4:"mouse"};co.prototype.h=function(){co.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var uo="closure_listenable_"+(1e6*Math.random()|0),e0=0;function t0(a,d,h,g,T){this.listener=a,this.proxy=null,this.src=d,this.type=h,this.capture=!!g,this.ha=T,this.key=++e0,this.da=this.fa=!1}function rc(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function ic(a){this.src=a,this.g={},this.h=0}ic.prototype.add=function(a,d,h,g,T){var S=a.toString();a=this.g[S],a||(a=this.g[S]=[],this.h++);var N=_d(a,d,g,T);return-1<N?(d=a[N],h||(d.fa=!1)):(d=new t0(d,this.src,S,!!g,T),d.fa=h,a.push(d)),d};function yd(a,d){var h=d.type;if(h in a.g){var g=a.g[h],T=Array.prototype.indexOf.call(g,d,void 0),S;(S=0<=T)&&Array.prototype.splice.call(g,T,1),S&&(rc(d),a.g[h].length==0&&(delete a.g[h],a.h--))}}function _d(a,d,h,g){for(var T=0;T<a.length;++T){var S=a[T];if(!S.da&&S.listener==d&&S.capture==!!h&&S.ha==g)return T}return-1}var vd="closure_lm_"+(1e6*Math.random()|0),wd={};function i_(a,d,h,g,T){if(g&&g.once)return o_(a,d,h,g,T);if(Array.isArray(d)){for(var S=0;S<d.length;S++)i_(a,d[S],h,g,T);return null}return h=Td(h),a&&a[uo]?a.K(d,h,l(g)?!!g.capture:!!g,T):s_(a,d,h,!1,g,T)}function s_(a,d,h,g,T,S){if(!d)throw Error("Invalid event type");var N=l(T)?!!T.capture:!!T,pe=Ed(a);if(pe||(a[vd]=pe=new ic(a)),h=pe.add(d,h,g,N,S),h.proxy)return h;if(g=n0(),h.proxy=g,g.src=a,g.listener=h,a.addEventListener)ZS||(T=N),T===void 0&&(T=!1),a.addEventListener(d.toString(),g,T);else if(a.attachEvent)a.attachEvent(c_(d.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return h}function n0(){function a(h){return d.call(a.src,a.listener,h)}let d=r0;return a}function o_(a,d,h,g,T){if(Array.isArray(d)){for(var S=0;S<d.length;S++)o_(a,d[S],h,g,T);return null}return h=Td(h),a&&a[uo]?a.L(d,h,l(g)?!!g.capture:!!g,T):s_(a,d,h,!0,g,T)}function a_(a,d,h,g,T){if(Array.isArray(d))for(var S=0;S<d.length;S++)a_(a,d[S],h,g,T);else g=l(g)?!!g.capture:!!g,h=Td(h),a&&a[uo]?(a=a.i,d=String(d).toString(),d in a.g&&(S=a.g[d],h=_d(S,h,g,T),-1<h&&(rc(S[h]),Array.prototype.splice.call(S,h,1),S.length==0&&(delete a.g[d],a.h--)))):a&&(a=Ed(a))&&(d=a.g[d.toString()],a=-1,d&&(a=_d(d,h,g,T)),(h=-1<a?d[a]:null)&&Id(h))}function Id(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[uo])yd(d.i,a);else{var h=a.type,g=a.proxy;d.removeEventListener?d.removeEventListener(h,g,a.capture):d.detachEvent?d.detachEvent(c_(h),g):d.addListener&&d.removeListener&&d.removeListener(g),(h=Ed(d))?(yd(h,a),h.h==0&&(h.src=null,d[vd]=null)):rc(a)}}}function c_(a){return a in wd?wd[a]:wd[a]="on"+a}function r0(a,d){if(a.da)a=!0;else{d=new co(d,this);var h=a.listener,g=a.ha||a.src;a.fa&&Id(a),a=h.call(g,d)}return a}function Ed(a){return a=a[vd],a instanceof ic?a:null}var Cd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Td(a){return typeof a=="function"?a:(a[Cd]||(a[Cd]=function(d){return a.handleEvent(d)}),a[Cd])}function Je(){Zn.call(this),this.i=new ic(this),this.M=this,this.F=null}A(Je,Zn),Je.prototype[uo]=!0,Je.prototype.removeEventListener=function(a,d,h,g){a_(this,a,d,h,g)};function st(a,d){var h,g=a.F;if(g)for(h=[];g;g=g.F)h.push(g);if(a=a.M,g=d.type||d,typeof d=="string")d=new Ye(d,a);else if(d instanceof Ye)d.target=d.target||a;else{var T=d;d=new Ye(g,a),w(d,T)}if(T=!0,h)for(var S=h.length-1;0<=S;S--){var N=d.g=h[S];T=sc(N,g,!0,d)&&T}if(N=d.g=a,T=sc(N,g,!0,d)&&T,T=sc(N,g,!1,d)&&T,h)for(S=0;S<h.length;S++)N=d.g=h[S],T=sc(N,g,!1,d)&&T}Je.prototype.N=function(){if(Je.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var h=a.g[d],g=0;g<h.length;g++)rc(h[g]);delete a.g[d],a.h--}}this.F=null},Je.prototype.K=function(a,d,h,g){return this.i.add(String(a),d,!1,h,g)},Je.prototype.L=function(a,d,h,g){return this.i.add(String(a),d,!0,h,g)};function sc(a,d,h,g){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var T=!0,S=0;S<d.length;++S){var N=d[S];if(N&&!N.da&&N.capture==h){var pe=N.listener,ze=N.ha||N.src;N.fa&&yd(a.i,N),T=pe.call(ze,g)!==!1&&T}}return T&&!g.defaultPrevented}function u_(a,d,h){if(typeof a=="function")h&&(a=y(a,h));else if(a&&typeof a.handleEvent=="function")a=y(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:c.setTimeout(a,d||0)}function l_(a){a.g=u_(()=>{a.g=null,a.i&&(a.i=!1,l_(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class i0 extends Zn{constructor(d,h){super(),this.m=d,this.l=h,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:l_(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function lo(a){Zn.call(this),this.h=a,this.g={}}A(lo,Zn);var d_=[];function h_(a){_e(a.g,function(d,h){this.g.hasOwnProperty(h)&&Id(d)},a),a.g={}}lo.prototype.N=function(){lo.aa.N.call(this),h_(this)},lo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bd=c.JSON.stringify,s0=c.JSON.parse,o0=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Dd(){}Dd.prototype.h=null;function f_(a){return a.h||(a.h=a.i())}function p_(){}var ho={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Sd(){Ye.call(this,"d")}A(Sd,Ye);function Ad(){Ye.call(this,"c")}A(Ad,Ye);var Fr={},g_=null;function oc(){return g_=g_||new Je}Fr.La="serverreachability";function m_(a){Ye.call(this,Fr.La,a)}A(m_,Ye);function fo(a){let d=oc();st(d,new m_(d))}Fr.STAT_EVENT="statevent";function y_(a,d){Ye.call(this,Fr.STAT_EVENT,a),this.stat=d}A(y_,Ye);function ot(a){let d=oc();st(d,new y_(d,a))}Fr.Ma="timingevent";function __(a,d){Ye.call(this,Fr.Ma,a),this.size=d}A(__,Ye);function po(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},d)}function go(){this.g=!0}go.prototype.xa=function(){this.g=!1};function a0(a,d,h,g,T,S){a.info(function(){if(a.g)if(S)for(var N="",pe=S.split("&"),ze=0;ze<pe.length;ze++){var ce=pe[ze].split("=");if(1<ce.length){var Ze=ce[0];ce=ce[1];var Xe=Ze.split("_");N=2<=Xe.length&&Xe[1]=="type"?N+(Ze+"="+ce+"&"):N+(Ze+"=redacted&")}}else N=null;else N=S;return"XMLHTTP REQ ("+g+") [attempt "+T+"]: "+d+`
`+h+`
`+N})}function c0(a,d,h,g,T,S,N){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+T+"]: "+d+`
`+h+`
`+S+" "+N})}function xi(a,d,h,g){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+l0(a,h)+(g?" "+g:"")})}function u0(a,d){a.info(function(){return"TIMEOUT: "+d})}go.prototype.info=function(){};function l0(a,d){if(!a.g)return d;if(!d)return null;try{var h=JSON.parse(d);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var g=h[a];if(!(2>g.length)){var T=g[1];if(Array.isArray(T)&&!(1>T.length)){var S=T[0];if(S!="noop"&&S!="stop"&&S!="close")for(var N=1;N<T.length;N++)T[N]=""}}}}return bd(h)}catch{return d}}var ac={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},v_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Rd;function cc(){}A(cc,Dd),cc.prototype.g=function(){return new XMLHttpRequest},cc.prototype.i=function(){return{}},Rd=new cc;function Xn(a,d,h,g){this.j=a,this.i=d,this.l=h,this.R=g||1,this.U=new lo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new w_}function w_(){this.i=null,this.g="",this.h=!1}var I_={},Nd={};function xd(a,d,h){a.L=1,a.v=hc(Nn(d)),a.m=h,a.P=!0,E_(a,null)}function E_(a,d){a.F=Date.now(),uc(a),a.A=Nn(a.v);var h=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),L_(h.i,"t",g),a.C=0,h=a.j.J,a.h=new w_,a.g=ev(a.j,h?d:null,!a.m),0<a.O&&(a.M=new i0(y(a.Y,a,a.g),a.O)),d=a.U,h=a.g,g=a.ca;var T="readystatechange";Array.isArray(T)||(T&&(d_[0]=T.toString()),T=d_);for(var S=0;S<T.length;S++){var N=i_(h,T[S],g||d.handleEvent,!1,d.h||d);if(!N)break;d.g[N.key]=N}d=a.H?m(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),fo(),a0(a.i,a.u,a.A,a.l,a.R,a.m)}Xn.prototype.ca=function(a){a=a.target;let d=this.M;d&&xn(a)==3?d.j():this.Y(a)},Xn.prototype.Y=function(a){try{if(a==this.g)e:{let Xe=xn(this.g);var d=this.g.Ba();let ki=this.g.Z();if(!(3>Xe)&&(Xe!=3||this.g&&(this.h.h||this.g.oa()||H_(this.g)))){this.J||Xe!=4||d==7||(d==8||0>=ki?fo(3):fo(2)),Md(this);var h=this.g.Z();this.X=h;t:if(C_(this)){var g=H_(this.g);a="";var T=g.length,S=xn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Vr(this),mo(this);var N="";break t}this.h.i=new c.TextDecoder}for(d=0;d<T;d++)this.h.h=!0,a+=this.h.i.decode(g[d],{stream:!(S&&d==T-1)});g.length=0,this.h.g+=a,this.C=0,N=this.h.g}else N=this.g.oa();if(this.o=h==200,c0(this.i,this.u,this.A,this.l,this.R,Xe,h),this.o){if(this.T&&!this.K){t:{if(this.g){var pe,ze=this.g;if((pe=ze.g?ze.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!le(pe)){var ce=pe;break t}}ce=null}if(h=ce)xi(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pd(this,h);else{this.o=!1,this.s=3,ot(12),Vr(this),mo(this);break e}}if(this.P){h=!0;let Ht;for(;!this.J&&this.C<N.length;)if(Ht=d0(this,N),Ht==Nd){Xe==4&&(this.s=4,ot(14),h=!1),xi(this.i,this.l,null,"[Incomplete Response]");break}else if(Ht==I_){this.s=4,ot(15),xi(this.i,this.l,N,"[Invalid Chunk]"),h=!1;break}else xi(this.i,this.l,Ht,null),Pd(this,Ht);if(C_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xe!=4||N.length!=0||this.h.h||(this.s=1,ot(16),h=!1),this.o=this.o&&h,!h)xi(this.i,this.l,N,"[Invalid Chunked Response]"),Vr(this),mo(this);else if(0<N.length&&!this.W){this.W=!0;var Ze=this.j;Ze.g==this&&Ze.ba&&!Ze.M&&(Ze.j.info("Great, no buffering proxy detected. Bytes received: "+N.length),Ud(Ze),Ze.M=!0,ot(11))}}else xi(this.i,this.l,N,null),Pd(this,N);Xe==4&&Vr(this),this.o&&!this.J&&(Xe==4?Y_(this.j,this):(this.o=!1,uc(this)))}else A0(this.g),h==400&&0<N.indexOf("Unknown SID")?(this.s=3,ot(12)):(this.s=0,ot(13)),Vr(this),mo(this)}}}catch{}finally{}};function C_(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function d0(a,d){var h=a.C,g=d.indexOf(`
`,h);return g==-1?Nd:(h=Number(d.substring(h,g)),isNaN(h)?I_:(g+=1,g+h>d.length?Nd:(d=d.slice(g,g+h),a.C=g+h,d)))}Xn.prototype.cancel=function(){this.J=!0,Vr(this)};function uc(a){a.S=Date.now()+a.I,T_(a,a.I)}function T_(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=po(y(a.ba,a),d)}function Md(a){a.B&&(c.clearTimeout(a.B),a.B=null)}Xn.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(u0(this.i,this.A),this.L!=2&&(fo(),ot(17)),Vr(this),this.s=2,mo(this)):T_(this,this.S-a)};function mo(a){a.j.G==0||a.J||Y_(a.j,a)}function Vr(a){Md(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,h_(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function Pd(a,d){try{var h=a.j;if(h.G!=0&&(h.g==a||kd(h.h,a))){if(!a.K&&kd(h.h,a)&&h.G==3){try{var g=h.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var T=g;if(T[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)yc(h),gc(h);else break e;Vd(h),ot(18)}}else h.za=T[1],0<h.za-h.T&&37500>T[2]&&h.F&&h.v==0&&!h.C&&(h.C=po(y(h.Za,h),6e3));if(1>=S_(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else jr(h,11)}else if((a.K||h.g==a)&&yc(h),!le(d))for(T=h.Da.g.parse(d),d=0;d<T.length;d++){let ce=T[d];if(h.T=ce[0],ce=ce[1],h.G==2)if(ce[0]=="c"){h.K=ce[1],h.ia=ce[2];let Ze=ce[3];Ze!=null&&(h.la=Ze,h.j.info("VER="+h.la));let Xe=ce[4];Xe!=null&&(h.Aa=Xe,h.j.info("SVER="+h.Aa));let ki=ce[5];ki!=null&&typeof ki=="number"&&0<ki&&(g=1.5*ki,h.L=g,h.j.info("backChannelRequestTimeoutMs_="+g)),g=h;let Ht=a.g;if(Ht){let vc=Ht.g?Ht.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vc){var S=g.h;S.g||vc.indexOf("spdy")==-1&&vc.indexOf("quic")==-1&&vc.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(Od(S,S.h),S.h=null))}if(g.D){let jd=Ht.g?Ht.g.getResponseHeader("X-HTTP-Session-Id"):null;jd&&(g.ya=jd,Ie(g.I,g.D,jd))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),g=h;var N=a;if(g.qa=X_(g,g.J?g.ia:null,g.W),N.K){A_(g.h,N);var pe=N,ze=g.L;ze&&(pe.I=ze),pe.B&&(Md(pe),uc(pe)),g.g=N}else K_(g);0<h.i.length&&mc(h)}else ce[0]!="stop"&&ce[0]!="close"||jr(h,7);else h.G==3&&(ce[0]=="stop"||ce[0]=="close"?ce[0]=="stop"?jr(h,7):Fd(h):ce[0]!="noop"&&h.l&&h.l.ta(ce),h.v=0)}}fo(4)}catch{}}var h0=class{constructor(a,d){this.g=a,this.map=d}};function b_(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function D_(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function S_(a){return a.h?1:a.g?a.g.size:0}function kd(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function Od(a,d){a.g?a.g.add(d):a.h=d}function A_(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}b_.prototype.cancel=function(){if(this.i=R_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function R_(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let h of a.g.values())d=d.concat(h.D);return d}return R(a.i)}function f0(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],h=a.length,g=0;g<h;g++)d.push(a[g]);return d}d=[],h=0;for(g in a)d[h++]=a[g];return d}function p0(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var h=0;h<a;h++)d.push(h);return d}d=[],h=0;for(let g in a)d[h++]=g;return d}}}function N_(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var h=p0(a),g=f0(a),T=g.length,S=0;S<T;S++)d.call(void 0,g[S],h&&h[S],a)}var x_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function g0(a,d){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var g=a[h].indexOf("="),T=null;if(0<=g){var S=a[h].substring(0,g);T=a[h].substring(g+1)}else S=a[h];d(S,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function Ur(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Ur){this.h=a.h,lc(this,a.j),this.o=a.o,this.g=a.g,dc(this,a.s),this.l=a.l;var d=a.i,h=new vo;h.i=d.i,d.g&&(h.g=new Map(d.g),h.h=d.h),M_(this,h),this.m=a.m}else a&&(d=String(a).match(x_))?(this.h=!1,lc(this,d[1]||"",!0),this.o=yo(d[2]||""),this.g=yo(d[3]||"",!0),dc(this,d[4]),this.l=yo(d[5]||"",!0),M_(this,d[6]||"",!0),this.m=yo(d[7]||"")):(this.h=!1,this.i=new vo(null,this.h))}Ur.prototype.toString=function(){var a=[],d=this.j;d&&a.push(_o(d,P_,!0),":");var h=this.g;return(h||d=="file")&&(a.push("//"),(d=this.o)&&a.push(_o(d,P_,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(_o(h,h.charAt(0)=="/"?_0:y0,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",_o(h,w0)),a.join("")};function Nn(a){return new Ur(a)}function lc(a,d,h){a.j=h?yo(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function dc(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function M_(a,d,h){d instanceof vo?(a.i=d,I0(a.i,a.h)):(h||(d=_o(d,v0)),a.i=new vo(d,a.h))}function Ie(a,d,h){a.i.set(d,h)}function hc(a){return Ie(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function yo(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function _o(a,d,h){return typeof a=="string"?(a=encodeURI(a).replace(d,m0),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function m0(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var P_=/[#\/\?@]/g,y0=/[#\?:]/g,_0=/[#\?]/g,v0=/[#\?@]/g,w0=/#/g;function vo(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function er(a){a.g||(a.g=new Map,a.h=0,a.i&&g0(a.i,function(d,h){a.add(decodeURIComponent(d.replace(/\+/g," ")),h)}))}t=vo.prototype,t.add=function(a,d){er(this),this.i=null,a=Mi(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(d),this.h+=1,this};function k_(a,d){er(a),d=Mi(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function O_(a,d){return er(a),d=Mi(a,d),a.g.has(d)}t.forEach=function(a,d){er(this),this.g.forEach(function(h,g){h.forEach(function(T){a.call(d,T,g,this)},this)},this)},t.na=function(){er(this);let a=Array.from(this.g.values()),d=Array.from(this.g.keys()),h=[];for(let g=0;g<d.length;g++){let T=a[g];for(let S=0;S<T.length;S++)h.push(d[g])}return h},t.V=function(a){er(this);let d=[];if(typeof a=="string")O_(this,a)&&(d=d.concat(this.g.get(Mi(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)d=d.concat(a[h])}return d},t.set=function(a,d){return er(this),this.i=null,a=Mi(this,a),O_(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function L_(a,d,h){k_(a,d),0<h.length&&(a.i=null,a.g.set(Mi(a,d),R(h)),a.h+=h.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(var h=0;h<d.length;h++){var g=d[h];let S=encodeURIComponent(String(g)),N=this.V(g);for(g=0;g<N.length;g++){var T=S;N[g]!==""&&(T+="="+encodeURIComponent(String(N[g]))),a.push(T)}}return this.i=a.join("&")};function Mi(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function I0(a,d){d&&!a.j&&(er(a),a.i=null,a.g.forEach(function(h,g){var T=g.toLowerCase();g!=T&&(k_(this,g),L_(this,T,h))},a)),a.j=d}function E0(a,d){let h=new go;if(c.Image){let g=new Image;g.onload=I(tr,h,"TestLoadImage: loaded",!0,d,g),g.onerror=I(tr,h,"TestLoadImage: error",!1,d,g),g.onabort=I(tr,h,"TestLoadImage: abort",!1,d,g),g.ontimeout=I(tr,h,"TestLoadImage: timeout",!1,d,g),c.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else d(!1)}function C0(a,d){let h=new go,g=new AbortController,T=setTimeout(()=>{g.abort(),tr(h,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:g.signal}).then(S=>{clearTimeout(T),S.ok?tr(h,"TestPingServer: ok",!0,d):tr(h,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(T),tr(h,"TestPingServer: error",!1,d)})}function tr(a,d,h,g,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),g(h)}catch{}}function T0(){this.g=new o0}function b0(a,d,h){let g=h||"";try{N_(a,function(T,S){let N=T;l(T)&&(N=bd(T)),d.push(g+S+"="+encodeURIComponent(N))})}catch(T){throw d.push(g+"type="+encodeURIComponent("_badmap")),T}}function wo(a){this.l=a.Ub||null,this.j=a.eb||!1}A(wo,Dd),wo.prototype.g=function(){return new fc(this.l,this.j)},wo.prototype.i=function(a){return function(){return a}}({});function fc(a,d){Je.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(fc,Je),t=fc.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,Eo(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||c).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Io(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Eo(this)),this.g&&(this.readyState=3,Eo(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;F_(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function F_(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?Io(this):Eo(this),this.readyState==3&&F_(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Io(this))},t.Qa=function(a){this.g&&(this.response=a,Io(this))},t.ga=function(){this.g&&Io(this)};function Io(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Eo(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var h=d.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=d.next();return a.join(`\r
`)};function Eo(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(fc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function V_(a){let d="";return _e(a,function(h,g){d+=g,d+=":",d+=h,d+=`\r
`}),d}function Ld(a,d,h){e:{for(g in h){var g=!1;break e}g=!0}g||(h=V_(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):Ie(a,d,h))}function Ae(a){Je.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(Ae,Je);var D0=/^https?$/i,S0=["POST","PUT"];t=Ae.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,h,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Rd.g(),this.v=this.o?f_(this.o):f_(Rd),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(S){U_(this,S);return}if(a=h||"",h=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var T in g)h.set(T,g[T]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let S of g.keys())h.set(S,g.get(S));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(h.keys()).find(S=>S.toLowerCase()=="content-type"),T=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(S0,d,void 0))||g||T||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,N]of h)this.g.setRequestHeader(S,N);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$_(this),this.u=!0,this.g.send(a),this.u=!1}catch(S){U_(this,S)}};function U_(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,j_(a),pc(a)}function j_(a){a.A||(a.A=!0,st(a,"complete"),st(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,st(this,"complete"),st(this,"abort"),pc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pc(this,!0)),Ae.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?B_(this):this.bb())},t.bb=function(){B_(this)};function B_(a){if(a.h&&typeof o<"u"&&(!a.v[1]||xn(a)!=4||a.Z()!=2)){if(a.u&&xn(a)==4)u_(a.Ea,0,a);else if(st(a,"readystatechange"),xn(a)==4){a.h=!1;try{let N=a.Z();e:switch(N){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var h;if(!(h=d)){var g;if(g=N===0){var T=String(a.D).match(x_)[1]||null;!T&&c.self&&c.self.location&&(T=c.self.location.protocol.slice(0,-1)),g=!D0.test(T?T.toLowerCase():"")}h=g}if(h)st(a,"complete"),st(a,"success");else{a.m=6;try{var S=2<xn(a)?a.g.statusText:""}catch{S=""}a.l=S+" ["+a.Z()+"]",j_(a)}}finally{pc(a)}}}}function pc(a,d){if(a.g){$_(a);let h=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||st(a,"ready");try{h.onreadystatechange=g}catch{}}}function $_(a){a.I&&(c.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function xn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<xn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),s0(d)}};function H_(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function A0(a){let d={};a=(a.g&&2<=xn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(le(a[g]))continue;var h=C(a[g]);let T=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let S=d[T]||[];d[T]=S,S.push(h)}E(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Co(a,d,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||d}function q_(a){this.Aa=0,this.i=[],this.j=new go,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Co("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Co("baseRetryDelayMs",5e3,a),this.cb=Co("retryDelaySeedMs",1e4,a),this.Wa=Co("forwardChannelMaxRetries",2,a),this.wa=Co("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new b_(a&&a.concurrentRequestLimit),this.Da=new T0,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=q_.prototype,t.la=8,t.G=1,t.connect=function(a,d,h,g){ot(0),this.W=a,this.H=d||{},h&&g!==void 0&&(this.H.OSID=h,this.H.OAID=g),this.F=this.X,this.I=X_(this,null,this.W),mc(this)};function Fd(a){if(z_(a),a.G==3){var d=a.U++,h=Nn(a.I);if(Ie(h,"SID",a.K),Ie(h,"RID",d),Ie(h,"TYPE","terminate"),To(a,h),d=new Xn(a,a.j,d),d.L=2,d.v=hc(Nn(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(d.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=d.v,h=!0),h||(d.g=ev(d.j,null),d.g.ea(d.v)),d.F=Date.now(),uc(d)}Z_(a)}function gc(a){a.g&&(Ud(a),a.g.cancel(),a.g=null)}function z_(a){gc(a),a.u&&(c.clearTimeout(a.u),a.u=null),yc(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function mc(a){if(!D_(a.h)&&!a.s){a.s=!0;var d=a.Ga;oo||r_(),ao||(oo(),ao=!0),md.add(d,a),a.B=0}}function R0(a,d){return S_(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=po(y(a.Ga,a,d),J_(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let T=new Xn(this,this.j,a),S=this.o;if(this.S&&(S?(S=m(S),w(S,this.S)):S=this.S),this.m!==null||this.O||(T.H=S,S=null),this.P)e:{for(var d=0,h=0;h<this.i.length;h++){t:{var g=this.i[h];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=h;break e}if(d===4096||h===this.i.length-1){d=h+1;break e}}d=1e3}else d=1e3;d=W_(this,T,d),h=Nn(this.I),Ie(h,"RID",a),Ie(h,"CVER",22),this.D&&Ie(h,"X-HTTP-Session-Id",this.D),To(this,h),S&&(this.O?d="headers="+encodeURIComponent(String(V_(S)))+"&"+d:this.m&&Ld(h,this.m,S)),Od(this.h,T),this.Ua&&Ie(h,"TYPE","init"),this.P?(Ie(h,"$req",d),Ie(h,"SID","null"),T.T=!0,xd(T,h,null)):xd(T,h,d),this.G=2}}else this.G==3&&(a?G_(this,a):this.i.length==0||D_(this.h)||G_(this))};function G_(a,d){var h;d?h=d.l:h=a.U++;let g=Nn(a.I);Ie(g,"SID",a.K),Ie(g,"RID",h),Ie(g,"AID",a.T),To(a,g),a.m&&a.o&&Ld(g,a.m,a.o),h=new Xn(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),d&&(a.i=d.D.concat(a.i)),d=W_(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Od(a.h,h),xd(h,g,d)}function To(a,d){a.H&&_e(a.H,function(h,g){Ie(d,g,h)}),a.l&&N_({},function(h,g){Ie(d,g,h)})}function W_(a,d,h){h=Math.min(a.i.length,h);var g=a.l?y(a.l.Na,a.l,a):null;e:{var T=a.i;let S=-1;for(;;){let N=["count="+h];S==-1?0<h?(S=T[0].g,N.push("ofs="+S)):S=0:N.push("ofs="+S);let pe=!0;for(let ze=0;ze<h;ze++){let ce=T[ze].g,Ze=T[ze].map;if(ce-=S,0>ce)S=Math.max(0,T[ze].g-100),pe=!1;else try{b0(Ze,N,"req"+ce+"_")}catch{g&&g(Ze)}}if(pe){g=N.join("&");break e}}}return a=a.i.splice(0,h),d.D=a,g}function K_(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;oo||r_(),ao||(oo(),ao=!0),md.add(d,a),a.v=0}}function Vd(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=po(y(a.Fa,a),J_(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Q_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=po(y(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ot(10),gc(this),Q_(this))};function Ud(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function Q_(a){a.g=new Xn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=Nn(a.qa);Ie(d,"RID","rpc"),Ie(d,"SID",a.K),Ie(d,"AID",a.T),Ie(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ie(d,"TO",a.ja),Ie(d,"TYPE","xmlhttp"),To(a,d),a.m&&a.o&&Ld(d,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=hc(Nn(d)),h.m=null,h.P=!0,E_(h,a)}t.Za=function(){this.C!=null&&(this.C=null,gc(this),Vd(this),ot(19))};function yc(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function Y_(a,d){var h=null;if(a.g==d){yc(a),Ud(a),a.g=null;var g=2}else if(kd(a.h,d))h=d.D,A_(a.h,d),g=1;else return;if(a.G!=0){if(d.o)if(g==1){h=d.m?d.m.length:0,d=Date.now()-d.F;var T=a.B;g=oc(),st(g,new __(g,h)),mc(a)}else K_(a);else if(T=d.s,T==3||T==0&&0<d.X||!(g==1&&R0(a,d)||g==2&&Vd(a)))switch(h&&0<h.length&&(d=a.h,d.i=d.i.concat(h)),T){case 1:jr(a,5);break;case 4:jr(a,10);break;case 3:jr(a,6);break;default:jr(a,2)}}}function J_(a,d){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*d}function jr(a,d){if(a.j.info("Error code "+d),d==2){var h=y(a.fb,a),g=a.Xa;let T=!g;g=new Ur(g||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||lc(g,"https"),hc(g),T?E0(g.toString(),h):C0(g.toString(),h)}else ot(2);a.G=0,a.l&&a.l.sa(d),Z_(a),z_(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function Z_(a){if(a.G=0,a.ka=[],a.l){let d=R_(a.h);(d.length!=0||a.i.length!=0)&&(P(a.ka,d),P(a.ka,a.i),a.h.i.length=0,R(a.i),a.i.length=0),a.l.ra()}}function X_(a,d,h){var g=h instanceof Ur?Nn(h):new Ur(h);if(g.g!="")d&&(g.g=d+"."+g.g),dc(g,g.s);else{var T=c.location;g=T.protocol,d=d?d+"."+T.hostname:T.hostname,T=+T.port;var S=new Ur(null);g&&lc(S,g),d&&(S.g=d),T&&dc(S,T),h&&(S.l=h),g=S}return h=a.D,d=a.ya,h&&d&&Ie(g,h,d),Ie(g,"VER",a.la),To(a,g),g}function ev(a,d,h){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new Ae(new wo({eb:h})):new Ae(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function tv(){}t=tv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function _c(){}_c.prototype.g=function(a,d){return new wt(a,d)};function wt(a,d){Je.call(this),this.g=new q_(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!le(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!le(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new Pi(this)}A(wt,Je),wt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},wt.prototype.close=function(){Fd(this.g)},wt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=bd(a),a=h);d.i.push(new h0(d.Ya++,a)),d.G==3&&mc(d)},wt.prototype.N=function(){this.g.l=null,delete this.j,Fd(this.g),delete this.g,wt.aa.N.call(this)};function nv(a){Sd.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(let h in d){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}A(nv,Sd);function rv(){Ad.call(this),this.status=1}A(rv,Ad);function Pi(a){this.g=a}A(Pi,tv),Pi.prototype.ua=function(){st(this.g,"a")},Pi.prototype.ta=function(a){st(this.g,new nv(a))},Pi.prototype.sa=function(a){st(this.g,new rv)},Pi.prototype.ra=function(){st(this.g,"b")},_c.prototype.createWebChannel=_c.prototype.g,wt.prototype.send=wt.prototype.o,wt.prototype.open=wt.prototype.m,wt.prototype.close=wt.prototype.close,$b=Qn.createWebChannelTransport=function(){return new _c},Bb=Qn.getStatEventTarget=function(){return oc()},jb=Qn.Event=Fr,Ub=Qn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ac.NO_ERROR=0,ac.TIMEOUT=8,ac.HTTP_ERROR=6,Vb=Qn.ErrorCode=ac,v_.COMPLETE="complete",Fb=Qn.EventType=v_,p_.EventType=ho,ho.OPEN="a",ho.CLOSE="b",ho.ERROR="c",ho.MESSAGE="d",Je.prototype.listen=Je.prototype.K,Lb=Qn.WebChannel=p_,Ob=Qn.FetchXmlHttpFactory=wo,Ae.prototype.listenOnce=Ae.prototype.L,Ae.prototype.getLastError=Ae.prototype.Ka,Ae.prototype.getLastErrorCode=Ae.prototype.Ba,Ae.prototype.getStatus=Ae.prototype.Z,Ae.prototype.getResponseJson=Ae.prototype.Oa,Ae.prototype.getResponseText=Ae.prototype.oa,Ae.prototype.send=Ae.prototype.ea,Ae.prototype.setWithCredentials=Ae.prototype.Ha,kb=Qn.XhrIo=Ae}).apply(typeof ql<"u"?ql:typeof self<"u"?self:typeof window<"u"?window:{});var Hb="@firebase/firestore";var He=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};He.UNAUTHENTICATED=new He(null),He.GOOGLE_CREDENTIALS=new He("google-credentials-uid"),He.FIRST_PARTY=new He("first-party-uid"),He.MOCK_USER=new He("mock-user");var Fa="10.12.3";var $s=new wn("@firebase/firestore");function Rt(t,...e){if($s.logLevel<=ae.DEBUG){let n=e.map($m);$s.debug(`Firestore (${Fa}): ${t}`,...n)}}function Bm(t,...e){if($s.logLevel<=ae.ERROR){let n=e.map($m);$s.error(`Firestore (${Fa}): ${t}`,...n)}}function tU(t,...e){if($s.logLevel<=ae.WARN){let n=e.map($m);$s.warn(`Firestore (${Fa}): ${t}`,...n)}}function $m(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function _t(t="Unexpected state"){let e=`FIRESTORE (${Fa}) INTERNAL ASSERTION FAILED: `+t;throw Bm(e),new Error(e)}function La(t,e){t||_t()}var Qe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ve=class extends St{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var kr=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var zl=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Cm=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(He.UNAUTHENTICATED))}shutdown(){}},Tm=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},bm=class{constructor(e){this.t=e,this.currentUser=He.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),s=new kr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new kr,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>D(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},c=u=>{Rt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(Rt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new kr)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Rt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(La(typeof r.accessToken=="string"),new zl(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return La(e===null||typeof e=="string"),new He(e)}},Dm=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=He.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Sm=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Dm(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(He.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Am=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Rm=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&Rt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,Rt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{Rt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):Rt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(La(typeof n.token=="string"),this.R=n.token,new Am(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function nU(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Nm=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=nU(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function Kb(t,e){return t<e?-1:t>e?1:0}var xm=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&_t(),r===void 0?r=e.length-n:r>e.length-n&&_t(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Pr=class t extends xm{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new Ve(Qe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}};var Ci=class t{constructor(e){this.path=e}static fromPath(e){return new t(Pr.fromString(e))}static fromName(e){return new t(Pr.fromString(e).popFirst(5))}static empty(){return new t(Pr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Pr.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Pr(e.slice()))}};var Mm=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Mm.UNKNOWN_ID=-1;function Qb(t){return t.name==="IndexedDbTransactionError"}function rU(t){return t===0&&1/t==-1/0}var iU=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],v6=[...iU,"documentOverlays"],sU=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],oU=sU,w6=[...oU,"indexConfiguration","indexState","indexEntries"];var Hs=class t{constructor(e,n){this.comparator=e,this.root=n||An.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,An.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,An.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bs(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bs(this.root,e,this.comparator,!0)}},Bs=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},An=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw _t();let e=this.left.check();if(e!==this.right.check())throw _t();return e+(this.isRed()?0:1)}};An.EMPTY=null,An.RED=!0,An.BLACK=!1;An.EMPTY=new class{constructor(){this.size=0}get key(){throw _t()}get value(){throw _t()}get color(){throw _t()}get left(){throw _t()}get right(){throw _t()}copy(e,n,r,i,s){return this}insert(e,n,r){return new An(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Gl=class t{constructor(e){this.comparator=e,this.data=new Hs(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Wl(this.data.getIterator())}getIteratorFrom(e){return new Wl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Wl=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Pm=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var qs=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Pm("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Kb(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};qs.EMPTY_BYTE_STRING=new qs("");var aU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cU(t){if(La(!!t),typeof t=="string"){let e=0,n=aU.exec(t);if(La(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Kl(t.seconds),nanos:Kl(t.nanos)}}function Kl(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function uU(t){return typeof t=="string"?qs.fromBase64String(t):qs.fromUint8Array(t)}var km=class{constructor(e,n,r,i,s,o,c,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=l}},Om=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};function lU(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var E6=new Hs(Ci.comparator);var C6=new Hs(Ci.comparator);var T6=new Hs(Ci.comparator),b6=new Gl(Ci.comparator);var D6=new Gl(Kb);var qb,re;(re=qb||(qb={}))[re.OK=0]="OK",re[re.CANCELLED=1]="CANCELLED",re[re.UNKNOWN=2]="UNKNOWN",re[re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",re[re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",re[re.NOT_FOUND=5]="NOT_FOUND",re[re.ALREADY_EXISTS=6]="ALREADY_EXISTS",re[re.PERMISSION_DENIED=7]="PERMISSION_DENIED",re[re.UNAUTHENTICATED=16]="UNAUTHENTICATED",re[re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",re[re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",re[re.ABORTED=10]="ABORTED",re[re.OUT_OF_RANGE=11]="OUT_OF_RANGE",re[re.UNIMPLEMENTED=12]="UNIMPLEMENTED",re[re.INTERNAL=13]="INTERNAL",re[re.UNAVAILABLE=14]="UNAVAILABLE",re[re.DATA_LOSS=15]="DATA_LOSS";var S6=new Im([4294967295,4294967295],0);var Ql=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Kl(e.integerValue));else if("doubleValue"in e){let r=Kl(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),rU(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"&&(r=cU(r)),n.At(`${r.seconds||""}`),n.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(uU(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?lU(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):_t()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),Ci.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Ql.bt=new Ql;var A6=new Uint8Array(0);var Sn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Sn.DEFAULT_COLLECTION_PERCENTILE=10,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sn.DEFAULT=new Sn(41943040,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sn.DISABLED=new Sn(-1,0,0);function Em(){return typeof document<"u"?document:null}var Lm=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&Rt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var Fm=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,c=new t(e,n,o,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ve(Qe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function dU(t,e){if(Bm("AsyncQueue",`${e}: ${t}`),Qb(t))return new Ve(Qe.UNAVAILABLE,`${e}: ${t}`);throw t}var zb,Gb;(Gb=zb||(zb={})).J_="default",Gb.Cache="cache";var Vm=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=He.UNAUTHENTICATED,this.clientId=Nm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>D(this,null,function*(){Rt("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(Rt("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ve(Qe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>D(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=dU(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Yb(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var Wb=new Map;function hU(t,e,n,r){if(e===!0&&r===!0)throw new Ve(Qe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function fU(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":_t()}function pU(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ve(Qe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=fU(t);throw new Ve(Qe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Yl=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ve(Qe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ve(Qe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Yb((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ve(Qe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ve(Qe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ve(Qe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Jl=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yl({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ve(Qe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Ve(Qe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yl(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Cm;switch(r.type){case"firstParty":return new Sm(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ve(Qe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=Wb.get(n);r&&(Rt("ComponentProvider","Removing Datastore"),Wb.delete(n),r.terminate())}(this),Promise.resolve()}};function Jb(t,e,n,r={}){var i;let s=(t=pU(t,Jl))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&tU("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=He.MOCK_USER;else{c=hl(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new Ve(Qe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new He(l)}t._authCredentials=new Tm(new zl(c,u))}}var Um=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Lm(this,"async_queue_retry"),this.hu=()=>{let n=Em();n&&Rt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};let e=Em();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=Em();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new kr;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return D(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!Qb(e))throw e;Rt("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let i=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw Bm("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let i=Fm.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&_t()}verifyOperationInProgress(){}du(){return D(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};var jm=class extends Jl{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new Um}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||gU(this),this._firestoreClient.terminate()}};function Zb(t,e){let n=typeof t=="object"?t:Ar(),r=typeof t=="string"?t:e||"(default)",i=mi(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=dl("firestore");s&&Jb(i,...s)}return i}function gU(t){var e,n,r;let i=t._freezeSettings(),s=function(c,u,l,f){return new km(c,u,l,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Yb(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Vm(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var R6=new RegExp("[~\\*/\\[\\]]");(function(e,n=!0){(function(i){Fa=i})(Tn),En(new yt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),c=new jm(new bm(r.getProvider("auth-internal")),new Rm(r.getProvider("app-check-internal")),function(l,f){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Ve(Qe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Om(l.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),be(Hb,"4.6.4",e),be(Hb,"4.6.4","esm2017")})();var Va=class{constructor(e){return e}},Xb="firestore",Hm=class{constructor(){return Ii(Xb)}};var qm=new V("angularfire2.firestore-instances");function mU(t,e){let n=js(Xb,t,e);return n&&new Va(n)}function yU(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Va(r)}}var _U={provide:Hm,deps:[[new Me,qm]]},vU={provide:Va,useFactory:mU,deps:[[new Me,qm],tn]};function eD(t,...e){return be("angularfire",Wn.full,"fst"),Ot([vU,_U,{provide:qm,useFactory:yU(t),multi:!0,deps:[de,ct,xr,Kn,[new Me,Ei],[new Me,Nr],...e]}])}var tD=Mr(Zb,!0);var nD="@firebase/database",rD="1.0.6";var $y="";function wU(t){$y=t}var Zm=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),$e(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Os(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var Xm=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return vn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var OD=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Zm(e)}}catch{}return new Xm},bi=OD("localStorage"),ey=OD("sessionStorage");var Ks=new wn("@firebase/database"),IU=function(){let t=1;return function(){return t++}}(),LD=function(t){let e=TT(t),n=new ul;n.update(e);let r=n.digest();return ll.encodeByteArray(r)},Ja=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Ja.apply(null,r):typeof r=="object"?e+=$e(r):e+=r,e+=" "}return e},Di=null,iD=!0,EU=function(t,e){x(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Ks.logLevel=ae.VERBOSE,Di=Ks.log.bind(Ks),e&&ey.set("logging_enabled",!0)):typeof t=="function"?Di=t:(Di=null,ey.remove("logging_enabled"))},nt=function(...t){if(iD===!0&&(iD=!1,Di===null&&ey.get("logging_enabled")===!0&&EU(!0)),Di){let e=Ja.apply(null,t);Di(e)}},Za=function(t){return function(...e){nt(t,...e)}},ty=function(...t){let e="FIREBASE INTERNAL ERROR: "+Ja(...t);Ks.error(e)},Jn=function(...t){let e=`FIREBASE FATAL ERROR: ${Ja(...t)}`;throw Ks.error(e),new Error(e)},Nt=function(...t){let e="FIREBASE WARNING: "+Ja(...t);Ks.warn(e)},CU=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Nt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},FD=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},TU=function(t){if(_n()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ys="[MIN_NAME]",Si="[MAX_NAME]",ro=function(t,e){if(t===e)return 0;if(t===Ys||e===Si)return-1;if(e===Ys||t===Si)return 1;{let n=sD(t),r=sD(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},bU=function(t,e){return t===e?0:t<e?-1:1},Ua=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+$e(e))},Hy=function(t){if(typeof t!="object"||t===null)return $e(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=$e(e[r]),n+=":",n+=Hy(t[e[r]]);return n+="}",n},VD=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function $t(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var UD=function(t){x(!FD(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,s,o,c,u;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(c=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=c+r,o=Math.round(t*Math.pow(2,n-c)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(u=n;u;u-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(u=e;u;u-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let f=l.join(""),p="";for(u=0;u<64;u+=8){let y=parseInt(f.substr(u,8),2).toString(16);y.length===1&&(y="0"+y),p=p+y}return p.toLowerCase()},DU=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},SU=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var AU=new RegExp("^-?(0*)\\d{1,10}$"),RU=-2147483648,NU=2147483647,sD=function(t){if(AU.test(t)){let e=Number(t);if(e>=RU&&e<=NU)return e}return null},Xa=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw Nt("Exception was thrown by user callback.",n),e},Math.floor(0))}},xU=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},qa=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var ny=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Nt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var ry=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(nt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Nt(e)}},za=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),Xl="5",jD="v",BD="s",$D="r",HD="f",qD=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,zD="ls",GD="p",iy="ac",WD="websocket",KD="long_polling";var ed=class{constructor(e,n,r,i,s=!1,o="",c=!1,u=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=c,this.isUsingEmulator=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=bi.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&bi.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function MU(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function QD(t,e,n){x(typeof e=="string","typeof type must == string"),x(typeof n=="object","typeof params must == object");let r;if(e===WD)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===KD)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);MU(t)&&(n.ns=t.namespace);let i=[];return $t(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var sy=class{constructor(){this.counters_={}}incrementCounter(e,n=1){vn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return pT(this.counters_)}};var zm={},Gm={};function qy(t){let e=t.toString();return zm[e]||(zm[e]=new sy),zm[e]}function PU(t,e){let n=t.toString();return Gm[n]||(Gm[n]=e()),Gm[n]}var oy=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Xa(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var oD="start",kU="close",OU="pLPCommand",LU="pRTLPCB",YD="id",JD="pw",ZD="ser",FU="cb",VU="seg",UU="ts",jU="d",BU="dframe",XD=1870,eS=30,$U=XD-eS,HU=25e3,qU=3e4,ay=class t{constructor(e,n,r,i,s,o,c){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Za(e),this.stats_=qy(n),this.urlFn=u=>(this.appCheckToken&&(u[iy]=this.appCheckToken),QD(n,KD,u))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new oy(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(qU)),TU(()=>{if(this.isClosed_)return;this.scriptTagHolder=new cy((...s)=>{let[o,c,u,l,f]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===oD)this.id=c,this.password=u;else if(o===kU)c?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(c,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,c]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,c)},()=>{this.onClosed_()},this.urlFn);let r={};r[oD]="t",r[ZD]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[FU]=this.scriptTagHolder.uniqueCallbackIdentifier),r[jD]=Xl,this.transportSessionId&&(r[BD]=this.transportSessionId),this.lastSessionId&&(r[zD]=this.lastSessionId),this.applicationId&&(r[GD]=this.applicationId),this.appCheckToken&&(r[iy]=this.appCheckToken),typeof location<"u"&&location.hostname&&qD.test(location.hostname)&&(r[$D]=HD);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return _n()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!DU()&&!SU()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=$e(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=vg(n),i=VD(r,$U);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(_n())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[BU]="t",r[YD]=e,r[JD]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=$e(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},cy=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,_n())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=IU(),window[OU+this.uniqueCallbackIdentifier]=e,window[LU+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(c){nt("frame writing exception"),c.stack&&nt(c.stack),nt(c)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||nt("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[YD]=this.myID,e[JD]=this.myPW,e[ZD]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+eS+r.length<=XD;){let o=this.pendingSegs.shift();r=r+"&"+VU+i+"="+o.seg+"&"+UU+i+"="+o.ts+"&"+jU+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(HU)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){_n()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{nt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var zU=16384,GU=45e3,td=null;typeof MozWebSocket<"u"?td=MozWebSocket:typeof WebSocket<"u"&&(td=WebSocket);var ja=(()=>{class t{constructor(n,r,i,s,o,c,u){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Za(this.connId),this.stats_=qy(r),this.connURL=t.connectionURL_(r,c,u,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){let c={};return c[jD]=Xl,!_n()&&typeof location<"u"&&location.hostname&&qD.test(location.hostname)&&(c[$D]=HD),r&&(c[BD]=r),i&&(c[zD]=i),s&&(c[iy]=s),o&&(c[GD]=o),QD(n,WD,c)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,bi.set("previous_websocket_failure",!0);try{let i;if(_n()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${Xl}/${$y}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,c=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;c&&(i.proxy={origin:c})}this.mySock=new td(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&td!==null&&!t.forceDisallow_}static previouslyFailed(){return bi.isInMemoryStorage||bi.get("previous_websocket_failure")===!0}markConnectionHealthy(){bi.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Os(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(x(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=$e(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=VD(r,zU);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(GU))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),WU=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[ay,ja]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=ja&&ja.isAvailable(),i=r&&!ja.previouslyFailed();if(n.webSocketOnly&&(r||Nt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[ja];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),KU=6e4,QU=5e3,YU=10*1024,JU=100*1024,Wm="t",aD="d",ZU="s",cD="r",XU="e",uD="o",lD="a",dD="n",hD="p",ej="h",uy=class{constructor(e,n,r,i,s,o,c,u,l,f){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=c,this.onDisconnect_=u,this.onKill_=l,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Za("c:"+this.id+":"),this.transportManager_=new WU(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=qa(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>JU?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>YU?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Wm in e){let n=e[Wm];n===lD?this.upgradeIfSecondaryHealthy_():n===cD?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===uD&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=Ua("t",e),r=Ua("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:hD,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:lD,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:dD,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=Ua("t",e),r=Ua("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=Ua(Wm,e);if(aD in e){let r=e[aD];if(n===ej){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===dD){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===ZU?this.onConnectionShutdown_(r):n===cD?this.onReset_(r):n===XU?ty("Server Error: "+r):n===uD?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ty("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Xl!==r&&Nt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),qa(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(KU))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):qa(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(QU))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:hD,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(bi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var nd=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var rd=class{constructor(e){this.allowedEvents_=e,this.listeners_={},x(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){x(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var id=class t extends rd{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Ia()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return x(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var fD=32,pD=768,ye=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function fe(){return new ye("")}function ie(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Lr(t){return t.pieces_.length-t.pieceNum_}function Te(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ye(t.pieces_,e)}function tS(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function tj(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function nS(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function rS(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ye(e,0)}function qe(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ye)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new ye(n,0)}function X(t){return t.pieceNum_>=t.pieces_.length}function jt(t,e){let n=ie(t),r=ie(e);if(n===null)return e;if(n===r)return jt(Te(t),Te(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function iS(t,e){if(Lr(t)!==Lr(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function rn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Lr(t)>Lr(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var ly=class{constructor(e,n){this.errorPrefix_=n,this.parts_=nS(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Ta(this.parts_[r]);sS(this)}};function nj(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Ta(e),sS(t)}function rj(t){let e=t.parts_.pop();t.byteLength_-=Ta(e),t.parts_.length>0&&(t.byteLength_-=1)}function sS(t){if(t.byteLength_>pD)throw new Error(t.errorPrefix_+"has a key path longer than "+pD+" bytes ("+t.byteLength_+").");if(t.parts_.length>fD)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+fD+") or object contains a cycle "+Ti(t))}function Ti(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var dy=class t extends rd{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return x(e==="visible","Unknown event type: "+e),[this.visible_]}};var Ba=1e3,ij=60*5*1e3,gD=30*1e3,sj=1.3,oj=3e4,aj="server_kill",mD=3,zy=(()=>{class t extends nd{constructor(n,r,i,s,o,c,u,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=c,this.appCheckTokenProvider_=u,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=Za("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ba,this.maxReconnectDelay_=ij,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!_n())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");dy.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&id.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_($e(o)),x(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();let r=new li,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:c=>{let u=c.d;c.s==="ok"?r.resolve(u):r.reject(u)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(n,r,i,s){this.initConnection_();let o=n._queryIdentifier,c=n._path.toString();this.log_("Listen called for "+c+" "+o),this.listens.has(c)||this.listens.set(c,new Map),x(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),x(!this.listens.get(c).has(o),"listen() called twice for same path/queryId.");let u={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(c).set(o,u),this.connected_&&this.sendListen_(u)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},c="q";n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(c,o,u=>{let l=u.d,f=u.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",u),f!=="ok"&&this.removeListen_(i,s),n.onComplete&&n.onComplete(f,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&vn(n,"w")){let i=hi(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Nt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||IT(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=gD)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=wT(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,c=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),x(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);let o={p:n},c="n";s&&(o.q=i,o.t=s),this.sendRequest(c,o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,c=>{s&&setTimeout(()=>{s(c.s,c.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();let c={p:r,d:i};o!==void 0&&(c.h=o),this.outstandingPuts_.push({action:n,request:c,onComplete:s}),this.outstandingPutCount_++;let u=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(u):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+$e(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):ty("Unrecognized action received from server: "+$e(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){x(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ba,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Ba,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>oj&&(this.reconnectDelay_=Ba),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*sj)}this.onConnectStatus_(!1)}establishConnection_(){return D(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,c=!1,u=null,l=function(){u?u.close():(c=!0,i())},f=function(y){x(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(y)};this.realtime_={close:l,sendRequest:f};let p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[y,I]=yield Promise.all([this.authTokenProvider_.getToken(p),this.appCheckTokenProvider_.getToken(p)]);c?nt("getToken() completed but was canceled"):(nt("getToken() completed. Creating connection."),this.authToken_=y&&y.accessToken,this.appCheckToken_=I&&I.token,u=new uy(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,A=>{Nt(A+" ("+this.repoInfo_.toString()+")"),this.interrupt(aj)},o))}catch(y){this.log_("Failed to get token: "+y),c||(this.repoInfo_.nodeAdmin&&Nt(y),l())}}})}interrupt(n){nt("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){nt("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Ea(this.interruptReasons_)&&(this.reconnectDelay_=Ba,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(o=>Hy(o)).join("$"):i="default";let s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let i=new ye(n).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){nt("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=mD&&(this.reconnectDelay_=gD,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){nt("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=mD&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";_n()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+$y.replace(/\./g,"-")]=1,Ia()?n["framework.cordova"]=1:fl()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=id.getInstance().currentlyOnline();return Ea(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),se=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var Js=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new se(Ys,e),i=new se(Ys,n);return this.compare(r,i)!==0}minPost(){return se.MIN}};var Zl,sd=class extends Js{static get __EMPTY_NODE(){return Zl}static set __EMPTY_NODE(e){Zl=e}compare(e,n){return ro(e.name,n.name)}isDefinedOn(e){throw di("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return se.MIN}maxPost(){return new se(Si,Zl)}makePost(e,n){return x(typeof e=="string","KeyIndex indexValue must always be a string."),new se(e,Zl)}toString(){return".key"}},Qs=new sd;var Gs=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},nn=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??Bt.EMPTY_NODE,this.right=o??Bt.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,o=i(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Bt.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return Bt.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),hy=class{copy(e,n,r,i,s){return this}insert(e,n,r){return new nn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Bt=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,nn.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,nn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Gs(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Gs(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Gs(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Gs(this.root_,null,this.comparator_,!0,e)}};Bt.EMPTY_NODE=new hy;function cj(t,e){return ro(t.name,e.name)}function Gy(t,e){return ro(t,e)}var fy;function uj(t){fy=t}var oS=function(t){return typeof t=="number"?"number:"+UD(t):"string:"+t},aS=function(t){if(t.isLeafNode()){let e=t.val();x(typeof e=="string"||typeof e=="number"||typeof e=="object"&&vn(e,".sv"),"Priority must be a string or number.")}else x(t===fy||t.isEmpty(),"priority of unexpected type.");x(t===fy||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var yD,Zs=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,x(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),aS(this.priorityNode_)}static set __childrenNodeConstructor(n){yD=n}static get __childrenNodeConstructor(){return yD}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return X(n)?this:ie(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=ie(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(x(i!==".priority"||Lr(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(Te(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+oS(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=UD(this.value_):n+=this.value_,this.lazyHash_=LD(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(x(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return x(s>=0,"Unknown leaf type: "+r),x(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),cS,uS;function lj(t){cS=t}function dj(t){uS=t}var py=class extends Js{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?ro(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return se.MIN}maxPost(){return new se(Si,new Zs("[PRIORITY-POST]",uS))}makePost(e,n){let r=cS(e);return new se(n,new Zs("[PRIORITY-POST]",r))}toString(){return".priority"}},it=new py;var hj=Math.log(2),gy=class{constructor(e){let n=s=>parseInt(Math.log(s)/hj,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},od=function(t,e,n,r){t.sort(e);let i=function(u,l){let f=l-u,p,y;if(f===0)return null;if(f===1)return p=t[u],y=n?n(p):p,new nn(y,p.node,nn.BLACK,null,null);{let I=parseInt(f/2,10)+u,A=i(u,I),R=i(I+1,l);return p=t[I],y=n?n(p):p,new nn(y,p.node,nn.BLACK,A,R)}},s=function(u){let l=null,f=null,p=t.length,y=function(A,R){let P=p-A,Y=p;p-=A;let le=i(P+1,Y),G=t[P],De=n?n(G):G;I(new nn(De,G.node,R,null,le))},I=function(A){l?(l.left=A,l=A):(f=A,l=A)};for(let A=0;A<u.count;++A){let R=u.nextBitIsOne(),P=Math.pow(2,u.count-(A+1));R?y(P,nn.BLACK):(y(P,nn.BLACK),y(P,nn.RED))}return f},o=new gy(t.length),c=s(o);return new Bt(r||e,c)};var Km,zs={},Xs=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return x(zs&&it,"ChildrenNode.ts has not been loaded"),Km=Km||new t({".priority":zs},{".priority":it}),Km}get(e){let n=hi(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Bt?n:null}hasIndex(e){return vn(this.indexSet_,e.toString())}addIndex(e,n){x(e!==Qs,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=n.getIterator(se.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let c;i?c=od(r,e.getCompare()):c=zs;let u=e.toString(),l=Object.assign({},this.indexSet_);l[u]=e;let f=Object.assign({},this.indexes_);return f[u]=c,new t(f,l)}addToIndexes(e,n){let r=Ca(this.indexes_,(i,s)=>{let o=hi(this.indexSet_,s);if(x(o,"Missing index implementation for "+s),i===zs)if(o.isDefinedOn(e.node)){let c=[],u=n.getIterator(se.Wrap),l=u.getNext();for(;l;)l.name!==e.name&&c.push(l),l=u.getNext();return c.push(e),od(c,o.getCompare())}else return zs;else{let c=n.get(e.name),u=i;return c&&(u=u.remove(new se(e.name,c))),u.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=Ca(this.indexes_,i=>{if(i===zs)return i;{let s=n.get(e.name);return s?i.remove(new se(e.name,s)):i}});return new t(r,this.indexSet_)}};var $a,Se=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&aS(this.priorityNode_),this.children_.isEmpty()&&x(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return $a||($a=new t(new Bt(Gy),null,Xs.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||$a}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?$a:r}}getChild(n){let r=ie(n);return r===null?this:this.getImmediateChild(r).getChild(Te(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(x(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new se(n,r),s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));let c=s.isEmpty()?$a:this.priorityNode_;return new t(s,c,o)}}updateChild(n,r){let i=ie(n);if(i===null)return r;{x(ie(n)!==".priority"||Lr(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(Te(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(it,(c,u)=>{r[c]=u.val(n),i++,o&&t.INTEGER_REGEXP_.test(c)?s=Math.max(s,Number(c)):o=!1}),!n&&o&&s<2*i){let c=[];for(let u in r)c[u]=r[u];return c}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+oS(this.getPriority().val())+":"),this.forEachChild(it,(r,i)=>{let s=i.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":LD(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new se(n,r));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new se(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new se(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,se.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,se.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===ec?-1:0}withIndex(n){if(n===Qs||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===Qs||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(it),s=r.getIterator(it),o=i.getNext(),c=s.getNext();for(;o&&c;){if(o.name!==c.name||!o.node.equals(c.node))return!1;o=i.getNext(),c=s.getNext()}return o===null&&c===null}else return!1;else return!1}}resolveIndex_(n){return n===Qs?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),my=class extends Se{constructor(){super(new Bt(Gy),Se.EMPTY_NODE,Xs.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Se.EMPTY_NODE}isEmpty(){return!1}},ec=new my;Object.defineProperties(se,{MIN:{value:new se(Ys,Se.EMPTY_NODE)},MAX:{value:new se(Si,ec)}});sd.__EMPTY_NODE=Se.EMPTY_NODE;Zs.__childrenNodeConstructor=Se;uj(ec);dj(ec);var fj=!0;function rt(t,e=null){if(t===null)return Se.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),x(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new Zs(n,rt(e))}if(!(t instanceof Array)&&fj){let n=[],r=!1;if($t(t,(o,c)=>{if(o.substring(0,1)!=="."){let u=rt(c);u.isEmpty()||(r=r||!u.getPriority().isEmpty(),n.push(new se(o,u)))}}),n.length===0)return Se.EMPTY_NODE;let s=od(n,cj,o=>o.name,Gy);if(r){let o=od(n,it.getCompare());return new Se(s,rt(e),new Xs({".priority":o},{".priority":it}))}else return new Se(s,rt(e),Xs.Default)}else{let n=Se.EMPTY_NODE;return $t(t,(r,i)=>{if(vn(t,r)&&r.substring(0,1)!=="."){let s=rt(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(rt(e))}}lj(rt);var yy=class extends Js{constructor(e){super(),this.indexPath_=e,x(!X(e)&&ie(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?ro(e.name,n.name):s}makePost(e,n){let r=rt(e),i=Se.EMPTY_NODE.updateChild(this.indexPath_,r);return new se(n,i)}maxPost(){let e=Se.EMPTY_NODE.updateChild(this.indexPath_,ec);return new se(Si,e)}toString(){return nS(this.indexPath_,0).join("/")}};var _y=class extends Js{compare(e,n){let r=e.node.compareTo(n.node);return r===0?ro(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return se.MIN}maxPost(){return se.MAX}makePost(e,n){let r=rt(e);return new se(n,r)}toString(){return".value"}},pj=new _y;function gj(t){return{type:"value",snapshotNode:t}}function mj(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function yj(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function _D(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function _j(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var vy=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=it}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return x(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return x(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ys}hasEnd(){return this.endSet_}getIndexEndValue(){return x(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return x(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Si}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return x(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===it}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function vD(t){let e={};if(t.isDefault())return e;let n;if(t.index_===it?n="$priority":t.index_===pj?n="$value":t.index_===Qs?n="$key":(x(t.index_ instanceof yy,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=$e(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=$e(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+$e(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=$e(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+$e(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function wD(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==it&&(e.i=t.index_.toString()),e}var wy=class t extends nd{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Za("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(x(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,r),c={};this.listens_[o]=c;let u=vD(e._queryParams);this.restRequest_(s+".json",u,(l,f)=>{let p=f;if(l===404&&(p=null,l=null),l===null&&this.onDataUpdate_(s,p,!1,r),hi(this.listens_,o)===c){let y;l?l===401?y="permission_denied":y="rest_error:"+l:y="ok",i(y,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=vD(e._queryParams),r=e._path.toString(),i=new li;return this.restRequest_(r+".json",n,(s,o)=>{let c=o;s===404&&(c=null,s=null),s===null?(this.onDataUpdate_(r,c,!1,null),i.resolve(c)):i.reject(new Error(c))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Dr(n);this.log_("Sending REST request for "+o);let c=new XMLHttpRequest;c.onreadystatechange=()=>{if(r&&c.readyState===4){this.log_("REST Response for "+o+" received. status:",c.status,"response:",c.responseText);let u=null;if(c.status>=200&&c.status<300){try{u=Os(c.responseText)}catch{Nt("Failed to parse JSON response for "+o+": "+c.responseText)}r(null,u)}else c.status!==401&&c.status!==404&&Nt("Got unsuccessful REST response for "+o+" Status: "+c.status),r(c.status);r=null}},c.open("GET",o,!0),c.send()})}};var Iy=class{constructor(){this.rootNode_=Se.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function ad(){return{value:null,children:new Map}}function lS(t,e,n){if(X(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=ie(e);t.children.has(r)||t.children.set(r,ad());let i=t.children.get(r);e=Te(e),lS(i,e,n)}}function Ey(t,e,n){t.value!==null?n(e,t.value):vj(t,(r,i)=>{let s=new ye(e.toString()+"/"+r);Ey(i,s,n)})}function vj(t,e){t.children.forEach((n,r)=>{e(r,n)})}var Cy=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&$t(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var ID=10*1e3,wj=30*1e3,Ij=5*60*1e3,Ty=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Cy(e);let r=ID+(wj-ID)*Math.random();qa(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;$t(e,(i,s)=>{s>0&&vn(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),qa(this.reportStats_.bind(this),Math.floor(Math.random()*2*Ij))}};var Yn=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Yn||{});function dS(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function hS(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function fS(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var by=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Yn.ACK_USER_WRITE,this.source=dS()}operationForChild(e){if(X(this.path)){if(this.affectedTree.value!=null)return x(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new ye(e));return new t(fe(),n,this.revert)}}else return x(ie(this.path)===e,"operationForChild called for unrelated child."),new t(Te(this.path),this.affectedTree,this.revert)}};var eo=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Yn.OVERWRITE}operationForChild(e){return X(this.path)?new t(this.source,fe(),this.snap.getImmediateChild(e)):new t(this.source,Te(this.path),this.snap)}};var cd=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Yn.MERGE}operationForChild(e){if(X(this.path)){let n=this.children.subtree(new ye(e));return n.isEmpty()?null:n.value?new eo(this.source,fe(),n.value):new t(this.source,fe(),n)}else return x(ie(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,Te(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Ka=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(X(e))return this.isFullyInitialized()&&!this.filtered_;let n=ie(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function Ej(t,e,n,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(_j(o.childName,o.snapshotNode))}),Ha(t,i,"child_removed",e,r,n),Ha(t,i,"child_added",e,r,n),Ha(t,i,"child_moved",s,r,n),Ha(t,i,"child_changed",e,r,n),Ha(t,i,"value",e,r,n),i}function Ha(t,e,n,r,i,s){let o=r.filter(c=>c.type===n);o.sort((c,u)=>Tj(t,c,u)),o.forEach(c=>{let u=Cj(t,c,s);i.forEach(l=>{l.respondsTo(c.type)&&e.push(l.createEvent(u,t.query_))})})}function Cj(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Tj(t,e,n){if(e.childName==null||n.childName==null)throw di("Should only compare child_ events.");let r=new se(e.childName,e.snapshotNode),i=new se(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function pS(t,e){return{eventCache:t,serverCache:e}}function Ga(t,e,n,r){return pS(new Ka(e,n,r),t.serverCache)}function gS(t,e,n,r){return pS(t.eventCache,new Ka(e,n,r))}function Dy(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ai(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Qm,bj=()=>(Qm||(Qm=new Bt(bU)),Qm),vt=class t{constructor(e,n=bj()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return $t(e,(r,i)=>{n=n.set(new ye(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:fe(),value:this.value};if(X(e))return null;{let r=ie(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(Te(e),n);return s!=null?{path:qe(new ye(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(X(e))return this;{let n=ie(e),r=this.children.get(n);return r!==null?r.subtree(Te(e)):new t(null)}}set(e,n){if(X(e))return new t(n,this.children);{let r=ie(e),s=(this.children.get(r)||new t(null)).set(Te(e),n),o=this.children.insert(r,s);return new t(this.value,o)}}remove(e){if(X(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=ie(e),r=this.children.get(n);if(r){let i=r.remove(Te(e)),s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(X(e))return this.value;{let n=ie(e),r=this.children.get(n);return r?r.get(Te(e)):null}}setTree(e,n){if(X(e))return n;{let r=ie(e),s=(this.children.get(r)||new t(null)).setTree(Te(e),n),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new t(this.value,o)}}fold(e){return this.fold_(fe(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(qe(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,fe(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(X(e))return null;{let s=ie(e),o=this.children.get(s);return o?o.findOnPath_(Te(e),qe(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,fe(),n)}foreachOnPath_(e,n,r){if(X(e))return this;{this.value&&r(n,this.value);let i=ie(e),s=this.children.get(i);return s?s.foreachOnPath_(Te(e),qe(n,i),r):new t(null)}}foreach(e){this.foreach_(fe(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(qe(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var sn=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new vt(null))}};function Wa(t,e,n){if(X(e))return new sn(new vt(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=jt(i,e);return s=s.updateChild(o,n),new sn(t.writeTree_.set(i,s))}else{let i=new vt(n),s=t.writeTree_.setTree(e,i);return new sn(s)}}}function ED(t,e,n){let r=t;return $t(n,(i,s)=>{r=Wa(r,qe(e,i),s)}),r}function CD(t,e){if(X(e))return sn.empty();{let n=t.writeTree_.setTree(e,new vt(null));return new sn(n)}}function Sy(t,e){return Ri(t,e)!=null}function Ri(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(jt(n.path,e)):null}function TD(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(it,(r,i)=>{e.push(new se(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new se(r,i.value))}),e}function Or(t,e){if(X(e))return t;{let n=Ri(t,e);return n!=null?new sn(new vt(n)):new sn(t.writeTree_.subtree(e))}}function Ay(t){return t.writeTree_.isEmpty()}function to(t,e){return mS(fe(),t.writeTree_,e)}function mS(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(x(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=mS(qe(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(qe(t,".priority"),r)),n}}function yS(t,e){return ES(e,t)}function Dj(t,e,n,r,i){x(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Wa(t.visibleWrites,e,n)),t.lastWriteId=r}function Sj(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function Aj(t,e){let n=t.allWrites.findIndex(c=>c.writeId===e);x(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){let c=t.allWrites[o];c.visible&&(o>=n&&Rj(c,r.path)?i=!1:rn(r.path,c.path)&&(s=!0)),o--}if(i){if(s)return Nj(t),!0;if(r.snap)t.visibleWrites=CD(t.visibleWrites,r.path);else{let c=r.children;$t(c,u=>{t.visibleWrites=CD(t.visibleWrites,qe(r.path,u))})}return!0}else return!1}function Rj(t,e){if(t.snap)return rn(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&rn(qe(t.path,n),e))return!0;return!1}function Nj(t){t.visibleWrites=_S(t.allWrites,xj,fe()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function xj(t){return t.visible}function _S(t,e,n){let r=sn.empty();for(let i=0;i<t.length;++i){let s=t[i];if(e(s)){let o=s.path,c;if(s.snap)rn(n,o)?(c=jt(n,o),r=Wa(r,c,s.snap)):rn(o,n)&&(c=jt(o,n),r=Wa(r,fe(),s.snap.getChild(c)));else if(s.children){if(rn(n,o))c=jt(n,o),r=ED(r,c,s.children);else if(rn(o,n))if(c=jt(o,n),X(c))r=ED(r,fe(),s.children);else{let u=hi(s.children,ie(c));if(u){let l=u.getChild(Te(c));r=Wa(r,fe(),l)}}}else throw di("WriteRecord should have .snap or .children")}}return r}function vS(t,e,n,r,i){if(!r&&!i){let s=Ri(t.visibleWrites,e);if(s!=null)return s;{let o=Or(t.visibleWrites,e);if(Ay(o))return n;if(n==null&&!Sy(o,fe()))return null;{let c=n||Se.EMPTY_NODE;return to(o,c)}}}else{let s=Or(t.visibleWrites,e);if(!i&&Ay(s))return n;if(!i&&n==null&&!Sy(s,fe()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(rn(l.path,e)||rn(e,l.path))},c=_S(t.allWrites,o,e),u=n||Se.EMPTY_NODE;return to(c,u)}}}function Mj(t,e,n){let r=Se.EMPTY_NODE,i=Ri(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(it,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){let s=Or(t.visibleWrites,e);return n.forEachChild(it,(o,c)=>{let u=to(Or(s,new ye(o)),c);r=r.updateImmediateChild(o,u)}),TD(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=Or(t.visibleWrites,e);return TD(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Pj(t,e,n,r,i){x(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=qe(e,n);if(Sy(t.visibleWrites,s))return null;{let o=Or(t.visibleWrites,s);return Ay(o)?i.getChild(n):to(o,i.getChild(n))}}function kj(t,e,n,r){let i=qe(e,n),s=Ri(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){let o=Or(t.visibleWrites,i);return to(o,r.getNode().getImmediateChild(n))}else return null}function Oj(t,e){return Ri(t.visibleWrites,e)}function Lj(t,e,n,r,i,s,o){let c,u=Or(t.visibleWrites,e),l=Ri(u,fe());if(l!=null)c=l;else if(n!=null)c=to(u,n);else return[];if(c=c.withIndex(o),!c.isEmpty()&&!c.isLeafNode()){let f=[],p=o.getCompare(),y=s?c.getReverseIteratorFrom(r,o):c.getIteratorFrom(r,o),I=y.getNext();for(;I&&f.length<i;)p(I,r)!==0&&f.push(I),I=y.getNext();return f}else return[]}function Fj(){return{visibleWrites:sn.empty(),allWrites:[],lastWriteId:-1}}function Ry(t,e,n,r){return vS(t.writeTree,t.treePath,e,n,r)}function wS(t,e){return Mj(t.writeTree,t.treePath,e)}function bD(t,e,n,r){return Pj(t.writeTree,t.treePath,e,n,r)}function ud(t,e){return Oj(t.writeTree,qe(t.treePath,e))}function Vj(t,e,n,r,i,s){return Lj(t.writeTree,t.treePath,e,n,r,i,s)}function Wy(t,e,n){return kj(t.writeTree,t.treePath,e,n)}function IS(t,e){return ES(qe(t.treePath,e),t.writeTree)}function ES(t,e){return{treePath:t,writeTree:e}}var Ny=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;x(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),x(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,_D(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,yj(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,mj(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,_D(r,e.snapshotNode,i.oldSnap));else throw di("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var xy=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},CS=new xy,Qa=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Ka(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Wy(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ai(this.viewCache_),s=Vj(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}};function Uj(t,e){x(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),x(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function jj(t,e,n,r,i){let s=new Ny,o,c;if(n.type===Yn.OVERWRITE){let l=n;l.source.fromUser?o=My(t,e,l.path,l.snap,r,i,s):(x(l.source.fromServer,"Unknown source."),c=l.source.tagged||e.serverCache.isFiltered()&&!X(l.path),o=ld(t,e,l.path,l.snap,r,i,c,s))}else if(n.type===Yn.MERGE){let l=n;l.source.fromUser?o=$j(t,e,l.path,l.children,r,i,s):(x(l.source.fromServer,"Unknown source."),c=l.source.tagged||e.serverCache.isFiltered(),o=Py(t,e,l.path,l.children,r,i,c,s))}else if(n.type===Yn.ACK_USER_WRITE){let l=n;l.revert?o=zj(t,e,l.path,r,i,s):o=Hj(t,e,l.path,l.affectedTree,r,i,s)}else if(n.type===Yn.LISTEN_COMPLETE)o=qj(t,e,n.path,r,s);else throw di("Unknown operation type: "+n.type);let u=s.getChanges();return Bj(e,o,u),{viewCache:o,changes:u}}function Bj(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Dy(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(gj(Dy(e)))}}function TS(t,e,n,r,i,s){let o=e.eventCache;if(ud(r,n)!=null)return e;{let c,u;if(X(n))if(x(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=Ai(e),f=l instanceof Se?l:Se.EMPTY_NODE,p=wS(r,f);c=t.filter.updateFullNode(e.eventCache.getNode(),p,s)}else{let l=Ry(r,Ai(e));c=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=ie(n);if(l===".priority"){x(Lr(n)===1,"Can't have a priority with additional path components");let f=o.getNode();u=e.serverCache.getNode();let p=bD(r,n,f,u);p!=null?c=t.filter.updatePriority(f,p):c=o.getNode()}else{let f=Te(n),p;if(o.isCompleteForChild(l)){u=e.serverCache.getNode();let y=bD(r,n,o.getNode(),u);y!=null?p=o.getNode().getImmediateChild(l).updateChild(f,y):p=o.getNode().getImmediateChild(l)}else p=Wy(r,l,e.serverCache);p!=null?c=t.filter.updateChild(o.getNode(),l,p,f,i,s):c=o.getNode()}}return Ga(e,c,o.isFullyInitialized()||X(n),t.filter.filtersNodes())}}function ld(t,e,n,r,i,s,o,c){let u=e.serverCache,l,f=o?t.filter:t.filter.getIndexedFilter();if(X(n))l=f.updateFullNode(u.getNode(),r,null);else if(f.filtersNodes()&&!u.isFiltered()){let I=u.getNode().updateChild(n,r);l=f.updateFullNode(u.getNode(),I,null)}else{let I=ie(n);if(!u.isCompleteForPath(n)&&Lr(n)>1)return e;let A=Te(n),P=u.getNode().getImmediateChild(I).updateChild(A,r);I===".priority"?l=f.updatePriority(u.getNode(),P):l=f.updateChild(u.getNode(),I,P,A,CS,null)}let p=gS(e,l,u.isFullyInitialized()||X(n),f.filtersNodes()),y=new Qa(i,p,s);return TS(t,p,n,i,y,c)}function My(t,e,n,r,i,s,o){let c=e.eventCache,u,l,f=new Qa(i,e,s);if(X(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),u=Ga(e,l,!0,t.filter.filtersNodes());else{let p=ie(n);if(p===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),u=Ga(e,l,c.isFullyInitialized(),c.isFiltered());else{let y=Te(n),I=c.getNode().getImmediateChild(p),A;if(X(y))A=r;else{let R=f.getCompleteChild(p);R!=null?tS(y)===".priority"&&R.getChild(rS(y)).isEmpty()?A=R:A=R.updateChild(y,r):A=Se.EMPTY_NODE}if(I.equals(A))u=e;else{let R=t.filter.updateChild(c.getNode(),p,A,y,f,o);u=Ga(e,R,c.isFullyInitialized(),t.filter.filtersNodes())}}}return u}function DD(t,e){return t.eventCache.isCompleteForChild(e)}function $j(t,e,n,r,i,s,o){let c=e;return r.foreach((u,l)=>{let f=qe(n,u);DD(e,ie(f))&&(c=My(t,c,f,l,i,s,o))}),r.foreach((u,l)=>{let f=qe(n,u);DD(e,ie(f))||(c=My(t,c,f,l,i,s,o))}),c}function SD(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Py(t,e,n,r,i,s,o,c){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u=e,l;X(n)?l=r:l=new vt(null).setTree(n,r);let f=e.serverCache.getNode();return l.children.inorderTraversal((p,y)=>{if(f.hasChild(p)){let I=e.serverCache.getNode().getImmediateChild(p),A=SD(t,I,y);u=ld(t,u,new ye(p),A,i,s,o,c)}}),l.children.inorderTraversal((p,y)=>{let I=!e.serverCache.isCompleteForChild(p)&&y.value===null;if(!f.hasChild(p)&&!I){let A=e.serverCache.getNode().getImmediateChild(p),R=SD(t,A,y);u=ld(t,u,new ye(p),R,i,s,o,c)}}),u}function Hj(t,e,n,r,i,s,o){if(ud(i,n)!=null)return e;let c=e.serverCache.isFiltered(),u=e.serverCache;if(r.value!=null){if(X(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return ld(t,e,n,u.getNode().getChild(n),i,s,c,o);if(X(n)){let l=new vt(null);return u.getNode().forEachChild(Qs,(f,p)=>{l=l.set(new ye(f),p)}),Py(t,e,n,l,i,s,c,o)}else return e}else{let l=new vt(null);return r.foreach((f,p)=>{let y=qe(n,f);u.isCompleteForPath(y)&&(l=l.set(f,u.getNode().getChild(y)))}),Py(t,e,n,l,i,s,c,o)}}function qj(t,e,n,r,i){let s=e.serverCache,o=gS(e,s.getNode(),s.isFullyInitialized()||X(n),s.isFiltered());return TS(t,o,n,r,CS,i)}function zj(t,e,n,r,i,s){let o;if(ud(r,n)!=null)return e;{let c=new Qa(r,e,i),u=e.eventCache.getNode(),l;if(X(n)||ie(n)===".priority"){let f;if(e.serverCache.isFullyInitialized())f=Ry(r,Ai(e));else{let p=e.serverCache.getNode();x(p instanceof Se,"serverChildren would be complete if leaf node"),f=wS(r,p)}f=f,l=t.filter.updateFullNode(u,f,s)}else{let f=ie(n),p=Wy(r,f,e.serverCache);p==null&&e.serverCache.isCompleteForChild(f)&&(p=u.getImmediateChild(f)),p!=null?l=t.filter.updateChild(u,f,p,Te(n),c,s):e.eventCache.getNode().hasChild(f)?l=t.filter.updateChild(u,f,Se.EMPTY_NODE,Te(n),c,s):l=u,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Ry(r,Ai(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||ud(r,fe())!=null,Ga(e,l,o,t.filter.filtersNodes())}}function Gj(t,e){let n=Ai(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!X(e)&&!n.getImmediateChild(ie(e)).isEmpty())?n.getChild(e):null}function AD(t,e,n,r){e.type===Yn.MERGE&&e.source.queryId!==null&&(x(Ai(t.viewCache_),"We should always have a full cache before handling merges"),x(Dy(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,s=jj(t.processor_,i,e,n,r);return Uj(t.processor_,s.viewCache),x(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,Wj(t,s.changes,s.viewCache.eventCache.getNode(),null)}function Wj(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return Ej(t.eventGenerator_,e,n,i)}var RD;function Kj(t){x(!RD,"__referenceConstructor has already been defined"),RD=t}function Ky(t,e,n,r){let i=e.source.queryId;if(i!==null){let s=t.views.get(i);return x(s!=null,"SyncTree gave us an op for an invalid query."),AD(s,e,n,r)}else{let s=[];for(let o of t.views.values())s=s.concat(AD(o,e,n,r));return s}}function Qy(t,e){let n=null;for(let r of t.views.values())n=n||Gj(r,e);return n}var ND;function Qj(t){x(!ND,"__referenceConstructor has already been defined"),ND=t}var dd=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new vt(null),this.pendingWriteTree_=Fj(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function Yj(t,e,n,r,i){return Dj(t.pendingWriteTree_,e,n,r,i),i?fd(t,new eo(dS(),e,n)):[]}function Ws(t,e,n=!1){let r=Sj(t.pendingWriteTree_,e);if(Aj(t.pendingWriteTree_,e)){let s=new vt(null);return r.snap!=null?s=s.set(fe(),!0):$t(r.children,o=>{s=s.set(new ye(o),!0)}),fd(t,new by(r.path,s,n))}else return[]}function hd(t,e,n){return fd(t,new eo(hS(),e,n))}function Jj(t,e,n){let r=vt.fromObject(n);return fd(t,new cd(hS(),e,r))}function Zj(t,e,n,r){let i=AS(t,r);if(i!=null){let s=RS(i),o=s.path,c=s.queryId,u=jt(o,e),l=new eo(fS(c),u,n);return NS(t,o,l)}else return[]}function Xj(t,e,n,r){let i=AS(t,r);if(i){let s=RS(i),o=s.path,c=s.queryId,u=jt(o,e),l=vt.fromObject(n),f=new cd(fS(c),u,l);return NS(t,o,f)}else return[]}function bS(t,e,n){let i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,c)=>{let u=jt(o,e),l=Qy(c,u);if(l)return l});return vS(i,e,s,n,!0)}function fd(t,e){return DS(e,t.syncPointTree_,null,yS(t.pendingWriteTree_,fe()))}function DS(t,e,n,r){if(X(t.path))return SS(t,e,n,r);{let i=e.get(fe());n==null&&i!=null&&(n=Qy(i,fe()));let s=[],o=ie(t.path),c=t.operationForChild(o),u=e.children.get(o);if(u&&c){let l=n?n.getImmediateChild(o):null,f=IS(r,o);s=s.concat(DS(c,u,l,f))}return i&&(s=s.concat(Ky(i,t,r,n))),s}}function SS(t,e,n,r){let i=e.get(fe());n==null&&i!=null&&(n=Qy(i,fe()));let s=[];return e.children.inorderTraversal((o,c)=>{let u=n?n.getImmediateChild(o):null,l=IS(r,o),f=t.operationForChild(o);f&&(s=s.concat(SS(f,c,u,l)))}),i&&(s=s.concat(Ky(i,t,r,n))),s}function AS(t,e){return t.tagToQueryMap.get(e)}function RS(t){let e=t.indexOf("$");return x(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ye(t.substr(0,e))}}function NS(t,e,n){let r=t.syncPointTree_.get(e);x(r,"Missing sync point for query tag that we're tracking");let i=yS(t.pendingWriteTree_,e);return Ky(r,n,i,null)}var ky=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},Oy=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=qe(this.path_,e);return new t(this.syncTree_,n)}node(){return bS(this.syncTree_,this.path_)}},e2=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},xD=function(t,e,n){if(!t||typeof t!="object")return t;if(x(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return t2(t[".sv"],e,n);if(typeof t[".sv"]=="object")return n2(t[".sv"],e);x(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},t2=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:x(!1,"Unexpected server value: "+t)}},n2=function(t,e,n){t.hasOwnProperty("increment")||x(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&x(!1,"Unexpected increment value: "+r);let i=e.node();if(x(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},r2=function(t,e,n,r){return Yy(e,new Oy(n,t),r)},i2=function(t,e,n){return Yy(t,new ky(e),n)};function Yy(t,e,n){let r=t.getPriority().val(),i=xD(r,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,c=xD(o.getValue(),e,n);return c!==o.getValue()||i!==o.getPriority().val()?new Zs(c,rt(i)):t}else{let o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Zs(i))),o.forEachChild(it,(c,u)=>{let l=Yy(u,e.getImmediateChild(c),n);l!==u&&(s=s.updateImmediateChild(c,l))}),s}}var Ya=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function Jy(t,e){let n=e instanceof ye?e:new ye(e),r=t,i=ie(n);for(;i!==null;){let s=hi(r.node.children,i)||{children:{},childCount:0};r=new Ya(i,r,s),n=Te(n),i=ie(n)}return r}function io(t){return t.node.value}function xS(t,e){t.node.value=e,Ly(t)}function MS(t){return t.node.childCount>0}function s2(t){return io(t)===void 0&&!MS(t)}function pd(t,e){$t(t.node.children,(n,r)=>{e(new Ya(n,t,r))})}function PS(t,e,n,r){n&&!r&&e(t),pd(t,i=>{PS(i,e,!0,r)}),n&&r&&e(t)}function o2(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function tc(t){return new ye(t.parent===null?t.name:tc(t.parent)+"/"+t.name)}function Ly(t){t.parent!==null&&a2(t.parent,t.name,t)}function a2(t,e,n){let r=s2(n),i=vn(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Ly(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Ly(t))}var c2=/[\[\].#$\/\u0000-\u001F\u007F]/,u2=/[\[\].#$\u0000-\u001F\u007F]/,Ym=10*1024*1024,kS=function(t){return typeof t=="string"&&t.length!==0&&!c2.test(t)},l2=function(t){return typeof t=="string"&&t.length!==0&&!u2.test(t)},d2=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),l2(t)};var OS=function(t,e,n){let r=n instanceof ye?new ly(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Ti(r));if(typeof e=="function")throw new Error(t+"contains a function "+Ti(r)+" with contents = "+e.toString());if(FD(e))throw new Error(t+"contains "+e.toString()+" "+Ti(r));if(typeof e=="string"&&e.length>Ym/3&&Ta(e)>Ym)throw new Error(t+"contains a string greater than "+Ym+" utf8 bytes "+Ti(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if($t(e,(o,c)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!kS(o)))throw new Error(t+" contains an invalid key ("+o+") "+Ti(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);nj(r,o),OS(t,c,r),rj(r)}),i&&s)throw new Error(t+' contains ".value" child '+Ti(r)+" in addition to actual children.")}};var h2=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!kS(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!d2(n))throw new Error(CT(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Fy=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function f2(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();n!==null&&!iS(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function Ni(t,e,n){f2(t,n),p2(t,r=>rn(r,e)||rn(e,r))}function p2(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let s=i.path;e(s)?(g2(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function g2(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();Di&&nt("event: "+n.toString()),Xa(r)}}}var m2="repo_interrupt",y2=25,Vy=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Fy,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ad(),this.transactionQueueTree_=new Ya,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function _2(t,e,n){if(t.stats_=qy(t.repoInfo_),t.forceRestClient_||xU())t.server_=new wy(t.repoInfo_,(r,i,s,o)=>{MD(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>PD(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{$e(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new zy(t.repoInfo_,e,(r,i,s,o)=>{MD(t,r,i,s,o)},r=>{PD(t,r)},r=>{w2(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=PU(t.repoInfo_,()=>new Ty(t.stats_,t.server_)),t.infoData_=new Iy,t.infoSyncTree_=new dd({startListening:(r,i,s,o)=>{let c=[],u=t.infoData_.getNode(r._path);return u.isEmpty()||(c=hd(t.infoSyncTree_,r._path,u),setTimeout(()=>{o("ok")},0)),c},stopListening:()=>{}}),Zy(t,"connected",!1),t.serverSyncTree_=new dd({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(c,u)=>{let l=o(c,u);Ni(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function v2(t){let n=t.infoData_.getNode(new ye(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function LS(t){return e2({timestamp:v2(t)})}function MD(t,e,n,r,i){t.dataUpdateCount++;let s=new ye(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){let u=Ca(n,l=>rt(l));o=Xj(t.serverSyncTree_,s,u,i)}else{let u=rt(n);o=Zj(t.serverSyncTree_,s,u,i)}else if(r){let u=Ca(n,l=>rt(l));o=Jj(t.serverSyncTree_,s,u)}else{let u=rt(n);o=hd(t.serverSyncTree_,s,u)}let c=s;o.length>0&&(c=e_(t,s)),Ni(t.eventQueue_,c,o)}function PD(t,e){Zy(t,"connected",e),e===!1&&E2(t)}function w2(t,e){$t(e,(n,r)=>{Zy(t,n,r)})}function Zy(t,e,n){let r=new ye("/.info/"+e),i=rt(n);t.infoData_.updateSnapshot(r,i);let s=hd(t.infoSyncTree_,r,i);Ni(t.eventQueue_,r,s)}function I2(t){return t.nextWriteId_++}function E2(t){FS(t,"onDisconnectEvents");let e=LS(t),n=ad();Ey(t.onDisconnect_,fe(),(i,s)=>{let o=r2(i,s,t.serverSyncTree_,e);lS(n,i,o)});let r=[];Ey(n,fe(),(i,s)=>{r=r.concat(hd(t.serverSyncTree_,i,s));let o=D2(t,i);e_(t,o)}),t.onDisconnect_=ad(),Ni(t.eventQueue_,fe(),r)}function C2(t){t.persistentConnection_&&t.persistentConnection_.interrupt(m2)}function FS(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),nt(n,...e)}function VS(t,e,n){return bS(t.serverSyncTree_,e,n)||Se.EMPTY_NODE}function Xy(t,e=t.transactionQueueTree_){if(e||gd(t,e),io(e)){let n=jS(t,e);x(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&T2(t,tc(e),n)}else MS(e)&&pd(e,n=>{Xy(t,n)})}function T2(t,e,n){let r=n.map(l=>l.currentWriteId),i=VS(t,e,r),s=i,o=i.hash();for(let l=0;l<n.length;l++){let f=n[l];x(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;let p=jt(e,f.path);s=s.updateChild(p,f.currentOutputSnapshotRaw)}let c=s.val(!0),u=e;t.server_.put(u.toString(),c,l=>{FS(t,"transaction put response",{path:u.toString(),status:l});let f=[];if(l==="ok"){let p=[];for(let y=0;y<n.length;y++)n[y].status=2,f=f.concat(Ws(t.serverSyncTree_,n[y].currentWriteId)),n[y].onComplete&&p.push(()=>n[y].onComplete(null,!0,n[y].currentOutputSnapshotResolved)),n[y].unwatcher();gd(t,Jy(t.transactionQueueTree_,e)),Xy(t,t.transactionQueueTree_),Ni(t.eventQueue_,e,f);for(let y=0;y<p.length;y++)Xa(p[y])}else{if(l==="datastale")for(let p=0;p<n.length;p++)n[p].status===3?n[p].status=4:n[p].status=0;else{Nt("transaction at "+u.toString()+" failed: "+l);for(let p=0;p<n.length;p++)n[p].status=4,n[p].abortReason=l}e_(t,e)}},o)}function e_(t,e){let n=US(t,e),r=tc(n),i=jS(t,n);return b2(t,i,r),r}function b2(t,e,n){if(e.length===0)return;let r=[],i=[],o=e.filter(c=>c.status===0).map(c=>c.currentWriteId);for(let c=0;c<e.length;c++){let u=e[c],l=jt(n,u.path),f=!1,p;if(x(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)f=!0,p=u.abortReason,i=i.concat(Ws(t.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=y2)f=!0,p="maxretry",i=i.concat(Ws(t.serverSyncTree_,u.currentWriteId,!0));else{let y=VS(t,u.path,o);u.currentInputSnapshot=y;let I=e[c].update(y.val());if(I!==void 0){OS("transaction failed: Data returned ",I,u.path);let A=rt(I);typeof I=="object"&&I!=null&&vn(I,".priority")||(A=A.updatePriority(y.getPriority()));let P=u.currentWriteId,Y=LS(t),le=i2(A,y,Y);u.currentOutputSnapshotRaw=A,u.currentOutputSnapshotResolved=le,u.currentWriteId=I2(t),o.splice(o.indexOf(P),1),i=i.concat(Yj(t.serverSyncTree_,u.path,le,u.currentWriteId,u.applyLocally)),i=i.concat(Ws(t.serverSyncTree_,P,!0))}else f=!0,p="nodata",i=i.concat(Ws(t.serverSyncTree_,u.currentWriteId,!0))}Ni(t.eventQueue_,n,i),i=[],f&&(e[c].status=2,function(y){setTimeout(y,Math.floor(0))}(e[c].unwatcher),e[c].onComplete&&(p==="nodata"?r.push(()=>e[c].onComplete(null,!1,e[c].currentInputSnapshot)):r.push(()=>e[c].onComplete(new Error(p),!1,null))))}gd(t,t.transactionQueueTree_);for(let c=0;c<r.length;c++)Xa(r[c]);Xy(t,t.transactionQueueTree_)}function US(t,e){let n,r=t.transactionQueueTree_;for(n=ie(e);n!==null&&io(r)===void 0;)r=Jy(r,n),e=Te(e),n=ie(e);return r}function jS(t,e){let n=[];return BS(t,e,n),n.sort((r,i)=>r.order-i.order),n}function BS(t,e,n){let r=io(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);pd(e,i=>{BS(t,i,n)})}function gd(t,e){let n=io(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,xS(e,n.length>0?n:void 0)}pd(e,r=>{gd(t,r)})}function D2(t,e){let n=tc(US(t,e)),r=Jy(t.transactionQueueTree_,e);return o2(r,i=>{Jm(t,i)}),Jm(t,r),PS(r,i=>{Jm(t,i)}),n}function Jm(t,e){let n=io(e);if(n){let r=[],i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(x(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(x(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Ws(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?xS(e,void 0):n.length=s+1,Ni(t.eventQueue_,tc(e),i);for(let o=0;o<r.length;o++)Xa(r[o])}}function S2(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function A2(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Nt(`Invalid query segment '${n}' in query '${t}'`)}return e}var kD=function(t,e){let n=R2(t),r=n.namespace;n.domain==="firebase.com"&&Jn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Jn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||CU();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new ed(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new ye(n.pathString)}},R2=function(t){let e="",n="",r="",i="",s="",o=!0,c="https",u=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(c=t.substring(0,l-1),t=t.substring(l+2));let f=t.indexOf("/");f===-1&&(f=t.length);let p=t.indexOf("?");p===-1&&(p=t.length),e=t.substring(0,Math.min(f,p)),f<p&&(i=S2(t.substring(f,p)));let y=A2(t.substring(Math.min(t.length,p)));l=e.indexOf(":"),l>=0?(o=c==="https"||c==="wss",u=parseInt(e.substring(l+1),10)):l=e.length;let I=e.slice(0,l);if(I.toLowerCase()==="localhost")n="localhost";else if(I.split(".").length<=2)n=I;else{let A=e.indexOf(".");r=e.substring(0,A).toLowerCase(),n=e.substring(A+1),s=r}"ns"in y&&(s=y.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:o,scheme:c,pathString:i,namespace:s}};var Uy=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return X(this._path)?null:tS(this._path)}get ref(){return new no(this._repo,this._path)}get _queryIdentifier(){let e=wD(this._queryParams),n=Hy(e);return n==="{}"?"default":n}get _queryObject(){return wD(this._queryParams)}isEqual(e){if(e=Xt(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=iS(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+tj(this._path)}};var no=class t extends Uy{constructor(e,n){super(e,n,new vy,!1)}get parent(){let e=rS(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};Kj(no);Qj(no);var N2="FIREBASE_DATABASE_EMULATOR_HOST",jy={},x2=!1;function M2(t,e,n,r){t.repoInfo_=new ed(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function P2(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Jn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),nt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=kD(s,i),c=o.repoInfo,u,l;typeof process<"u"&&process.env&&(l=process.env[N2]),l?(u=!0,s=`http://${l}?ns=${c.namespace}`,o=kD(s,i),c=o.repoInfo):u=!o.repoInfo.secure;let f=i&&u?new za(za.OWNER):new ry(t.name,t.options,e);h2("Invalid Firebase Database URL",o),X(o.path)||Jn("Database URL must point to the root of a Firebase Database (not including a child path).");let p=O2(c,t,f,new ny(t.name,n));return new By(p,t)}function k2(t,e){let n=jy[e];(!n||n[t.key]!==t)&&Jn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),C2(t),delete n[t.key]}function O2(t,e,n,r){let i=jy[e.name];i||(i={},jy[e.name]=i);let s=i[t.toURLString()];return s&&Jn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Vy(t,x2,n,r),i[t.toURLString()]=s,s}var By=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(_2(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new no(this._repo,fe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(k2(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Jn("Cannot call "+e+" on a deleted database.")}};function $S(t=Ar(),e){let n=mi(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=dl("database");r&&HS(n,...r)}return n}function HS(t,e,n,r={}){t=Xt(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Jn("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Jn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new za(za.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:hl(r.mockUserToken,t.app.options.projectId);s=new za(o)}M2(i,e,n,s)}function L2(t){wU(Tn),En(new yt("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return P2(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),be(nD,rD,t),be(nD,rD,"esm2017")}zy.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};zy.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};L2();var nc=class{constructor(e){return e}},qS="database",t_=class{constructor(){return Ii(qS)}};var n_=new V("angularfire2.database-instances");function F2(t,e){let n=js(qS,t,e);return n&&new nc(n)}function V2(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new nc(r)}}var U2={provide:t_,deps:[[new Me,n_]]},j2={provide:nc,useFactory:F2,deps:[[new Me,n_],tn]};function zS(t,...e){return be("angularfire",Wn.full,"rtdb"),Ot([j2,U2,{provide:n_,useFactory:V2(t),multi:!0,deps:[de,ct,xr,Kn,[new Me,Ei],[new Me,Nr],...e]}])}var GS=Mr($S,!0);var WS={providers:[YE({eventCoalescing:!0}),aT(Nb),Tb(()=>bb({projectId:"cash-flow-db",appId:"1:481096687680:web:117e652208ed20618cbfa5",storageBucket:"cash-flow-db.appspot.com",apiKey:"AIzaSyCW7iTT8vYRMkiae80SstcZzxF2nqdH_WI",authDomain:"cash-flow-db.firebaseapp.com",messagingSenderId:"481096687680"})),Sb(()=>Ab()),eD(()=>tD()),zS(()=>GS()),Hl,$l]};var KS=(()=>{let e=class e{transform(r){return r?r.split(" ").map(i=>i[0]).join("").toUpperCase():"?"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275pipe=$o({name:"userInitials",type:e,pure:!0,standalone:!0});let t=e;return t})();function B2(t,e){t&1&&Lu(0)}function $2(t,e){if(t&1){let n=vr();L(0,"ui-panel",13)(1,"ui-button",14),Ce("click",function(){mr(n);let i=mt(2);return yr(i.signOut())}),Z(2," Log Out "),$()()}t&2&&we("paddingX",5)("paddingY",5)}function H2(t,e){if(t&1){let n=vr();L(0,"nav",3)(1,"div",4)(2,"ui-button",5)(3,"span",6),Z(4,"home"),$()(),Ft(5,"div",7),L(6,"h2",8),Z(7,"Cash Flow"),$()(),L(8,"div",9),ut(9,B2,1,0,"ng-container",10),L(10,"ui-button",11),Ce("click",function(){mr(n);let i=mt();return yr(i.showProfile=!i.showProfile)}),L(11,"span"),Z(12),zo(13,"userInitials"),$()(),ut(14,$2,3,2,"ui-panel",12),$()()}if(t&2){let n=e.ngIf,r=mt(),i=Fu(6);ve(9),we("ngTemplateOutlet",i),ve(3),Vt(Go(13,3,n==null?null:n.displayName)),ve(2),we("ngIf",r.showProfile)}}function q2(t,e){t&1&&Lu(0)}function z2(t,e){if(t&1&&(L(0,"nav",3)(1,"div",4)(2,"ui-button",15)(3,"span",6),Z(4,"lock"),$()(),Ft(5,"div",7),L(6,"h2",8),Z(7,"Welcome"),$()(),L(8,"div",9),ut(9,q2,1,0,"ng-container",10),L(10,"ui-button",16)(11,"span",6),Z(12,"person"),$()()()()),t&2){mt();let n=Fu(6);ve(2),we("disable",!0),ve(7),we("ngTemplateOutlet",n),ve(),we("disable",!0)}}function G2(t,e){if(t&1){let n=vr();L(0,"ui-button",17),Ce("click",function(){mr(n);let i=mt();return yr(i.toggleTheme())}),L(1,"span",6),Z(2),$()()}if(t&2){let n=mt();ve(2),Vt(n.isDarkTheme?"brightness_5":"brightness_2")}}var QS=(()=>{let e=class e{constructor(r,i,s){this.auth=r,this.router=i,this.modalService=s,this.isDarkTheme=!0,this.showProfile=!1,this.currentUser$=new Ne,this.toLogin=()=>this.router.navigate(["welcome"]),this.loadCurrentUser(),this.auth.onAuthStateChanged(()=>this.loadCurrentUser())}loadCurrentUser(){return D(this,null,function*(){yield this.auth.authStateReady();let r=yield this.auth.currentUser;r||this.toLogin(),this.currentUser$.next(r)})}toggleTheme(){this.isDarkTheme=!this.isDarkTheme,document.body.setAttribute("data-theme",this.isDarkTheme?"dark":"light")}signOut(){this.showProfile=!1,this.auth.signOut().then(this.toLogin,r=>this.modalService.showError(r))}};e.\u0275fac=function(i){return new(i||e)(me(At),me(Zt),me(ks))},e.\u0275cmp=Pe({type:e,selectors:[["app-root"]],standalone:!0,features:[ke],decls:7,vars:4,consts:[["welcome",""],["themeSwitcher",""],["class","top-nav",4,"ngIf","ngIfElse"],[1,"top-nav"],[1,"top-nav__left"],["routerLink","/","priority","primary"],[1,"material-icons"],[1,"top-nav__separator"],[1,"top-nav__title"],[1,"top-nav__right"],[4,"ngTemplateOutlet"],["priority","secondary",3,"click"],["class","user-actions",3,"paddingX","paddingY",4,"ngIf"],[1,"user-actions",3,"paddingX","paddingY"],["priority","secondary","type","wide",3,"click"],["priority","primary",3,"disable"],["priority","secondary",3,"disable"],["priority","primary",3,"click"]],template:function(i,s){if(i&1&&(ut(0,H2,15,5,"nav",2),zo(1,"async"),Ft(2,"router-outlet"),ut(3,z2,13,3,"ng-template",null,0,Wo)(5,G2,3,1,"ng-template",null,1,Wo)),i&2){let o=Fu(4);we("ngIf",Go(1,2,s.currentUser$))("ngIfElse",o)}},dependencies:[ag,yn,pC,Ir,oT,KS,fC,Ps],styles:["[_nghost-%COMP%]{background-color:var(--theme-bg-hover);height:100vh}.top-nav[_ngcontent-%COMP%]{padding:12px;background-color:var(--theme-bg);border-bottom:1px solid var(--theme-bg-hover);display:flex;justify-content:space-between}.top-nav__left[_ngcontent-%COMP%], .top-nav__right[_ngcontent-%COMP%]{display:flex;align-items:start;gap:10px}.top-nav__separator[_ngcontent-%COMP%]{width:1px;border-right:1px solid var(--theme-bg-hover);margin:-10px 0;height:60px}.top-nav__title[_ngcontent-%COMP%]{margin:0;line-height:38px;padding:0 10px}.user-actions[_ngcontent-%COMP%]{position:absolute;top:65px;right:5px}"]});let t=e;return t})();TC(QS,WS).catch(t=>console.error(t));
